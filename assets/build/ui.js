define("underscore/underscore",["require","exports","module"],function(require,exports,module){(function(){var e=this,t=e._,i={},n=Array.prototype,a=Object.prototype,r=Function.prototype,s=n.push,o=n.slice,l=n.concat,d=a.toString,u=a.hasOwnProperty,h=n.forEach,c=n.map,f=n.reduce,p=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,_=n.lastIndexOf,x=Array.isArray,M=Object.keys,b=r.bind,w=function(e){if(e instanceof w)return e;if(!(this instanceof w))return new w(e);else return void(this._wrapped=e)};if("undefined"!=typeof exports){if("undefined"!=typeof module&&module.exports)exports=module.exports=w;exports._=w}else e._=w;w.VERSION="1.5.2";var L=w.each=w.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var a=0,r=e.length;r>a;a++)if(t.call(n,e[a],a,e)===i)return}else for(var s=w.keys(e),a=0,r=s.length;r>a;a++)if(t.call(n,e[s[a]],s[a],e)===i)return};w.map=w.collect=function(e,t,i){var n=[];if(null==e)return n;if(c&&e.map===c)return e.map(t,i);else return L(e,function(e,a,r){n.push(t.call(i,e,a,r))}),n};var C="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(e,t,i,n){var a=arguments.length>2;if(null==e)e=[];if(f&&e.reduce===f){if(n)t=w.bind(t,n);return a?e.reduce(t,i):e.reduce(t)}if(L(e,function(e,r,s){if(!a)i=e,a=!0;else i=t.call(n,i,e,r,s)}),!a)throw new TypeError(C);return i},w.reduceRight=w.foldr=function(e,t,i,n){var a=arguments.length>2;if(null==e)e=[];if(p&&e.reduceRight===p){if(n)t=w.bind(t,n);return a?e.reduceRight(t,i):e.reduceRight(t)}var r=e.length;if(r!==+r){var s=w.keys(e);r=s.length}if(L(e,function(o,l,d){if(l=s?s[--r]:--r,!a)i=e[l],a=!0;else i=t.call(n,i,e[l],l,d)}),!a)throw new TypeError(C);return i},w.find=w.detect=function(e,t,i){var n;return T(e,function(e,a,r){if(t.call(i,e,a,r))return n=e,!0;else return void 0}),n},w.filter=w.select=function(e,t,i){var n=[];if(null==e)return n;if(m&&e.filter===m)return e.filter(t,i);else return L(e,function(e,a,r){if(t.call(i,e,a,r))n.push(e)}),n},w.reject=function(e,t,i){return w.filter(e,function(e,n,a){return!t.call(i,e,n,a)},i)},w.every=w.all=function(e,t,n){t||(t=w.identity);var a=!0;if(null==e)return a;if(g&&e.every===g)return e.every(t,n);else return L(e,function(e,r,s){if(!(a=a&&t.call(n,e,r,s)))return i;else return void 0}),!!a};var T=w.some=w.any=function(e,t,n){t||(t=w.identity);var a=!1;if(null==e)return a;if(v&&e.some===v)return e.some(t,n);else return L(e,function(e,r,s){if(a||(a=t.call(n,e,r,s)))return i;else return void 0}),!!a};w.contains=w.include=function(e,t){if(null==e)return!1;if(y&&e.indexOf===y)return-1!=e.indexOf(t);else return T(e,function(e){return e===t})},w.invoke=function(e,t){var i=o.call(arguments,2),n=w.isFunction(t);return w.map(e,function(e){return(n?t:e[t]).apply(e,i)})},w.pluck=function(e,t){return w.map(e,function(e){return e[t]})},w.where=function(e,t,i){if(w.isEmpty(t))return i?void 0:[];else return w[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},w.findWhere=function(e,t){return w.where(e,t,!0)},w.max=function(e,t,i){if(!t&&w.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&w.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return L(e,function(e,a,r){var s=t?t.call(i,e,a,r):e;s>n.computed&&(n={value:e,computed:s})}),n.value},w.min=function(e,t,i){if(!t&&w.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&w.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return L(e,function(e,a,r){var s=t?t.call(i,e,a,r):e;s<n.computed&&(n={value:e,computed:s})}),n.value},w.shuffle=function(e){var t,i=0,n=[];return L(e,function(e){t=w.random(i++),n[i-1]=n[t],n[t]=e}),n},w.sample=function(e,t,i){if(arguments.length<2||i)return e[w.random(e.length-1)];else return w.shuffle(e).slice(0,Math.max(0,t))};var D=function(e){return w.isFunction(e)?e:function(t){return t[e]}};w.sortBy=function(e,t,i){var n=D(t);return w.pluck(w.map(e,function(e,t,a){return{value:e,index:t,criteria:n.call(i,e,t,a)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var Y=function(e){return function(t,i,n){var a={},r=null==i?w.identity:D(i);return L(t,function(i,s){var o=r.call(n,i,s,t);e(a,o,i)}),a}};w.groupBy=Y(function(e,t,i){(w.has(e,t)?e[t]:e[t]=[]).push(i)}),w.indexBy=Y(function(e,t,i){e[t]=i}),w.countBy=Y(function(e,t){w.has(e,t)?e[t]++:e[t]=1}),w.sortedIndex=function(e,t,i,n){i=null==i?w.identity:D(i);for(var a=i.call(n,t),r=0,s=e.length;s>r;){var o=r+s>>>1;i.call(n,e[o])<a?r=o+1:s=o}return r},w.toArray=function(e){if(!e)return[];if(w.isArray(e))return o.call(e);if(e.length===+e.length)return w.map(e,w.identity);else return w.values(e)},w.size=function(e){if(null==e)return 0;else return e.length===+e.length?e.length:w.keys(e).length},w.first=w.head=w.take=function(e,t,i){if(null==e)return void 0;else return null==t||i?e[0]:o.call(e,0,t)},w.initial=function(e,t,i){return o.call(e,0,e.length-(null==t||i?1:t))},w.last=function(e,t,i){if(null==e)return void 0;if(null==t||i)return e[e.length-1];else return o.call(e,Math.max(e.length-t,0))},w.rest=w.tail=w.drop=function(e,t,i){return o.call(e,null==t||i?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var k=function(e,t,i){if(t&&w.every(e,w.isArray))return l.apply(i,e);else return L(e,function(e){if(w.isArray(e)||w.isArguments(e))t?s.apply(i,e):k(e,t,i);else i.push(e)}),i};w.flatten=function(e,t){return k(e,t,[])},w.without=function(e){return w.difference(e,o.call(arguments,1))},w.uniq=w.unique=function(e,t,i,n){if(w.isFunction(t))n=i,i=t,t=!1;var a=i?w.map(e,i,n):e,r=[],s=[];return L(a,function(i,n){if(t?!n||s[s.length-1]!==i:!w.contains(s,i))s.push(i),r.push(e[n])}),r},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=function(e){var t=o.call(arguments,1);return w.filter(w.uniq(e),function(e){return w.every(t,function(t){return w.indexOf(t,e)>=0})})},w.difference=function(e){var t=l.apply(n,o.call(arguments,1));return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){for(var e=w.max(w.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=w.pluck(arguments,""+i);return t},w.object=function(e,t){if(null==e)return{};for(var i={},n=0,a=e.length;a>n;n++)if(t)i[e[n]]=t[n];else i[e[n][0]]=e[n][1];return i},w.indexOf=function(e,t,i){if(null==e)return-1;var n=0,a=e.length;if(i)if("number"==typeof i)n=0>i?Math.max(0,a+i):i;else return n=w.sortedIndex(e,t),e[n]===t?n:-1;if(y&&e.indexOf===y)return e.indexOf(t,i);for(;a>n;n++)if(e[n]===t)return n;return-1},w.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var a=n?i:e.length;a--;)if(e[a]===t)return a;return-1},w.range=function(e,t,i){if(arguments.length<=1)t=e||0,e=0;i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),a=0,r=new Array(n);n>a;)r[a++]=e,e+=i;return r};var P=function(){};w.bind=function(e,t){var i,n;if(b&&e.bind===b)return b.apply(e,o.call(arguments,1));if(!w.isFunction(e))throw new TypeError;return i=o.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(o.call(arguments)));P.prototype=e.prototype;var a=new P;P.prototype=null;var r=e.apply(a,i.concat(o.call(arguments)));if(Object(r)===r)return r;else return a}},w.partial=function(e){var t=o.call(arguments,1);return function(){return e.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(e){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return L(t,function(t){e[t]=w.bind(e[t],e)}),e},w.memoize=function(e,t){var i={};return t||(t=w.identity),function(){var n=t.apply(this,arguments);return w.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},w.delay=function(e,t){var i=o.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},w.defer=function(e){return w.delay.apply(w,[e,1].concat(o.call(arguments,1)))},w.throttle=function(e,t,i){var n,a,r,s=null,o=0;i||(i={});var l=function(){o=i.leading===!1?0:new Date,s=null,r=e.apply(n,a)};return function(){var d=new Date;if(!o&&i.leading===!1)o=d;var u=t-(d-o);if(n=this,a=arguments,0>=u)clearTimeout(s),s=null,o=d,r=e.apply(n,a);else if(!s&&i.trailing!==!1)s=setTimeout(l,u);return r}},w.debounce=function(e,t,i){var n,a,r,s,o;return function(){r=this,a=arguments,s=new Date;var l=function(){var d=new Date-s;if(t>d)n=setTimeout(l,t-d);else if(n=null,!i)o=e.apply(r,a)},d=i&&!n;if(!n)n=setTimeout(l,t);if(d)o=e.apply(r,a);return o}},w.once=function(e){var t,i=!1;return function(){if(i)return t;else return i=!0,t=e.apply(this,arguments),e=null,t}},w.wrap=function(e,t){return function(){var i=[e];return s.apply(i,arguments),t.apply(this,i)}},w.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments);else return void 0}},w.keys=M||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)if(w.has(e,i))t.push(i);return t},w.values=function(e){for(var t=w.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=e[t[a]];return n},w.pairs=function(e){for(var t=w.keys(e),i=t.length,n=new Array(i),a=0;i>a;a++)n[a]=[t[a],e[t[a]]];return n},w.invert=function(e){for(var t={},i=w.keys(e),n=0,a=i.length;a>n;n++)t[e[i[n]]]=i[n];return t},w.functions=w.methods=function(e){var t=[];for(var i in e)if(w.isFunction(e[i]))t.push(i);return t.sort()},w.extend=function(e){return L(o.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},w.pick=function(e){var t={},i=l.apply(n,o.call(arguments,1));return L(i,function(i){if(i in e)t[i]=e[i]}),t},w.omit=function(e){var t={},i=l.apply(n,o.call(arguments,1));for(var a in e)if(!w.contains(i,a))t[a]=e[a];return t},w.defaults=function(e){return L(o.call(arguments,1),function(t){if(t)for(var i in t)if(void 0===e[i])e[i]=t[i]}),e},w.clone=function(e){if(!w.isObject(e))return e;else return w.isArray(e)?e.slice():w.extend({},e)},w.tap=function(e,t){return t(e),e};var S=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(e instanceof w)e=e._wrapped;if(t instanceof w)t=t._wrapped;var a=d.call(e);if(a!=d.call(t))return!1;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]==e)return n[r]==t;var s=e.constructor,o=t.constructor;if(s!==o&&!(w.isFunction(s)&&s instanceof s&&w.isFunction(o)&&o instanceof o))return!1;i.push(e),n.push(t);var l=0,u=!0;if("[object Array]"==a){if(l=e.length,u=l==t.length)for(;l--&&(u=S(e[l],t[l],i,n)););}else{for(var h in e)if(w.has(e,h))if(l++,!(u=w.has(t,h)&&S(e[h],t[h],i,n)))break;if(u){for(h in t)if(w.has(t,h)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};if(w.isEqual=function(e,t){return S(e,t,[],[])},w.isEmpty=function(e){if(null==e)return!0;if(w.isArray(e)||w.isString(e))return 0===e.length;for(var t in e)if(w.has(e,t))return!1;return!0},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=x||function(e){return"[object Array]"==d.call(e)},w.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){w["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),!w.isArguments(arguments))w.isArguments=function(e){return!(!e||!w.has(e,"callee"))};if("function"!=typeof/./)w.isFunction=function(e){return"function"==typeof e};w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!=+e},w.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==d.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return u.call(e,t)},w.noConflict=function(){return e._=t,this},w.identity=function(e){return e},w.times=function(e,t,i){for(var n=Array(Math.max(0,e)),a=0;e>a;a++)n[a]=t.call(i,a);return n},w.random=function(e,t){if(null==t)t=e,e=0;return e+Math.floor(Math.random()*(t-e+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=w.invert(I.escape);var E={escape:new RegExp("["+w.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+w.keys(I.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(e){w[e]=function(t){if(null==t)return"";else return(""+t).replace(E[e],function(t){return I[e][t]})}}),w.result=function(e,t){if(null==e)return void 0;var i=e[t];return w.isFunction(i)?i.call(e):i},w.mixin=function(e){L(w.functions(e),function(t){var i=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),V.call(this,i.apply(w,e))}})};var N=0;w.uniqueId=function(e){var t=++N+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(e,t,i){var n;i=w.defaults({},i,w.templateSettings);var a=new RegExp([(i.escape||O).source,(i.interpolate||O).source,(i.evaluate||O).source].join("|")+"|$","g"),r=0,s="__p+='";if(e.replace(a,function(t,i,n,a,o){if(s+=e.slice(r,o).replace(j,function(e){return"\\"+H[e]}),i)s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'";if(n)s+="'+\n((__t=("+n+"))==null?'':__t)+\n'";if(a)s+="';\n"+a+"\n__p+='";return r=o+t.length,t}),s+="';\n",!i.variable)s="with(obj||{}){\n"+s+"}\n";s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(t)return n(t,w);var l=function(e){return n.call(this,e,w)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},w.chain=function(e){return w(e).chain()};var V=function(e){return this._chain?w(e).chain():e};w.mixin(w),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];w.prototype[e]=function(){var i=this._wrapped;if(t.apply(i,arguments),("shift"==e||"splice"==e)&&0===i.length)delete i[0];return V.call(this,i)}}),L(["concat","join","slice"],function(e){var t=n[e];w.prototype[e]=function(){return V.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}),define("underscore",["underscore/underscore"],function(e){return e}),define("esui/lib/string",["require","underscore"],function(require){var e=require("underscore"),t={},i=/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g;return t.trim=function(e){if(!e)return"";else return String(e).replace(i,"")},t.format=function(e,t){if(!e)return"";if(null==t)return e;else return e.replace(/\$\{(.+?)\}/g,function(e,i){var n=t[i];if("function"==typeof n)n=n(i);return null==n?"":n})},t.camelize=function(e){if(!e)return"";else return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})},t.pascalize=function(e){if(!e)return"";else return e.charAt(0).toUpperCase()+t.camelize(e.slice(1))},t.splitTokenList=function(i){if(!i)return[];if(!e.isArray(i))return e.chain(i.split(/[,\s]/)).map(t.trim).compact().value()},t}),define("esui/lib/dom",["require","underscore","./string"],function(require){var e=require("underscore"),t=require("./string"),i={};return i.g=function(e){if(!e)return null;else return"string"==typeof e?document.getElementById(e):e},i.isInput=function(e){var t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"textarea"===t},i.removeNode=function(e){if("string"==typeof e)e=i.g(e);if(e){var t=e.parentNode;if(t)t.removeChild(e)}},i.insertAfter=function(e,t){var i=t.parentNode;if(i)i.insertBefore(e,t.nextSibling);return e},i.insertBefore=function(e,t){var i=t.parentNode;if(i)i.insertBefore(e,t);return e},i.getChildren=function(t){return e.filter(t.children,function(e){return 1===e.nodeType})},i.getComputedStyle=function(e,t){if(!e)return"";var i=9===e.nodeType?e:e.ownerDocument||e.document;if(i.defaultView&&i.defaultView.getComputedStyle){var n=i.defaultView.getComputedStyle(e,null);if(n)return n[t]||n.getPropertyValue(t)}else if(e&&e.currentStyle){var a=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,r=new RegExp("^("+a+")(?!px)[a-z%]+$","i"),s=/^(top|right|bottom|left)$/,o=e.currentStyle[t],l=function(e,t){var i=e.currentStyle[t]||0,n=e.style.left,a=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left="fontSize"===t?"1em":i,i=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=a,i};if(r.test(o)&&!s.test(t))return l(e,t);else return o}return""},i.getStyle=function(e,n){return n=t.camelize(n),e.style[n]||(e.currentStyle?e.currentStyle[n]:"")||i.getComputedStyle(e,n)},i.getOffset=function(e){var t=e.getBoundingClientRect(),i={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top},n=document.documentElement.clientTop||document.body.clientTop||0,a=document.documentElement.clientLeft||document.body.clientLeft||0,r=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;return i.top=i.top+r-n,i.bottom=i.bottom+r-n,i.left=i.left+s-a,i.right=i.right+s-a,i},i.getText=function(t){var n="";if(3===t.nodeType||4===t.nodeType)n+=t.nodeValue;else if(8!==t.nodeType)e.each(t.childNodes,function(e){n+=i.getText(e)});return n},i.dom={},i.dom.first=function(e){if(e=i.g(e),e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},i.dom.last=function(e){if(e=i.g(e),e.lastElementChild)return e.lastElementChild;for(var t=e.lastChild;t;t=t.previousSibling)if(1===t.nodeType)return t;return null},i.dom.next=function(e){if(e=i.g(e),e.nextElementSibling)return e.nextElementSibling;for(var t=e.nextSibling;t;t=t.nextSibling)if(1===t.nodeType)return t;return null},i.dom.previous=function(e){if(e=i.g(e),e.previousElementSibling)return e.previousElementSibling;for(var t=e.previousSibling;t;t=t.previousSibling)if(1==t.nodeType)return t;return null},i.dom.contains=function(e,t){return e=i.g(e),t=i.g(t),e.contains?e!==t&&e.contains(t):!!(16&e.compareDocumentPosition(t))},i.dom.createElement=function(e){var t=document.createElement("div");t.innerHTML=e;var i=t.children;if(1===i.length)return i[0];else return i},i}),define("esui/lib/attribute",["require","./dom"],function(require){var e=require("./dom"),t={};t.hasAttribute=function(e,t){if(e.hasAttribute)return e.hasAttribute(t);else return e.attributes&&e.attributes[t]&&e.attributes[t].specified};var i=function(){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"},t=document.createElement("div");t.innerHTML='<label for="test" class="test"></label>';var i=t.getElementsByTagName("label")[0];if("test"===i.getAttribute("className"))e["class"]="className";else e.className="class";if("test"===i.getAttribute("for"))e.htmlFor="for";else e["for"]="htmlFor";return e}();return t.setAttribute=function(t,n,a){if(t=e.g(t),"style"===n)t.style.cssText=a;else n=i[n]||n,t.setAttribute(n,a);return t},t.getAttribute=function(t,n){if(t=e.g(t),"style"===n)return t.style.cssText;else return n=i[n]||n,t.getAttribute(n)},t.removeAttribute=function(t,n){t=e.g(t),n=i[n]||n,t.removeAttribute(n)},t}),define("esui/lib/class",["require","underscore","./dom"],function(require){function e(e){return e.className?e.className.split(/\s+/):[]}var t=require("underscore"),i=require("./dom"),n={};return n.getClasses=e,n.hasClass=function(n,a){if(n=i.g(n),""===a)throw new Error("className must not be empty");if(!n||!a)return!1;if(n.classList)return n.classList.contains(a);var r=e(n);return t.contains(r,a)},n.addClass=function(n,a){if(n=i.g(n),""===a)throw new Error("className must not be empty");if(!n||!a)return n;if(n.classList)return n.classList.add(a),n;var r=e(n);if(t.contains(r,a))return n;else return r.push(a),n.className=r.join(" "),n},n.addClasses=function(n,a){if(n=i.g(n),!n||!a)return n;if(n.classList)return t.each(a,function(e){n.classList.add(e)}),n;var r=e(n),s=t.union(r,a);if(s.length>r.length)n.className=s.join(" ");return n},n.removeClass=function(t,n){if(t=i.g(t),""===n)throw new Error("className must not be empty");if(!t||!n)return t;if(t.classList)return t.classList.remove(n),t;for(var a=e(t),r=!1,s=0;s<a.length;s++)if(a[s]===n)a.splice(s,1),s--,r=!0;if(r)t.className=a.join(" ");return t},n.removeClasses=function(n,a){if(n=i.g(n),!n||!a)return n;if(n.classList)return t.each(a,function(e){n.classList.remove(e)}),n;var r=e(n),s=t.difference(r,a);if(s.length<r.length)n.className=s.join(" ");return n},n.toggleClass=function(t,n){if(t=i.g(t),""===n)throw new Error("className must not be empty");if(!t||!n)return t;if(t.classList)return t.classList.toggle(n),t;for(var a=e(t),r=!1,s=0;s<a.length;s++)if(a[s]===n)a.splice(s,1),r=!0,s--;if(!r)a.push(n);return t.className=a.join(" "),t},n}),define("moment/moment",["require","exports","module"],function(require,exports,module){(function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(e,t){function i(){if(ht.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn)console.warn("Deprecation warning: "+e)}var n=!0;return d(function(){if(n)i(),n=!1;return t.apply(this,arguments)},t)}function a(e,t){return function(i){return c(e.call(this,i),t)}}function r(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function s(){}function o(e){C(e),d(this,e)}function l(e){var t=y(e),i=t.year||0,n=t.quarter||0,a=t.month||0,r=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,d=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*d+6e4*l+36e5*o,this._days=+s+7*r,this._months=+a+3*n+12*i,this._data={},this._bubble()}function d(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];if(t.hasOwnProperty("toString"))e.toString=t.toString;if(t.hasOwnProperty("valueOf"))e.valueOf=t.valueOf;return e}function u(e){var t,i={};for(t in e)if(e.hasOwnProperty(t)&&wt.hasOwnProperty(t))i[t]=e[t];return i}function h(e){if(0>e)return Math.ceil(e);else return Math.floor(e)}function c(e,t,i){for(var n=""+Math.abs(e),a=e>=0;n.length<t;)n="0"+n;return(a?i?"+":"":"-")+n}function f(e,t,i,n){var a=t._milliseconds,r=t._days,s=t._months;if(n=null==n?!0:n,a)e._d.setTime(+e._d+a*i);if(r)ot(e,"Date",st(e,"Date")+r*i);if(s)rt(e,st(e,"Month")+s*i);if(n)ht.updateOffset(e,r||s)}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function g(e,t,i){var n,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;a>n;n++)if(i&&e[n]!==t[n]||!i&&x(e[n])!==x(t[n]))s++;return s+r}function v(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Qt[e]||Kt[t]||t}return e}function y(e){var t,i,n={};for(i in e)if(e.hasOwnProperty(i))if(t=v(i))n[t]=e[i];return n}function _(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else if(0===t.indexOf("month"))i=12,n="month";else return;ht[t]=function(a,r){var s,o,l=ht.fn._lang[t],d=[];if("number"==typeof a)r=a,a=e;if(o=function(e){var t=ht().utc().set(n,e);return l.call(ht.fn._lang,t,a||"")},null!=r)return o(r);else{for(s=0;i>s;s++)d.push(o(s));return d}}}function x(e){var t=+e,i=0;if(0!==t&&isFinite(t))if(t>=0)i=Math.floor(t);else i=Math.ceil(t);return i}function M(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function b(e,t,i){return tt(ht([e,11,31+t-i]),t,i).week}function w(e){return L(e)?366:365}function L(e){return e%4===0&&e%100!==0||e%400===0}function C(e){var t;if(e._a&&-2===e._pf.overflow){if(t=e._a[gt]<0||e._a[gt]>11?gt:e._a[vt]<1||e._a[vt]>M(e._a[mt],e._a[gt])?vt:e._a[yt]<0||e._a[yt]>23?yt:e._a[_t]<0||e._a[_t]>59?_t:e._a[xt]<0||e._a[xt]>59?xt:e._a[Mt]<0||e._a[Mt]>999?Mt:-1,e._pf._overflowDayOfYear&&(mt>t||t>vt))t=vt;e._pf.overflow=t}}function T(e){if(null==e._isValid)if(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict)e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length;return e._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function Y(e,t){return t._isUTC?ht(e).zone(t._offset||0):ht(e).local()}function k(e,t){if(t.abbr=e,!bt[e])bt[e]=new s;return bt[e].set(t),bt[e]}function P(e){delete bt[e]}function S(e){var t,i,n,a,r=0,s=function(e){if(!bt[e]&&Lt)try{require("./lang/"+e)}catch(t){}return bt[e]};if(!e)return ht.fn._lang;if(!p(e)){if(i=s(e))return i;e=[e]}for(;r<e.length;){for(a=D(e[r]).split("-"),t=a.length,n=D(e[r+1]),n=n?n.split("-"):null;t>0;){if(i=s(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&g(a,n,!0)>=t-1)break;t--}r++}return ht.fn._lang}function I(e){if(e.match(/\[[\s\S]/))return e.replace(/^\[|\]$/g,"");else return e.replace(/\\/g,"")}function E(e){var t,i,n=e.match(Yt);for(t=0,i=n.length;i>t;t++)if(ai[n[t]])n[t]=ai[n[t]];else n[t]=I(n[t]);return function(a){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(a,e):n[t];return r}}function N(e,t){if(!e.isValid())return e.lang().invalidDate();if(t=O(t,e.lang()),!ei[t])ei[t]=E(t);return ei[t](e)}function O(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(kt.lastIndex=0;n>=0&&kt.test(e);)e=e.replace(kt,i),kt.lastIndex=0,n-=1;return e}function H(e,t){var i,n=t._strict;switch(e){case"Q":return At;case"DDDD":return Rt;case"YYYY":case"GGGG":case"gggg":return n?Bt:It;case"Y":case"G":case"g":return zt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Wt:Et;case"S":if(n)return At;case"SS":if(n)return Ft;case"SSS":if(n)return Rt;case"DDD":return St;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ot;case"a":case"A":return S(t._l)._meridiemParse;case"X":return Vt;case"Z":case"ZZ":return Ht;case"T":return jt;case"SSSS":return Nt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Ft:Pt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pt;case"Do":return $t;default:return i=new RegExp(z(W(e.replace("\\","")),"i"))}}function j(e){e=e||"";var t=e.match(Ht)||[],i=t[t.length-1]||[],n=(i+"").match(Xt)||["-",0,0],a=+(60*n[1])+x(n[2]);return"+"===n[0]?-a:a}function V(e,t,i){var n,a=i._a;switch(e){case"Q":if(null!=t)a[gt]=3*(x(t)-1);break;case"M":case"MM":if(null!=t)a[gt]=x(t)-1;break;case"MMM":case"MMMM":if(n=S(i._l).monthsParse(t),null!=n)a[gt]=n;else i._pf.invalidMonth=t;break;case"D":case"DD":if(null!=t)a[vt]=x(t);break;case"Do":if(null!=t)a[vt]=x(parseInt(t,10));break;case"DDD":case"DDDD":if(null!=t)i._dayOfYear=x(t);break;case"YY":a[mt]=ht.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[mt]=x(t);break;case"a":case"A":i._isPm=S(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":a[yt]=x(t);break;case"m":case"mm":a[_t]=x(t);break;case"s":case"ss":a[xt]=x(t);break;case"S":case"SS":case"SSS":case"SSSS":a[Mt]=x(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=j(t);break;case"dd":case"ddd":case"dddd":if(n=S(i._l).weekdaysParse(t),null!=n)i._w=i._w||{},i._w.d=n;else i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":if(e=e.substr(0,2),t)i._w=i._w||{},i._w[e]=x(t);break;case"gg":case"GG":i._w=i._w||{},i._w[e]=ht.parseTwoDigitYear(t)}}function $(e){var i,n,a,r,s,o,l,d;if(i=e._w,null!=i.GG||null!=i.W||null!=i.E)s=1,o=4,n=t(i.GG,e._a[mt],tt(ht(),1,4).year),a=t(i.W,1),r=t(i.E,1);else if(d=S(e._l),s=d._week.dow,o=d._week.doy,n=t(i.gg,e._a[mt],tt(ht(),s,o).year),a=t(i.w,1),null!=i.d){if(r=i.d,s>r)++a}else if(null!=i.e)r=i.e+s;else r=s;l=it(n,a,r,o,s),e._a[mt]=l.year,e._dayOfYear=l.dayOfYear}function A(e){var i,n,a,r,s=[];if(!e._d){if(a=R(e),e._w&&null==e._a[vt]&&null==e._a[gt])$(e);if(e._dayOfYear){if(r=t(e._a[mt],a[mt]),e._dayOfYear>w(r))e._pf._overflowDayOfYear=!0;n=Z(r,0,e._dayOfYear),e._a[gt]=n.getUTCMonth(),e._a[vt]=n.getUTCDate()}for(i=0;3>i&&null==e._a[i];++i)e._a[i]=s[i]=a[i];for(;7>i;i++)e._a[i]=s[i]=null==e._a[i]?2===i?1:0:e._a[i];if(e._d=(e._useUTC?Z:X).apply(null,s),null!=e._tzm)e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function F(e){var t;if(!e._d)t=y(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],A(e)}function R(e){var t=new Date;if(e._useUTC)return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()];else return[t.getFullYear(),t.getMonth(),t.getDate()]}function B(e){if(e._f===ht.ISO_8601)return void U(e);e._a=[],e._pf.empty=!0;var t,i,n,a,r,s=S(e._l),o=""+e._i,l=o.length,d=0;for(n=O(e._f,s).match(Yt)||[],t=0;t<n.length;t++){if(a=n[t],i=(o.match(H(a,e))||[])[0]){if(r=o.substr(0,o.indexOf(i)),r.length>0)e._pf.unusedInput.push(r);o=o.slice(o.indexOf(i)+i.length),d+=i.length}if(ai[a]){if(i)e._pf.empty=!1;else e._pf.unusedTokens.push(a);V(a,i,e)}else if(e._strict&&!i)e._pf.unusedTokens.push(a)}if(e._pf.charsLeftOver=l-d,o.length>0)e._pf.unusedInput.push(o);if(e._isPm&&e._a[yt]<12)e._a[yt]+=12;if(e._isPm===!1&&12===e._a[yt])e._a[yt]=0;A(e),C(e)}function W(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,a){return t||i||n||a})}function z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e){var t,n,a,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)if(s=0,t=d({},e),t._pf=i(),t._f=e._f[r],B(t),T(t)){if(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,null==a||a>s)a=s,n=t}else;d(e,n||t)}function U(e){var t,i,n=e._i,a=qt.exec(n);if(a){for(e._pf.iso=!0,t=0,i=Gt.length;i>t;t++)if(Gt[t][1].exec(n)){e._f=Gt[t][0]+(a[6]||" ");break}for(t=0,i=Jt.length;i>t;t++)if(Jt[t][1].exec(n)){e._f+=Jt[t][0];break}if(n.match(Ht))e._f+="Z";B(e)}else e._isValid=!1}function G(e){if(U(e),e._isValid===!1)delete e._isValid,ht.createFromInputFallback(e)}function J(t){var i=t._i,n=Ct.exec(i);if(i===e)t._d=new Date;else if(n)t._d=new Date(+n[1]);else if("string"==typeof i)G(t);else if(p(i))t._a=i.slice(0),A(t);else if(m(i))t._d=new Date(+i);else if("object"==typeof i)F(t);else if("number"==typeof i)t._d=new Date(i);else ht.createFromInputFallback(t)}function X(e,t,i,n,a,r,s){var o=new Date(e,t,i,n,a,r,s);if(1970>e)o.setFullYear(e);return o}function Z(e){var t=new Date(Date.UTC.apply(null,arguments));if(1970>e)t.setUTCFullYear(e);return t}function Q(e,t){if("string"==typeof e)if(!isNaN(e))e=parseInt(e,10);else if(e=t.weekdaysParse(e),"number"!=typeof e)return null;return e}function K(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}function et(e,t,i){var n=pt(Math.abs(e)/1e3),a=pt(n/60),r=pt(a/60),s=pt(r/24),o=pt(s/365),l=n<ti.s&&["s",n]||1===a&&["m"]||a<ti.m&&["mm",a]||1===r&&["h"]||r<ti.h&&["hh",r]||1===s&&["d"]||s<=ti.dd&&["dd",s]||s<=ti.dm&&["M"]||s<ti.dy&&["MM",pt(s/30)]||1===o&&["y"]||["yy",o];return l[2]=t,l[3]=e>0,l[4]=i,K.apply({},l)}function tt(e,t,i){var n,a=i-t,r=i-e.day();if(r>a)r-=7;if(a-7>r)r+=7;return n=ht(e).add("d",r),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function it(e,t,i,n,a){var r,s,o=Z(e,0,1).getUTCDay();return o=0===o?7:o,i=null!=i?i:a,r=a-o+(o>n?7:0)-(a>o?7:0),s=7*(t-1)+(i-a)+r+1,{year:s>0?e:e-1,dayOfYear:s>0?s:w(e-1)+s}}function nt(t){var i=t._i,n=t._f;if(null===i||n===e&&""===i)return ht.invalid({nullInput:!0});if("string"==typeof i)t._i=i=S().preparse(i);if(ht.isMoment(i))t=u(i),t._d=new Date(+i._d);else if(n)if(p(n))q(t);else B(t);
else J(t);return new o(t)}function at(e,t){var i,n;if(1===t.length&&p(t[0]))t=t[0];if(!t.length)return ht();for(i=t[0],n=1;n<t.length;++n)if(t[n][e](i))i=t[n];return i}function rt(e,t){var i;if("string"==typeof t)if(t=e.lang().monthsParse(t),"number"!=typeof t)return e;return i=Math.min(e.date(),M(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function st(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ot(e,t,i){if("Month"===t)return rt(e,i);else return e._d["set"+(e._isUTC?"UTC":"")+t](i)}function lt(e,t){return function(i){if(null!=i)return ot(this,e,i),ht.updateOffset(this,t),this;else return st(this,e)}}function dt(e){ht.duration.fn[e]=function(){return this._data[e]}}function ut(e,t){ht.duration.fn["as"+e]=function(){return+this/t}}for(var ht,ct,ft="2.7.0",pt=Math.round,mt=0,gt=1,vt=2,yt=3,_t=4,xt=5,Mt=6,bt={},wt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Lt="undefined"!=typeof module&&module.exports,Ct=/^\/?Date\((\-?\d+)/i,Tt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Dt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,kt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pt=/\d\d?/,St=/\d{1,3}/,It=/\d{1,4}/,Et=/[+\-]?\d{1,6}/,Nt=/\d+/,Ot=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ht=/Z|[\+\-]\d\d:?\d\d/gi,jt=/T/i,Vt=/[\+\-]?\d+(\.\d{1,3})?/,$t=/\d{1,2}/,At=/\d/,Ft=/\d\d/,Rt=/\d{3}/,Bt=/\d{4}/,Wt=/[+-]?\d{6}/,zt=/[+-]?\d+/,qt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ut="YYYY-MM-DDTHH:mm:ssZ",Gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Jt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xt=/([\+\-]|\d\d)/gi,Zt=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Qt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Kt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ei={},ti={s:45,m:45,h:22,dd:25,dm:45,dy:345},ii="DDD w W M D d".split(" "),ni="M D H h m s w W".split(" "),ai={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+c(Math.abs(e),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return x(this.milliseconds()/100)},SS:function(){return c(x(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";if(0>e)e=-e,t="-";return t+c(x(e/60),2)+":"+c(x(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";if(0>e)e=-e,t="-";return t+c(x(e/60),2)+c(x(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ri=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ii.length;)ct=ii.pop(),ai[ct+"o"]=r(ai[ct],ct);for(;ni.length;)ct=ni.pop(),ai[ct+ct]=a(ai[ct],2);for(ai.DDDD=a(ai.DDD,3),d(s.prototype,{set:function(e){var t,i;for(i in e)if(t=e[i],"function"==typeof t)this[i]=t;else this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;if(!this._monthsParse)this._monthsParse=[];for(t=0;12>t;t++){if(!this._monthsParse[t])i=ht.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i");if(this._monthsParse[t].test(e))return t}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;if(!this._weekdaysParse)this._weekdaysParse=[];for(t=0;7>t;t++){if(!this._weekdaysParse[t])i=ht([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i");if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];if(!t&&this._longDateFormat[e.toUpperCase()])t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t;return t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){if(e>11)return i?"pm":"PM";else return i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var a=this._relativeTime[i];return"function"==typeof a?a(e,t,i,n):a.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return tt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ht=function(t,n,a,r){var s;if("boolean"==typeof a)r=a,a=e;return s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=a,s._strict=r,s._isUTC=!1,s._pf=i(),nt(s)},ht.suppressDeprecationWarnings=!1,ht.createFromInputFallback=n("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),ht.min=function(){var e=[].slice.call(arguments,0);return at("isBefore",e)},ht.max=function(){var e=[].slice.call(arguments,0);return at("isAfter",e)},ht.utc=function(t,n,a,r){var s;if("boolean"==typeof a)r=a,a=e;return s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=a,s._i=t,s._f=n,s._strict=r,s._pf=i(),nt(s).utc()},ht.unix=function(e){return ht(1e3*e)},ht.duration=function(e,t){var i,n,a,r=e,s=null;if(ht.isDuration(e))r={ms:e._milliseconds,d:e._days,M:e._months};else if("number"==typeof e)if(r={},t)r[t]=e;else r.milliseconds=e;else if(s=Tt.exec(e))i="-"===s[1]?-1:1,r={y:0,d:x(s[vt])*i,h:x(s[yt])*i,m:x(s[_t])*i,s:x(s[xt])*i,ms:x(s[Mt])*i};else if(s=Dt.exec(e))i="-"===s[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},r={y:a(s[2]),M:a(s[3]),d:a(s[4]),h:a(s[5]),m:a(s[6]),s:a(s[7]),w:a(s[8])};if(n=new l(r),ht.isDuration(e)&&e.hasOwnProperty("_lang"))n._lang=e._lang;return n},ht.version=ft,ht.defaultFormat=Ut,ht.ISO_8601=function(){},ht.momentProperties=wt,ht.updateOffset=function(){},ht.relativeTimeThreshold=function(t,i){if(ti[t]===e)return!1;else return ti[t]=i,!0},ht.lang=function(e,t){var i;if(!e)return ht.fn._lang._abbr;if(t)k(D(e),t);else if(null===t)P(e),e="en";else if(!bt[e])S(e);return i=ht.duration.fn._lang=ht.fn._lang=S(e),i._abbr},ht.langData=function(e){if(e&&e._lang&&e._lang._abbr)e=e._lang._abbr;return S(e)},ht.isMoment=function(e){return e instanceof o||null!=e&&e.hasOwnProperty("_isAMomentObject")},ht.isDuration=function(e){return e instanceof l},ct=ri.length-1;ct>=0;--ct)_(ri[ct]);ht.normalizeUnits=function(e){return v(e)},ht.invalid=function(e){var t=ht.utc(0/0);if(null!=e)d(t._pf,e);else t._pf.userInvalidated=!0;return t},ht.parseZone=function(){return ht.apply(null,arguments).parseZone()},ht.parseTwoDigitYear=function(e){return x(e)+(x(e)>68?1900:2e3)},d(ht.fn=o.prototype,{clone:function(){return ht(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=ht(this).utc();if(0<e.year()&&e.year()<=9999)return N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");else return N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return T(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&g(this._a,(this._isUTC?ht.utc(this._a):ht(this._a)).toArray())>0;else return!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=N(this,e||ht.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;if("string"==typeof e&&"string"==typeof t)i=ht.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e);else if("string"==typeof e)i=ht.duration(+t,e);else i=ht.duration(e,t);return f(this,i,1),this},subtract:function(e,t){var i;if("string"==typeof e&&"string"==typeof t)i=ht.duration(isNaN(+t)?+e:+t,isNaN(+t)?t:e);else if("string"==typeof e)i=ht.duration(+t,e);else i=ht.duration(e,t);return f(this,i,-1),this},diff:function(e,t,i){var n,a,r=Y(e,this),s=6e4*(this.zone()-r.zone());if(t=v(t),"year"===t||"month"===t){if(n=432e5*(this.daysInMonth()+r.daysInMonth()),a=12*(this.year()-r.year())+(this.month()-r.month()),a+=(this-ht(this).startOf("month")-(r-ht(r).startOf("month")))/n,a-=6e4*(this.zone()-ht(this).startOf("month").zone()-(r.zone()-ht(r).startOf("month").zone()))/n,"year"===t)a/=12}else n=this-r,a="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-s)/864e5:"week"===t?(n-s)/6048e5:n;return i?a:h(a)},from:function(e,t){return ht.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(ht(),e)},calendar:function(e){var t=e||ht(),i=Y(t,this).startOf("day"),n=this.diff(i,"days",!0),a=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.lang().calendar(a,this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=e)return e=Q(e,this.lang()),this.add({d:e-t});else return t},month:lt("Month",!0),startOf:function(e){switch(e=v(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===e)this.weekday(0);else if("isoWeek"===e)this.isoWeekday(1);if("quarter"===e)this.month(3*Math.floor(this.month()/3));return this},endOf:function(e){return e=v(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+ht(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+ht(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+Y(e,this).startOf(t)},min:n("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=ht.apply(null,arguments),this>e?this:e}),max:n("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=ht.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i=this._offset||0;if(null!=e){if("string"==typeof e)e=j(e);if(Math.abs(e)<16)e=60*e;if(this._offset=e,this._isUTC=!0,i!==e)if(!t||this._changeInProgress)f(this,ht.duration(i-e,"m"),1,!1);else if(!this._changeInProgress)this._changeInProgress=!0,ht.updateOffset(this,!0),this._changeInProgress=null}else return this._isUTC?i:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm)this.zone(this._tzm);else if("string"==typeof this._i)this.zone(this._i);return this},hasAlignedHourOffset:function(e){if(!e)e=0;else e=ht(e).zone();return(this.zone()-e)%60===0},daysInMonth:function(){return M(this.year(),this.month())},dayOfYear:function(e){var t=pt((ht(this).startOf("day")-ht(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=tt(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=tt(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=tt(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return b(this.year(),1,4)},weeksInYear:function(){var e=this._lang._week;return b(this.year(),e.dow,e.doy)},get:function(e){return e=v(e),this[e]()},set:function(e,t){if(e=v(e),"function"==typeof this[e])this[e](t);return this},lang:function(t){if(t===e)return this._lang;else return this._lang=S(t),this}}),ht.fn.millisecond=ht.fn.milliseconds=lt("Milliseconds",!1),ht.fn.second=ht.fn.seconds=lt("Seconds",!1),ht.fn.minute=ht.fn.minutes=lt("Minutes",!1),ht.fn.hour=ht.fn.hours=lt("Hours",!0),ht.fn.date=lt("Date",!0),ht.fn.dates=n("dates accessor is deprecated. Use date instead.",lt("Date",!0)),ht.fn.year=lt("FullYear",!0),ht.fn.years=n("years accessor is deprecated. Use year instead.",lt("FullYear",!0)),ht.fn.days=ht.fn.day,ht.fn.months=ht.fn.month,ht.fn.weeks=ht.fn.week,ht.fn.isoWeeks=ht.fn.isoWeek,ht.fn.quarters=ht.fn.quarter,ht.fn.toJSON=ht.fn.toISOString,d(ht.duration.fn=l.prototype,{_bubble:function(){var e,t,i,n,a=this._milliseconds,r=this._days,s=this._months,o=this._data;o.milliseconds=a%1e3,e=h(a/1e3),o.seconds=e%60,t=h(e/60),o.minutes=t%60,i=h(t/60),o.hours=i%24,r+=h(i/24),o.days=r%30,s+=h(r/30),o.months=s%12,n=h(s/12),o.years=n},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12)},humanize:function(e){var t=+this,i=et(t,!e,this.lang());if(e)i=this.lang().pastFuture(t,i);return this.lang().postformat(i)},add:function(e,t){var i=ht.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=ht.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=v(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=v(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:ht.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),a=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";else return(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||a||r?"T":"")+(n?n+"H":"")+(a?a+"M":"")+(r?r+"S":"")}});for(ct in Zt)if(Zt.hasOwnProperty(ct))ut(ct,Zt[ct]),dt(ct.toLowerCase());if(ut("Weeks",6048e5),ht.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ht.lang("en",{ordinal:function(e){var t=e%10,i=1===x(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),Lt)module.exports=ht}).call(this)}),define("moment",["moment/moment"],function(e){return e}),define("esui/lib/date",["require","moment"],function(require){var e=require("moment"),t={};return t.dateFormats=["YYYYMMDDHHmmss","YYYY-MM-DD HH:mm:ss","YYYY/MM/DD HH:mm:ss","YYYY-MM-DDTHH:mm:ss.SSSZ"],t.format=function(t,i){return e(t).format(i)},t.parse=function(i,n){var a=e(i,n||t.dateFormats);return a.toDate()},{date:t}}),define("esui/lib/page",["require"],function(){var e=document.documentElement,t=document.body,i="BackCompat"===document.compatMode?t:e,n={};return n.getWidth=function(){return Math.max(e?e.scrollWidth:0,t?t.scrollWidth:0,i?i.clientWidth:0,0)},n.getHeight=function(){return Math.max(e?e.scrollHeight:0,t?t.scrollHeight:0,i?i.clientHeight:0,0)},n.getViewWidth=function(){return i?i.clientWidth:0},n.getViewHeight=function(){return i?i.clientHeight:0},n.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},n.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},n.getClientTop=function(){return document.documentElement.clientTop||document.body.clientTop||0},n.getClientLeft=function(){return document.documentElement.clientLeft||document.body.clientLeft||0},{page:n}}),define("esui/lib/event",["require","./dom","./page"],function(require){var e=require("./dom"),t=require("./page").page,i={};return i.preventDefault=function(e){if(e=e||window.event,e.preventDefault)e.preventDefault();else e.returnValue=!1},i.stopPropagation=function(e){if(e=e||window.event,e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0},i.getMousePosition=function(e){if(e=e||window.event,"number"!=typeof e.pageX)e.pageX=e.clientX+t.getScrollLeft()-t.getClientLeft();if("number"!=typeof e.pageY)e.pageY=e.clientY+t.getScrollTop()-t.getClientTop();return e},i.getTarget=function(e){return e=e||window.event,e.target||e.srcElement},{on:function(t,i,n){if(t=e.g(t),t.addEventListener)t.addEventListener(i,n,!1);else if(t.attachEvent)t.attachEvent("on"+i,n)},un:function(t,i,n){if(t=e.g(t),t.addEventListener)t.removeEventListener(i,n,!1);else if(t.attachEvent)t.detachEvent("on"+i,n)},event:i}}),define("esui/lib/lang",["require","underscore"],function(require){var e=require("underscore"),t={},i=8785925;return t.getGUID=function(e){return e=e||"esui",e+i++},t.inherits=function(e,t){var i=function(){};i.prototype=t.prototype;var n=e.prototype,a=e.prototype=new i;for(var r in n)a[r]=n[r];return e.prototype.constructor=e,e.superClass=t.prototype,e},t.clone=function(i){if(!i||"object"!=typeof i)return i;var n=i;if(e.isArray(i))n=e.clone(i);else if("[object Object]"==={}.toString.call(i)&&"isPrototypeOf"in i){n={};for(var a in i)if(i.hasOwnProperty(a))n[a]=t.deepClone(i[a])}return n},t.deepClone=t.clone,t.toDictionary=function(t){var i={};return e.each(t,function(e){i[e]=!0}),i},t.isArray=e.isArray,t.toArray=e.toArray,t.extend=e.extend,t.bind=e.bind,t.curry=e.partial,t.indexOf=e.indexOf,t.decodeHTML=e.unescape,t.encodeHTML=e.escape,t}),define("esui/lib",["require","underscore","./lib/attribute","./lib/class","./lib/date","./lib/dom","./lib/event","./lib/lang","./lib/page","./lib/string"],function(require){var e={},t=require("underscore");if(/msie (\d+\.\d+)/i.test(navigator.userAgent))e.ie=document.documentMode||+RegExp.$1;return t.extend(e,require("./lib/attribute"),require("./lib/class"),require("./lib/date"),require("./lib/dom"),require("./lib/event"),require("./lib/lang"),require("./lib/page"),require("./lib/string")),e}),define("esui/ControlCollection",["require","underscore"],function(require){function e(){this.length=0}var t=require("underscore");return e.prototype.splice=Array.prototype.splice,e.prototype.add=function(e){var i=t.indexOf(this,e);if(0>i)[].push.call(this,e)},e.prototype.remove=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return void[].splice.call(this,t,1)},e.prototype.each=function(e,i){t.each(this,function(t,n){e.call(i||t,t,n,this)})},e.prototype.invoke=function(){var e=[this];return e.push.apply(e,arguments),t.invoke.apply(t,e)},t.each(["enable","disable","setDisabled","show","hide","toggle","addChild","removeChild","set","setProperties","addState","removeState","toggleState","on","off","fire","dispose","destroy","setViewContext","render","repaint","appendTo","insertBefore"],function(t){e.prototype[t]=function(){var e=[t];e.push.apply(e,arguments);var i=this.invoke.apply(this,e);return i&&i[0]}}),t.each(["isDisabled","isHidden","hasState","get","getCategory","getChild","getChildSafely"],function(t){e.prototype[t]=function(){var e=this[0];return e?e[t].apply(e,arguments):void 0}}),e}),define("esui/SafeWrapper",["require","underscore"],function(require){function e(){}var t=require("underscore");return t.each(["enable","disable","setDisabled","show","hide","toggle","setValue","setRawValue","addChild","removeChild","set","addState","removeState","toggleState","on","off","fire","dispose","destroy","initOptions","createMain","initStructure","setViewContext","render","repaint","appendTo","insertBefore","initChildren","disposeChildren"],function(t){e.prototype[t]=function(){}}),t.each(["isDisabled","isHidden","hasState","isPropertyChanged"],function(t){e.prototype[t]=function(){return!1}}),t.each(["getRawValue","getChild","get"],function(t){e.prototype[t]=function(){return null}}),t.each(["getValue"],function(t){e.prototype[t]=function(){return""}}),t.each(["setProperties"],function(t){e.prototype[t]=function(){return{}}}),e.prototype.getCategory=function(){return"control"},e.prototype.getChildSafely=function(t){var i=new e;if(i.childName=t,i.parent=this,this.viewContext)i.viewContext=this.viewContext;return i},e}),define("esui/ViewContext",["require","./ControlCollection","./lib","./SafeWrapper"],function(require){function e(e){s.apply(this,arguments),this.name=e}function t(e,t){s.prototype.add.call(t,e)}function i(e,t){s.prototype.remove.call(t,e)}function n(e){var t=e.get("group");return t?t.split(/[\t\r\n ]/):[]}function a(){return"vt"+o++}function r(e){if(this.controls={},this.groups={},e=e||a(),l.hasOwnProperty(e)){for(var t=1,i=e+"-";l.hasOwnProperty(i+t);)t++;e=i+t}this.id=e,l[this.id]=this}var s=require("./ControlCollection");require("./lib").inherits(e,s),e.prototype.add=void 0,e.prototype.remove=void 0,e.prototype.disposeGroup=function(){for(var e=0;e<this.length;e++)delete this[e];this.length=0};var o=8587523,l={};r.get=function(e){return l[e]||null},r.prototype.add=function(e){var i=this.controls[e.id];if(i){if(i===e)return;i.setViewContext(null)}this.controls[e.id]=e;for(var a=n(e),r=0;r<a.length;r++){var s=a[r];if(s){var o=this.getGroup(s);t(e,o)}else;}e.setViewContext(this)},r.prototype.remove=function(e){delete this.controls[e.id];for(var t=n(e),a=0;a<t.length;a++){var r=t[a];if(r){var s=this.getGroup(r);i(e,s)}else;}e.setViewContext(null)},r.prototype.get=function(e){return this.controls[e]},r.prototype.getControls=function(){return require("./lib").extend({},this.controls)};var d=require("./SafeWrapper");return r.prototype.getSafely=function(e){var t=this.get(e);if(!t)t=new d,t.id=e,t.viewContext=this;return t},r.prototype.getGroup=function(t){if(!t)throw new Error("name is unspecified");var i=this.groups[t];if(!i)i=this.groups[t]=new e(t);return i},r.prototype.clean=function(){for(var e in this.controls)if(this.controls.hasOwnProperty(e)){var t=this.controls[e];if(t.dispose(),t.viewContext&&t.viewContext===this)this.remove(t)}for(var i in this.groups)if(this.groups.hasOwnProperty(i))this.groups[i].disposeGroup(),this.groups[i]=void 0},r.prototype.dispose=function(){this.clean(),delete l[this.id]},r}),define("esui/main",["require","./lib","./ViewContext","./ControlCollection"],function(require){function e(e,t){if("function"==typeof e){var i=e.prototype.type;if(i in t)throw new Error(i+" is exists!");t[i]=e}}function t(e,t,i){var n=i[e];if(n)return delete t.type,new n(t);else return null}var i=require("./lib"),n={};n.version="3.1.0-beta.3";var a=require("./ViewContext"),r=new a("default");n.getViewContext=function(){return r};var s={uiPrefix:"data-ui",extensionPrefix:"data-ui-extension",customElementPrefix:"esui",instanceAttr:"data-ctrl-id",viewContextAttr:"data-ctrl-view-context",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state",inheritFont:!0};n.config=function(e){i.extend(s,e)},n.getConfig=function(e){return s[e]},n.parseAttribute=function(e,t){if(!e)return{};for(var n={},a=0,r=0;r<e.length;){for(;r<e.length&&":"!==e.charAt(r);)r++;if(r>=e.length)break;var s=i.trim(e.slice(a,r));for(r++,a=r;r<e.length&&";"!==e.charAt(r);)r++;for(var o=r+1;o<e.length;){var l=e.charAt(o);if(";"===l)r=o;if(":"===l)break;o++}var d=i.trim(e.slice(a,r));n[s]=t?t(d):d,r++,a=r}return n},n.getControlByDOM=function(e){if(!e)return null;var t,i=n.getConfig,r=e.getAttribute(i("instanceAttr")),s=e.getAttribute(i("viewContextAttr"));if(r&&s&&(t=a.get(s)))return t.get(r);else return null};var o={};n.register=function(t){e(t,o)},n.create=function(e,i){return t(e,i,o)},n.get=function(e){return r.get(e)},n.getSafely=function(e){return r.getSafely(e)};var l=require("./ControlCollection");n.wrap=function(){for(var e=new l,t=0;t<arguments.length;t++)e.add(arguments[t]);return e},n.init=function(e,t){function i(e){function t(e){return e.toUpperCase()}for(var i=1,n=e.length;n>i;i++)e[i]=e[i].replace(/^[a-z]/,t);return e.join("")}function a(e,t){for(var i in t)if(!(i in e))e[i]=t[i]}function r(e,t,r){if(0===t.length)a(e,n.parseAttribute(r,o));else e[i(t)]=o(r)}e=e||document.body,t=t||{};for(var o=t.valueReplacer||function(e){return e},l=e.getElementsByTagName("*"),d=[],u=0,h=l.length;h>u;u++)if(1===l[u].nodeType)d.push(l[u]);for(var c=n.getConfig("uiPrefix"),f=n.getConfig("extensionPrefix"),p=n.getConfig("customElementPrefix"),m=c.length,g=f.length,v=t.properties||{},y=[],u=0,h=d.length;h>u;u++){var _=d[u];if(!_.getAttribute(s.instanceAttr)){for(var x=_.attributes,M={},b={},w=0,L=x.length;L>w;w++){var C=x[w],T=C.name,D=C.value;if(0===T.indexOf(f)){var Y=T.slice(g+1).split("-"),k=Y[0];Y.shift();var P=b[k];if(!P)P=b[k]={};r(P,Y,D)}else if(0===T.indexOf(c)){var Y=T.length===m?[]:T.slice(m+1).split("-");r(M,Y,D)}}var S=M.type;if(!S){var I=_.nodeName.toLowerCase(),E=I.indexOf(p);if(0===E){var N;N=I.replace(/-(\S)/g,function(e,t){return t.toUpperCase()}),N=N.slice(p.length),M.type=N,S=N}}if(S){var O=M.id,H=O?v[O]:{};for(var j in H)M[j]=o(H[j]);var V=M.extensions||[];M.extensions=V;for(var j in b){var P=b[j],$=n.createExtension(P.type,P);$&&V.push($)}M.viewContext=t.viewContext,M.renderOptions=t,M.main=_;var A=n.create(S,M);if(A){if(y.push(A),t.parent)t.parent.addChild(A);try{A.render()}catch(F){var R=new Error('Render control "'+(A.id||"anonymous")+'" of type '+A.type+" failed because: "+F.message);throw R.actualError=F,R}}}}else;}return y};var d={};n.registerExtension=function(t){e(t,d)},n.createExtension=function(e,i){return t(e,i,d)};var u={};n.attachExtension=function(e,t){u[e]=t},n.createGlobalExtensions=function(){var e=[];for(type in u)if(u.hasOwnProperty(type)){var t=n.createExtension(type,u[type]);t&&e.push(t)}return e};var h=[];return n.registerRule=function(e,t){h.push({type:e,priority:t}),h.sort(function(e,t){return e.priority-t.priority})},n.createRulesByControl=function(e){for(var t=[],i=0;i<h.length;i++){var n=h[i].type;if(null!=e.get(n.prototype.type))t.push(new n)}return t},n}),define("esui",["esui/main"],function(e){return e}),define("esui/helper/children",["require","underscore","../main"],function(require){var e=require("underscore"),t=require("../main"),i={};return i.initChildren=function(i,n){i=i||this.control.main,n=e.extend({},this.control.renderOptions,n),n.viewContext=this.control.viewContext,n.parent=this.control,t.init(i,n)},i.disposeChildren=function(){var t=this.control.children.slice();e.each(t,function(e){e.dispose()}),this.children=[],this.childrenIndex={}},i.disableChildren=function(){e.each(this.control.children,function(e){e.disable()})},i.enableChildren=function(){e.each(this.control.children,function(e){e.enable()})},i}),define("esui/helper/dom",["require","underscore","../lib","../main"],function(require){function e(e){var t=e.styleType||e.type;return t.toLowerCase()}function t(){return[].slice.call(arguments,0).join("-")}var i=require("underscore"),n=require("../lib"),a=require("../main"),r="uiClassPrefix",s={};s.getPartClasses=function(i){if(i&&this.partClassCache&&this.partClassCache.hasOwnProperty(i))return this.partClassCache[i].slice();var n=e(this.control),s=this.control.skin,o=a.getConfig(r),l=a.getConfig("skinClassPrefix"),d=[];if(i){if(d.push(t(o,n,i)),s)d.push(t(l,s,n,i));if(!this.partClassCache)this.partClassCache={},this.partClassCache[i]=d.slice()}else if(d.push(t(o,"ctrl")),d.push(t(o,n)),s)d.push(t(l,s),t(l,s,n));return d},s.getPartClassName=function(e){return this.getPartClasses(e).join(" ")},s.getPrimaryClassName=function(i){var n=e(this.control);if(i)return t(a.getConfig(r),n,i);else return t(a.getConfig(r),n)},s.getPrefixClass=function(e){var i=a.getConfig(r);return t(i,e)},s.getIconClass=function(e){var i="icon";if(e)return t(a.getConfig(r),i,e);else return t(a.getConfig(r),i)},s.addPartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.addClasses(t,this.getPartClasses(e))},s.removePartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.removeClasses(t,this.getPartClasses(e))},s.getStateClasses=function(i){if(this.stateClassCache&&this.stateClassCache.hasOwnProperty(i))return this.stateClassCache[i].slice();var n=e(this.control),s=a.getConfig,o=[t(s(r),n,i),t(s("stateClassPrefix"),i)],l=this.control.skin;if(l){var d=s("skinClassPrefix");o.push(t(d,l,i),t(d,l,n,i))}if(!this.stateClassCache)this.stateClassCache={},this.stateClassCache[i]=o.slice();return o},s.addStateClasses=function(e){var t=this.control.main;if(t)n.addClasses(t,this.getStateClasses(e))
},s.removeStateClasses=function(e){var t=this.control.main;if(t)n.removeClasses(t,this.getStateClasses(e))},s.addVariantClasses=function(){var e=this,t=e.control.main,a=e.control.variants,r=[];if(i.each(a,function(t){r.push(e.getPrimaryClassName(t))}),t)n.addClasses(t,r)},s.getId=function(e){if(e=e?"-"+e:"",!this.control.domIDPrefix)this.control.domIDPrefix=this.control.viewContext&&this.control.viewContext.id;var t=this.control.domIDPrefix?this.control.domIDPrefix+"-":"";return"ctrl-"+t+this.control.id+e},s.createPart=function(e,t){t=t||"div";var i=document.createElement(t);return i.id=this.getId(e),this.addPartClasses(e,i),i},s.getPart=function(e){return n.g(this.getId(e))},s.isPart=function(e,t){var i=this.getPartClasses(t)[0];return n.hasClass(e,i)};var o={type:!0,name:!0,alt:!0,autocomplete:!0,autofocus:!0,checked:!0,dirname:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,width:!0,height:!0,inputmode:!0,list:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,pattern:!0,placeholder:!0,readonly:!0,required:!0,size:!0,src:!0,step:!0,value:!0};s.replaceMain=function(e){e=e||this.control.createMain();var t=this.control.main;t.setAttribute(a.getConfig("instanceAttr"),n.getGUID());for(var i=t.attributes,r=0;r<i.length;r++){var s=i[r],l=s.name;if(n.hasAttribute(t,l)&&!o.hasOwnProperty(l))if(n.setAttribute(e,l,s.value),0===l.indexOf(a.getConfig("uiPrefix")))t.removeAttribute(l),r--}return n.insertBefore(e,t),t.parentNode.removeChild(t),this.control.main=e,t};var l={name:{name:"name"},maxlength:{name:"maxLength",type:"number"},required:{name:"required",type:"boolean"},pattern:{name:"pattern"},min:{name:"min",type:"number"},max:{name:"max",type:"number"},autofocus:{name:"autoFocus",type:"boolean"},disabled:{name:"disabled",type:"boolean"},readonly:{name:"readOnly",type:"boolean"}};return s.extractOptionsFromInput=function(e,t){var a={};if(i.each(l,function(t,i){var r=n.hasAttribute(e,i);if(r){var s=n.getAttribute(e,i);switch(t.type){case"boolean":s=r;break;case"number":s=parseInt(s,10)}a[t.name]=s}}),n.hasAttribute(e,"value")||"select"!==e.nodeName.toLowerCase()&&e.value)a.value=e.value;return i.defaults(t||{},a)},s}),define("mini-event/lib",["require"],function(){var e={};return e.extend=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i){for(var n in i)if(i.hasOwnProperty(n))e[n]=i[n]}else;}return e},e}),define("mini-event/EventQueue",["require","./lib"],function(require){function e(e,t,i){return e&&e.handler===t&&e.thisObject==i}function t(){this.queue=[]}var i=require("./lib");return t.prototype.add=function(t,n){if(t!==!1&&"function"!=typeof t)throw new Error("event handler must be a function or const false");var a={handler:t};i.extend(a,n);for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(e(s,t,a.thisObject))return}this.queue.push(a)},t.prototype.remove=function(t,i){if(!t)return void this.clear();for(var n=0;n<this.queue.length;n++){var a=this.queue[n];if(e(a,t,i))return void(this.queue[n]=null)}},t.prototype.clear=function(){this.queue.length=0},t.prototype.execute=function(e,t){for(var i=this.queue,n=0;n<i.length;n++){if("function"==typeof e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return;var a=i[n];if(a){var r=a.handler;if(r===!1){if("function"==typeof e.preventDefault)e.preventDefault();if("function"==typeof e.stopPropagation)e.stopPropagation()}else r.call(a.thisObject||t,e);if(a.once)this.remove(a.handler,a.thisObject)}else;}},t.prototype.getLength=function(){for(var e=0,t=0;t<this.queue.length;t++)if(this.queue[t])e++;return e},t.prototype.length=t.prototype.getLength,t.prototype.dispose=function(){this.clear(),this.queue=null},t}),define("mini-event/Event",["require","./lib"],function(require){function e(){return!0}function t(){return!1}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e,t){if("object"==typeof e)t=e,e=t.type;if(i(t))a.extend(this,t);else if(t)this.data=t;if(e)this.type=e}var a=require("./lib");n.prototype.isDefaultPrevented=t,n.prototype.preventDefault=function(){this.isDefaultPrevented=e},n.prototype.isPropagationStopped=t,n.prototype.stopPropagation=function(){this.isPropagationStopped=e},n.prototype.isImmediatePropagationStopped=t,n.prototype.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=e,this.stopPropagation()};var r=function(){return this}();n.fromDOMEvent=function(e,t,i){e=e||r.event;var a=new n(t,i);return a.preventDefault=function(){if(e.preventDefault)e.preventDefault();else e.returnValue=!1;n.prototype.preventDefault.call(this)},a.stopPropagation=function(){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=!0;n.prototype.stopPropagation.call(this)},a.stopImmediatePropagation=function(){if(e.stopImmediatePropagation)e.stopImmediatePropagation();n.prototype.stopImmediatePropagation.call(this)},a};var s={type:!0,target:!0,preventDefault:!0,isDefaultPrevented:!0,stopPropagation:!0,isPropagationStopped:!0,stopImmediatePropagation:!0,isImmediatePropagationStopped:!0};return n.fromEvent=function(e,t){var i={type:e.type,preserveData:!1,syncState:!1};t=a.extend(i,t);var r=new n(t.type);if(t.preserveData)for(var o in e)if(e.hasOwnProperty(o)&&!s.hasOwnProperty(o))r[o]=e[o];if(t.extend)a.extend(r,t.extend);if(t.syncState)r.preventDefault=function(){e.preventDefault(),n.prototype.preventDefault.call(this)},r.stopPropagation=function(){e.stopPropagation(),n.prototype.stopPropagation.call(this)},r.stopImmediatePropagation=function(){e.stopImmediatePropagation(),n.prototype.stopImmediatePropagation.call(this)};return r},n.delegate=function(e,t,i,r,s){var o="string"==typeof t,l={object:e,type:o?t:i},d={object:o?i:t,type:o?r:i},u=o?s:r;if(u=a.extend({preserveData:!1},u),"function"==typeof l.object.on&&"function"==typeof d.object.on&&"function"==typeof d.object.fire){var h=function(e){var t=n.fromEvent(e,u);t.type=d.type,t.target=d.object,d.object.fire(d.type,t)};l.object.on(l.type,h)}},n}),define("mini-event/main",["require","./Event"],function(require){var e=require("./Event");return{version:"1.0.2",Event:e,fromDOMEvent:e.fromDOMEvent,fromEvent:e.fromEvent,delegate:e.delegate}}),define("mini-event",["mini-event/main"],function(e){return e}),define("esui/helper/event",["require","underscore","mini-event/EventQueue","../lib","mini-event"],function(require){function e(e){if(e===window)return o.window;if(e===document)return o.document;if(e===document.documentElement)return o.documentElement;if(e===document.body)return o.body;else return null}function t(t,i){var n=e(t);if(n){var a=n[i.type];if(a)l.each(a,function(e){if(e)r(e,t,i)})}}function i(e,t){t=t||150;var i=0;return function(n){clearTimeout(i);var a=this;n=n||window.event,n={type:n.type,srcElement:n.srcElement,target:n.target,currentTarget:n.currentTarget},i=setTimeout(function(){e.call(a,n)},t)}}function n(n,a,r){var s=e(r);if(!s)return!1;var o=s[a];if(!o){o=s[a]=[];var d=l.partial(t,r);if("resize"===a||"scroll"===a)d=i(d);o.handler=d,u.on(r,a,o.handler)}if(!(l.indexOf(o,n)>=0))return o.push(n),!0}function a(t,i,n){var a=e(n);if(!a)return!1;if(!a[i])return!0;for(var r=a[i],s=0;s<r.length;s++)if(r[s]===t){r[s]=null;break}var o=l.all(r,function(e){return null==e});if(o){var d=r.handler;u.un(n,i,d),a[i]=null}return!0}function r(e,t,i){i=i||window.event;var n=l.any(e.ignoreStates,function(t){return e.hasState(t)});if(!n){if(!i.target)i.target=i.srcElement;if(!i.currentTarget)i.currentTarget=t;if(!i.preventDefault)i.preventDefault=function(){i.returnValue=!1};if(!i.stopPropagation)i.stopPropagation=function(){i.cancelBubble=!0};var a=e.domEvents[i.currentTarget[s]][i.type];if(a)a.execute(i,e)}}var s="_esuiDOMEvent",o={window:{},document:{},documentElement:{},body:{}},l=require("underscore"),d=require("mini-event/EventQueue"),u=require("../lib"),h={};return h.addDOMEvent=function(e,t,i){if("string"==typeof e)e=this.getPart(e);if(!this.control.domEvents)this.control.domEvents={};var a=e[s];if(!a)a=e[s]=u.getGUID();var o=this.control.domEvents[a];if(!o)o=this.control.domEvents[a]={element:e};var h=n(this.control,t,e),c=o[t];if(!c)if(c=o[t]=new d,!h)c.handler=l.partial(r,this.control,e),u.on(e,t,c.handler);c.add(i)},h.delegateDOMEvent=function(e,t,i){var n=function(e){var t=require("mini-event").fromDOMEvent(e);if(this.fire(i||e.type,t),t.isDefaultPrevented())u.event.preventDefault(e);if(t.isPropagationStopped())u.event.stopPropagation(e)};this.addDOMEvent(e,t,n)},h.removeDOMEvent=function(e,t,i){if("string"==typeof e)e=this.getPart(e);if(this.control.domEvents){var n=e[s],r=this.control.domEvents[n];if(r&&r[t])if(!i)r[t].clear();else{var o=r[t];if(o.remove(i),!o.getLength())a(this.control,t,e)}}},h.clearDOMEvents=function(e){if("string"==typeof e)e=this.getPart(e);if(this.control.domEvents){if(!e)return l.each(l.pluck(this.control.domEvents,"element"),this.clearDOMEvents,this),void(this.control.domEvents=null);var t=e[s],i=this.control.domEvents[t];delete i.element,l.each(i,function(t,i){var n=a(this.control,i,e);if(!n){var r=t.handler;t.dispose(),t.handler=null,u.un(e,i,r)}},this),delete this.control.domEvents[t]}},h}),define("esui/helper/html",["require"],function(){var e={},t={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};return e.getPartBeginTag=function(e,t){var i="<"+t+' id="'+this.getId(e)+'" class="'+this.getPartClassName(e)+'">';return i},e.getPartEndTag=function(e,i){var n=t.hasOwnProperty(i)?" />":"</"+i+">";return n},e.getPartHTML=function(e,t){return this.getPartBeginTag(e,t)+this.getPartEndTag(e,t)},e}),define("esui/helper/life",["require","underscore","../main"],function(require){var e={NEW:0,INITED:1,RENDERED:2,DISPOSED:4},t=require("underscore"),i=require("../main"),n={};return n.initViewContext=function(){var e=this.control.viewContext||i.getViewContext();this.control.viewContext=null,this.control.setViewContext(e)},n.initExtensions=function(){var e=this.control.extensions;if(!t.isArray(e))e=this.control.extensions=[];Array.prototype.push.apply(e,i.createGlobalExtensions());for(var n={},a=0;a<e.length;a++){var r=e[a];if(!n[r.type])r.attachTo(this.control),n[r.type]=!0}},n.isInStage=function(t){if(null==e[t])throw new Error("Invalid life cycle stage: "+t);return this.control.stage===e[t]},n.changeStage=function(t){if(null==e[t])throw new Error("Invalid life cycle stage: "+t);this.control.stage=e[t]},n.dispose=function(){if(this.control.disposeChildren(),this.control.children=null,this.control.childrenIndex=null,this.clearDOMEvents(),t.invoke(this.control.extensions,"dispose"),this.control.extensions=null,this.control.parent)this.control.parent.removeChild(this.control);if(this.control.viewContext)this.control.viewContext.remove(this.control);this.control.renderOptions=null},n.beforeDispose=function(){this.control.fire("beforedispose")},n.afterDispose=function(){this.changeStage("DISPOSED"),this.control.fire("afterdispose"),this.control.destroyEvents()},n}),define("esui/helper/template",["require","underscore"],function(require){var e=require("underscore"),t={id:function(e,t){return t.helper.getId(e)},"class":function(e,t){return t.helper.getPartClassName(e)},part:function(e,t,i){return i.helper.getPartHTML(e,t)}},i={};return i.setTemplateEngine=function(e){if(this.templateEngine=e,!e.esui)this.initializeTemplateEngineExtension()},i.initializeTemplateEngineExtension=function(){e.each(t,function(e,t){this.addFilter(t,e)},this.templateEngine)},i.renderTemplate=function(e,i){var n=this;i=i||{};var a={get:function(e){if("instance"===e)return n.control;if("function"==typeof i.get)return i.get(e);var a=e,r=null,s=e.lastIndexOf(".");if(s>0){a=e.substring(0,s);var o=e.substring(s+1);if(o&&t.hasOwnProperty(o))r=t[o]}var l=i.hasOwnProperty(a)?i[a]:a;if(r)l=r(l,n.control);return l}};if(!this.templateEngine)throw new Error("No template engine attached to this control");return this.templateEngine.render(e,a)},i}),define("esui/Helper",["require","underscore","./helper/children","./helper/dom","./helper/event","./helper/html","./helper/life","./helper/template"],function(require){function e(e){this.control=e}var t=require("underscore");return t.extend(e.prototype,require("./helper/children"),require("./helper/dom"),require("./helper/event"),require("./helper/html"),require("./helper/life"),require("./helper/template")),e}),define("mini-event/EventTarget",["require","./lib","./Event","./EventQueue"],function(require){function e(){}var t=require("./lib"),i=require("./Event"),n=require("./EventQueue");return e.prototype.on=function(e,i,a,r){if(!this.miniEventPool)this.miniEventPool={};if(!this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e]=new n;var s=this.miniEventPool[e];if(r=t.extend({},r),a)r.thisObject=a;s.add(i,r)},e.prototype.once=function(e,i,n,a){a=t.extend({},a),a.once=!0,this.on(e,i,n,a)},e.prototype.un=function(e,t,i){if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var n=this.miniEventPool[e];n.remove(t,i)}},e.prototype.fire=function(e,t){if(1===arguments.length&&"object"==typeof e)t=e,e=t.type;if(!e)throw new Error("No event type specified");if("*"===e)throw new Error("Cannot fire global event");var n=t instanceof i?t:new i(e,t);n.target=this;var a=this["on"+e];if("function"==typeof a)a.call(this,n);if(this.miniEventPool&&this.miniEventPool.hasOwnProperty(e)){var r=this.miniEventPool[e];r.execute(n,this)}if(this.miniEventPool&&this.miniEventPool.hasOwnProperty("*")){var s=this.miniEventPool["*"];s.execute(n,this)}return n},e.prototype.destroyEvents=function(){if(this.miniEventPool){for(var e in this.miniEventPool)if(this.miniEventPool.hasOwnProperty(e))this.miniEventPool[e].dispose();this.miniEventPool=null}},e.enable=function(i){i.miniEventPool={},t.extend(i,e.prototype)},e}),define("esui/Control",["require","./lib","underscore","./main","./Helper","./SafeWrapper","mini-event/EventTarget"],function(require){function e(e){if(e=e||{},this.helper=new a(this),this.helper.changeStage("NEW"),this.children=[],this.childrenIndex={},this.currentStates={},this.domEvents={},this.main=e.main?e.main:this.createMain(e),!this.id&&!e.id)this.id=t.getGUID();this.initOptions(e),this.helper.initViewContext(),this.helper.initExtensions(),this.helper.changeStage("INITED"),this.fire("init",{options:e})}var t=require("./lib"),i=require("underscore"),n=require("./main"),a=require("./Helper");e.prototype={constructor:e,ignoreStates:["disabled"],getCategory:function(){return"control"},initOptions:function(e){e=e||{},this.setProperties(e)},createMain:function(){if(!this.type)return document.createElement("div");var e=this.type.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()});return document.createElement(n.getConfig("customElementPrefix")+"-"+e.slice(1))},initStructure:function(){},initEvents:function(){},render:function(){if(this.helper.isInStage("INITED")){if(this.fire("beforerender"),this.domIDPrefix=this.viewContext.id,this.initStructure(),this.initEvents(),!this.main.id)this.main.id=this.helper.getId();if(this.main.setAttribute(n.getConfig("instanceAttr"),this.id),this.main.setAttribute(n.getConfig("viewContextAttr"),this.viewContext.id),this.helper.addPartClasses(),this.states)this.states="string"==typeof this.states?this.states.split(" "):this.states,i.each(this.states,this.addState,this);if(this.variants)this.variants="string"==typeof this.variants?this.variants.split(" "):this.variants,this.helper.addVariantClasses()}if(this.repaint(),this.helper.isInStage("INITED"))this.helper.changeStage("RENDERED"),this.fire("afterrender")},repaint:function(e,t){if(!t||t.hasOwnProperty("disabled")){var i=this.disabled?"addState":"removeState";this[i]("disabled")}if(!t||t.hasOwnProperty("hidden")){var i=this.hidden?"addState":"removeState";this[i]("hidden")}},appendTo:function(t){if(t instanceof e)t=t.main;if(t.appendChild(this.main),this.helper.isInStage("NEW")||this.helper.isInStage("INITED"))this.render()},insertBefore:function(t){if(t instanceof e)t=t.main;if(t.parentNode.insertBefore(this.main,t),this.helper.isInStage("NEW")||this.helper.isInStage("INITED"))this.render()},dispose:function(){if(!this.helper.isInStage("DISPOSED"))this.helper.beforeDispose(),this.helper.dispose(),this.helper.afterDispose()},destroy:function(){var e=this.main;this.dispose(),t.removeNode(e)},get:function(e){var i=this["get"+t.pascalize(e)];if("function"==typeof i)return i.call(this);else return this[e]},set:function(e,i){var n=this["set"+t.pascalize(e)];if("function"==typeof n)return n.call(this,i);var a={};a[e]=i,this.setProperties(a)},isPropertyChanged:function(e,t,i){return i!==t},setProperties:function(e){if(!this.stage){if(e.hasOwnProperty("id"))this.id=e.id;if(e.hasOwnProperty("group"))this.group=e.group;if(e.hasOwnProperty("skin"))this.skin=e.skin}if(delete e.id,delete e.group,delete e.skin,e.hasOwnProperty("viewContext"))this.setViewContext(e.viewContext),delete e.viewContext;if(this.hasOwnProperty("disabled"))this.disabled=!!this.disabled;if(this.hasOwnProperty("hidden"))this.hidden=!!this.hidden;var i=[],n={};for(var a in e)if(e.hasOwnProperty(a)){var r=e[a],s="get"+t.pascalize(a)+"Property",o=this[s]?this[s]():this[a],l=this.isPropertyChanged(a,r,o);if(l){this[a]=r;var d={name:a,oldValue:o,newValue:r};i.push(d),n[a]=d}}if(i.length&&this.helper.isInStage("RENDERED"))this.repaint(i,n);return n},setViewContext:function(e){var t=this.viewContext;if(t!==e){if(t)this.viewContext=null,t.remove(this);this.viewContext=e,e&&e.add(this);var i=this.children;if(i)for(var a=0,r=i.length;r>a;a++)i[a].setViewContext(e);if(this.viewContext&&this.helper.isInStage("RENDERED"))this.main.setAttribute(n.getConfig("viewContextAttr"),this.viewContext.id)}},setDisabled:function(e){this[e?"disable":"enable"]()},disable:function(){this.addState("disabled")},enable:function(){this.removeState("disabled")},isDisabled:function(){return this.hasState("disabled")},show:function(){this.removeState("hidden")},hide:function(){this.addState("hidden")},toggle:function(){this[this.isHidden()?"show":"hide"]()},isHidden:function(){return this.hasState("hidden")},addState:function(e){if(!this.hasState(e)){this.currentStates[e]=!0,this.helper.addStateClasses(e);var t={},i=e.replace(/-(\w)/,function(e,t){return t.toUpperCase()});t[i]=!0,this.setProperties(t)}},removeState:function(e){if(this.hasState(e)){this.currentStates[e]=!1,this.helper.removeStateClasses(e);var t={},i=e.replace(/-(\w)/,function(e,t){return t.toUpperCase()});t[i]=!1,this.setProperties(t)}},toggleState:function(e){var t=this.hasState(e)?"removeState":"addState";this[t](e)},hasState:function(e){return!!this.currentStates[e]},addChild:function(e,t){if(t=t||e.childName,e.parent)e.parent.removeChild(e);if(this.children.push(e),e.parent=this,t)e.childName=t,this.childrenIndex[t]=e;if(this.viewContext!==e.viewContext)e.setViewContext(this.viewContext)},removeChild:function(e){for(var t=this.children,i=t.length;i--;)if(t[i]===e)t.splice(i,1);var n=e.childName;if(n)this.childrenIndex[n]=null;e.parent=null},disposeChildren:function(){for(var e=this.children.slice(),t=0;t<e.length;t++)e[t].dispose();this.children=[],this.childrenIndex={}},getChild:function(e){return this.childrenIndex[e]||null},getChildSafely:function(e){var t=this.getChild(e);if(!t){var i=require("./SafeWrapper");if(t=new i,t.childName=e,t.parent=this,this.viewContext)t.viewContext=this.viewContext}return t},initChildren:function(e,t){this.helper.initChildren(e,t)}};var r=require("mini-event/EventTarget");return t.inherits(e,r),e}),define("esui/painters",["require","underscore","./lib"],function(require){var e=require("underscore"),t=require("./lib"),i={};i.state=function(e){return{name:e,paint:function(e,t){var i=t?"addState":"removeState";e[i](this.name)}}},i.attribute=function(e,t,i){return{name:e,attribute:t||e,value:i,paint:function(e,t){t=null==this.value?t:this.value,e.main.setAttribute(this.attribute,t||"")}}};var n={width:!0,height:!0,top:!0,right:!0,bottom:!0,left:!0,fontSize:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,margin:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,borderWidth:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0};return i.style=function(e,t){return{name:e,property:t||e,paint:function(e,t){if(null!=t){if(n.hasOwnProperty(this.property))t=0===t?"0":t+"px";e.main.style[this.property]=t}}}},i.html=function(e,t,i){return{name:e,element:t||"",generate:i,paint:function(e,t){var i="function"==typeof this.element?this.element(e):this.element?e.helper.getPart(this.element):e.main;if(i){var n="function"==typeof this.generate?this.generate(e,t):t;i.innerHTML=n||""}}}},i.text=function(t,i,n){return{name:t,element:i||"",generate:n,paint:function(t,i){var n="function"==typeof this.element?this.element(t):this.element?t.helper.getPart(this.element):t.main;if(n){var a="function"==typeof this.generate?this.generate(t,i):i;n.innerHTML=e.escape(a||"")}}}},i.delegate=function(e){return{name:e,member:this.member,method:this.method,paint:function(e,t){e[this.member][this.method](t)}}},i.createRepaint=function(){var e=[].concat.apply([],[].slice.call(arguments));return function(i,n){for(var a=t.extend({},n),r=0;r<e.length;r++){var s=e[r];if("function"!=typeof s){var o=[].concat(s.name),l=!i;if(!l)for(var d=0;d<o.length;d++){var u=o[d];if(n.hasOwnProperty(u)){l=!0;break}}if(l){for(var h=[this],d=0;d<o.length;d++){var u=o[d];h.push(this[u]),delete a[u]}try{s.paint.apply(s,h)}catch(c){var f='"'+o.join('", "')+'"',p=new Error("Failed to paint ["+f+'] for control "'+(this.id||"anonymous")+'" of type '+this.type+" because: "+c.message);throw p.actualError=p,p}}else;}else s.apply(this,arguments)}var m=[];for(var g in a)if(a.hasOwnProperty(g))m.push(a[g]);return m}},i}),define("ub-ria-ui/Accordion",["require","underscore","esui/lib","esui/Control","esui/painters","esui/main"],function(require){function e(){l.apply(this,arguments)}function t(e){for(var t=o.getChildren(e.main),n=t.length,a=e.helper,r=0;n>r;r++){var s=t[r];a.addPartClasses("panel",s);var l=e.activeIndex===r;if(l)a.addPartClasses("panel-active",s);i(e,s)}}function i(e,t){var i=e.helper,n=o.dom.first(t);if(n){i.addPartClasses("header",n);var a=o.dom.next(n);if(a)if(i.addPartClasses("content",a),e.fixHeight)a.style.cssText="height: "+parseInt(e.fixHeight,10)+"px;overflow: auto";var r=document.createElement("span");o.addClass(r,i.getPartClassName("header-icon")),o.addClass(r,e.headerIcon),n.appendChild(r)}}function n(e){for(var t=e.target;t&&!this.helper.isPart(t,"header");)t=t.parentNode;if(this.helper.isPart(t,"header")){for(var i=t.parentNode,n=i.parentNode,a=0,s=0;s<n.children.length;s++)if(n.children[s]===i){a=s;break}if(this.collapsible)if(this.helper.isPart(i,"panel-active"))r.call(this),this.activeIndex=-1;else this.set("activeIndex",a);else{if(this.helper.isPart(i,"panel-active"))return;this.set("activeIndex",a)}}}function a(e,t){for(var i=o.getChildren(e.main),n=i.length,a=e.helper,r=e.activeHeaderIcon,s=e.headerIcon,l=0;n>l;l++){var d=i[l],u=o.getChildren(d)[0],h=(o.getChildren(d)[1],o.dom.last(u)),c=l===t;if(methodName=c?"addPartClasses":"removePartClasses",a[methodName]("panel-active",d),o.removeClass(h,r),o.removeClass(h,s),c)o.addClass(h,r);else o.addClass(h,s)}}function r(){var e=o.getChildren(this.main),t=this.helper,i=e[this.activeIndex],n=o.getChildren(i)[1];if(n)t.addPartClasses("content-hidden",n);t.removePartClasses("panel-active",i)}var s=require("underscore"),o=require("esui/lib"),l=require("esui/Control");return e.prototype.type="Accordion",e.prototype.initOptions=function(e){var t={activeIndex:0,hoverable:!1,collapsible:!1,headerIcon:"caret-right",activeHeaderIcon:"caret-down",fixHeight:null};if(t.headerIcon=this.helper.getIconClass(t.headerIcon),t.activeHeaderIcon=this.helper.getIconClass(t.activeHeaderIcon),s.extend(t,e),"string"==typeof t.activeIndex)t.activeIndex=+t.activeIndex;if(t.activeIndex<0||null===t.activeIndex)t.activeIndex=-1;this.setProperties(t)},e.prototype.repaint=require("esui/painters").createRepaint(l.prototype.repaint,{name:"activeIndex",paint:a}),e.prototype.initStructure=function(){t(this)},e.prototype.initEvents=function(){var e=this.hoverable?"mouseover":"click";this.helper.addDOMEvent(this.main,e,n)},e.prototype.getActivePanel=function(){var e=o.getChildren(this.main);return e[this.get("activeIndex")]},o.inherits(e,l),require("esui/main").register(e),e}),define("ub-ria-ui/Alert",["require","underscore","esui/lib","esui/Control","esui/painters","esui"],function(require){function e(){r.apply(this,arguments)}function t(e){var t=e.helper,i=e.getInjectedPartHTML("prev","div",t.getPartHTML("icon-content","span")),n=e.getInjectedPartHTML("next","div",t.getPartHTML("icon-content","span")),r=e.getInjectedPartHTML("index","div",t.getPartHTML("page","strong")+"/"+e.message.length);t.getPart("pager").innerHTML=i+r+n,t.getPart("page").innerHTML=e.pageIndex;var s=t.getIconClass();a.addClass(t.getPart("prev"),s),a.addClass(t.getPart("next"),s),e.bindPagerEvent()}function i(){var e=this.pageIndex;if(e===this.message.length)e=1;else e++;this.setProperties({pageIndex:e})}var n=require("underscore"),a=require("esui/lib"),r=require("esui/Control"),s=["success","info","warning","error"];return n.each(s,function(t){e[t]=function(i){i.msgType=i.msgType||t;var n=new e(i);return n.show(),n}}),e.prototype.type="Alert",e.prototype.initOptions=function(e){var t={msgType:"error",autoClose:!1,closeBtn:!0,pageIndex:1,autoSlide:4e3,icon:""};if(!this.main.parentNode&&n.isEmpty(e.container))throw new Error("Parent is needed if constructed form scripts");if("string"==typeof e.message)e.message=[e.message];t.oriAutoSlide=e.autoSlide,a.extend(t,e),this.setProperties(t)},e.prototype.getInjectedPartHTML=function(e,t,i){return this.helper.getPartBeginTag(e,t)+i+this.helper.getPartEndTag(e,t)},e.prototype.initStructure=function(){var e="",t=this.helper,i=["icon","text","close","pager"];n.each(i,function(i){e+=t.getPartHTML(i,"div")},this),this.main.innerHTML=this.getInjectedPartHTML("container","div",e)},e.prototype.bindPagerEvent=function(){this.helper.addDOMEvent("prev","click",function(){if(this.pageIndex>1)this.setProperties({pageIndex:this.pageIndex-1})}),this.helper.addDOMEvent("next","click",function(){if(this.pageIndex<this.message.length)this.setProperties({pageIndex:this.pageIndex+1})})},e.prototype.injectIcon=function(e,t){var i=this.helper,n=i.getPart("icon"),r=this.main;n.innerHTML=e;var s=i.getPartClassName("has-icon");if(e)a.addClass(r,s),a.addClass(n.firstChild,t);else a.removeClass(r,s)},e.prototype.repaint=require("esui/painters").createRepaint(r.prototype.repaint,{name:"icon",paint:function(e,t){if(!t)return void e.injectIcon("");else return void e.injectIcon(e.helper.getPartHTML("icon-content","span"),t)}},{name:"message",paint:function(e,i){var r="";n.each(i,function(t){r+=e.getInjectedPartHTML("item","span",t)}),e.helper.getPart("text").innerHTML=r;var s=e.helper.getPartClassName("has-pager");if(i.length>1)a.addClass(e.main,s),t(e);else a.removeClass(e.main,s)}},{name:"msgType",paint:function(e){n.each(s,function(t){e.helper.removePartClasses(t)}),e.helper.addPartClasses(e.msgType)}},{name:"pageIndex",paint:function(e,t){var i=e.helper,r=a.getChildren(i.getPart("text")),s=i.getPartClassName("item-active"),o=r[t-1];if(1===e.message.length)return void a.addClass(o,s);var l=n.filter(r,function(e){return a.hasClass(e,s)})[0];if(l)a.removeClass(l,s);if(a.addClass(o,s),i.getPart("page").innerHTML=t,1===t)i.addPartClasses("prev-disabled","prev");else i.removePartClasses("prev-disabled","prev");if(t===e.message.length)i.addPartClasses("next-disabled","next");else i.removePartClasses("next-disabled","next")}},{name:"closeBtn",paint:function(e,t){var i=e.helper;if(!a.trim(t)||"false"===t)return i.getPart("button")&&i.removeDOMEvent("button"),void(i.getPart("close").innerHTML="");else return i.getPart("close").innerHTML=""+e.getInjectedPartHTML("button","div",i.getPartHTML("icon-content","span")),a.addClass(i.getPart("button").firstChild,i.getIconClass()),void i.addDOMEvent("button","click",function(){this.hide()})}},{name:"autoSlide",paint:function(e,t){if(t===!0)t=4e3;if(parseInt(t,10)>0)t=parseInt(t,10);if(clearInterval(e.autoSlideTimer),1!==e.message.length&&a.trim(t)&&"false"!==t)e.autoSlideTimer=setInterval(a.bind(i,e),t)}},{name:"autoClose",paint:function(e,t){if(t===!0)t=4e3;if(parseInt(t,10)>0)t=parseInt(t,10);if(clearTimeout(e.autoCloseTimer),a.trim(t)&&"false"!==t)e.autoCloseTimer=setTimeout(a.bind(e.hide,e),t)}}),e.prototype.show=function(){if(!this.helper.isInStage("DISPOSED"))this.insertBefore(a.g(this.container).firstChild),this.helper.addPartClasses("toggle","container"),r.prototype.show.apply(this,arguments),this.fire("show"),this.helper.addDOMEvent(this.main,"mouseover",a.bind(function(){this.setProperties({autoSlide:!1})},this)),this.helper.addDOMEvent(this.main,"mouseout",a.bind(function(){this.setProperties({autoSlide:this.oriAutoSlide})},this))},e.prototype.hide=function(){r.prototype.hide.apply(this,arguments),clearTimeout(this.autoCloseTimer),clearInterval(this.autoSlideTimer),this.fire("hide"),this.dispose()},e.prototype.dispose=function(){if(clearTimeout(this.autoCloseTimer),clearInterval(this.autoSlideTimer),!this.helper.isInStage("DISPOSED"))a.removeNode(this.main),r.prototype.dispose.apply(this,arguments)},a.inherits(e,r),require("esui").register(e),e}),define("esui/Layer",["require","underscore","./lib","./main","mini-event/EventTarget"],function(require){function e(e){this.control=e}function t(e){var t=e.target,i=this.getElement(this),n=this.control.main;if(i){for(;t&&t!==i&&t!==n;)t=t.parentNode;if(t!==i&&t!==n)this.hide()}}function i(e){var t=e.control.helper.getPartClasses("layer-hidden");return t.unshift(s.getConfig("uiClassPrefix")+"-layer-hidden"),t}function n(e,t){var i=r.clone(t||{});if(i.hasOwnProperty("top")&&i.hasOwnProperty("bottom"))i.height=i.bottom-i.top,delete i.bottom;if(i.hasOwnProperty("left")&&i.hasOwnProperty("right"))i.width=i.right-i.left,delete i.right;if(i.hasOwnProperty("top")||i.hasOwnProperty("bottom"))e.style.top="",e.style.bottom="";if(i.hasOwnProperty("left")||i.hasOwnProperty("right"))e.style.left="",e.style.right="";for(var n in i)if(i.hasOwnProperty(n))e.style[n]=i[n]+"px"}var a=require("underscore"),r=require("./lib"),s=require("./main");e.prototype.nodeName="div",e.prototype.autoHide=!0,e.prototype.enableAutoHide=function(e){var t="onwheel"in document.body?"wheel":"mousewheel";this.control.helper.addDOMEvent(document.documentElement,t,a.bind(this.hide,this)),this.control.helper.addDOMEvent(e,t,function(e){e.stopPropagation()})},e.prototype.create=function(){var e=this.control,t=e.helper,i=t.createPart("layer",this.nodeName);if(r.addClass(i,s.getConfig("uiClassPrefix")+"-layer"),e.inheritFont||s.getConfig("inheritFont"))i.style.fontSize=r.getComputedStyle(e.main,"fontSize");var n=e.variants,o=[];if(n)n="string"==typeof n?n.split(" "):n,e.variants=n,a.each(n,function(e){o.push(t.getPrimaryClassName("layer-"+e))}),r.addClasses(i,o);if(this.autoHide)this.enableAutoHide(i);return i},e.prototype.addCustomClasses=function(e){var t=this.getElement();r.addClasses(t,e)},e.prototype.render=function(){},e.prototype.syncState=function(){},e.prototype.repaint=function(){var e=this.getElement(!1);if(e)this.render(e)},e.prototype.initBehavior=function(){},e.prototype.getElement=function(e){var n=this.control.helper.getPart("layer");if(!n&&e!==!1){if(n=this.create(),this.render(n),r.addClasses(n,i(this)),this.initBehavior(n),this.control.helper.addDOMEvent(document,"mousedown",a.bind(t,this)),this.control.helper.addDOMEvent(n,"mousedown",function(e){e.stopPropagation()}),this.syncState(n),!n.parentElement)document.body.appendChild(n);this.fire("rendered")}return n},e.prototype.hide=function(){var e=i(this),t=this.getElement();r.addClasses(t,e),this.control.removeState("active"),this.fire("hide")},e.prototype.show=function(){var e=this.getElement();e.style.zIndex=this.getZIndex(),this.position();
var t=i(this);r.removeClasses(e,t),this.control.addState("active"),this.fire("show")},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden"))this.show();else this.hide()},e.prototype.position=function(){var t=this.getElement();e.attachTo(t,this.control.main,this.dock)},e.prototype.getZIndex=function(){return e.getZIndex(this.control.main)},e.prototype.dispose=function(){var e=this.getElement(!1);if(e)e.innerHTML="",r.removeNode(e);this.control=null};var o=1e3;e.create=function(e){var t=document.createElement(e||"div");return t.style.position="absolute",t},e.getZIndex=function(e){for(var t=0;!t&&e&&e!==document;)t=parseInt(r.getComputedStyle(e,"zIndex"),10),e=e.parentNode;return t=t||0,t+1},e.moveToTop=function(e){e.style.zIndex=++o},e.moveTo=function(e,t,i){n(e,{top:t,left:i})},e.resize=function(e,t,i){n(e,{width:t,height:i})},e.attachTo=function(e,t,i){i=i||{strictWidth:!1};var a=r.page.getViewWidth(),s=r.page.getViewHeight(),o=r.page.getScrollTop(),l=r.page.getScrollLeft(),d=r.getOffset(t),u=e.style.display;if(e.style.display="block",e.style.top="-5000px",e.style.left="-5000px",i.strictWidth)e.style.minWidth=d.width+"px";var h=r.getOffset(e);e.style.top="",e.style.left="",e.style.display=u;var c={},f=s-(d.bottom-o),p=d.top-o;if(f<=h.height&&p>h.height)c.top=d.top-h.height;else c.top=d.bottom;var m=a-(d.left-l),g=d.right-l;if(m<=h.width&&g>h.width)c.left=d.right-h.width;else c.left=d.left;n(e,c)},e.centerToView=function(e,t){var i=t?r.clone(t):{};if("number"!=typeof i.width)i.width=this.width;if("number"!=typeof i.height)i.height=this.height;i.left=(r.page.getViewWidth()-i.width)/2;var n=r.page.getViewHeight();if(i.height>=n&&t.hasOwnProperty("minTop"))i.top=t.minTop;else i.top=Math.floor((n-i.height)/2);var a=r.page.getViewWidth();if(i.height>=a&&t.hasOwnProperty("minLeft"))i.left=t.minLeft;else i.left=Math.floor((a-i.width)/2);i.top+=r.page.getScrollTop(),this.setProperties(i)};var l=require("mini-event/EventTarget");return r.inherits(e,l),e}),define("esui/Extension",["require","./lib"],function(require){function e(e){t.extend(this,e)}var t=require("./lib");return e.prototype.target=null,e.prototype.active=!1,e.prototype.isActive=function(){return this.active},e.prototype.activate=function(){this.active=!0},e.prototype.inactivate=function(){this.active=!1},e.prototype.attachTo=function(e){if(this.target&&this.target!==e)if(this.active)this.inactivate();if(this.target=e,!this.active)this.activate()},e.prototype.dispose=function(){if(this.active)this.inactivate();this.target=null},e}),void function(e){e("eoo/oo",[],function(){function e(){return e.create.apply(e,arguments)}function t(t){var i=function(){return i.prototype.constructor.apply(this,arguments)};r.prototype=t.prototype;var n=i.prototype=new r;if(n.$self=i,!("$super"in n))n.$super=e.prototype.$super;return i.$superClass=t,i}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(e,t){for(var n in e)i(e,n)&&t(e[n],n,e);if(l)for(var a=d.length-1;a>-1;--a){var r=d[a];i(e,r)&&t(e[r],r,e)}}function a(){return this.prototype.constructor.toString()}var r=function(){},s="__eooName__",o="__eooOwner__";e.create=function(i,r){if(r=r||{},i=i||e,"object"==typeof i)r=i,i=e;var l=t(i),d=l.prototype;return n(r,function(e,t){if("function"==typeof e)e[s]=t,e[o]=l;d[t]=e}),l.toString=a,l},e.static="function"==typeof Object.create?Object.create:function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return r.prototype=e,new r},e.toString=function(){return"function Class() { [native code] }"},e.prototype={constructor:function(){},$self:e,$superClass:Object,$super:function(e){var t=this.$super.caller,i=t[s],n=t[o].$superClass,a=n.prototype[i];if("function"!=typeof a)throw new TypeError("Call the super class's "+i+", but it is not a function!");return a.apply(this,e)}};var l=!{toString:1}.propertyIsEnumerable("toString"),d=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];return e})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)}),void function(e){e("eoo/defineAccessor",["require"],function(){function e(e){var t="return typeof this."+i+" === 'object' ? this."+i+"['"+e+"'] : undefined;";return new Function(t)}function t(e){var t="this."+i+" = this."+i+" || {};\nthis."+i+"['"+e+"'] = value;";return new Function("value",t)}var i="__eooPrivateMembers__";return function(i,n,a){var r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r,o="set"+r;if(!a)i[s]=!a||"function"!=typeof a.get?e(n):a.get,i[o]=!a||"function"!=typeof a.set?t(n):a.set;else"function"==typeof a.get&&(i[s]=a.get),"function"==typeof a.set&&(i[o]=a.set)}})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)}),void function(e){e("eoo/main",["require","./oo","./defineAccessor"],function(require){var e=require("./oo");return e.defineAccessor=require("./defineAccessor"),e})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)}),define("eoo",["eoo/main"],function(e){return e}),define("ub-ria-ui/helper/CursorPositionHelper",["require","esui/lib"],function(require){function e(e,i){if(!i&&e["${cloneName}"])return e["${cloneName}"];var n,a,s,o=/^(number|string)$/,l=/^(content|outline|outlineWidth)$/,d=[],u=e.style;for(a in u)if(!l.test(a))if(s=r.getComputedStyle(e,a),""!==s&&o.test(typeof s))a=a.replace(/([A-Z])/g,"-$1").toLowerCase(),d.push(a),d.push(":"),d.push(s),d.push(";");return d=d.join(""),e["${cloneName}"]=n="clone"+(new Date).getTime(),t("."+n+"{"+d+"}"),n}function t(e){var t=a[document];if(!t)t=a[document]=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet&&(t.styleSheet.cssText+=e)||t.appendChild(document.createTextNode(e))}function i(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();if("TEXTAREA"===e.nodeName){var n=i.duplicate();for(n.moveToElementText(e),t=-1;n.inRange(i);)n.moveStart("character"),t++}else if("INPUT"===e.nodeName)i.moveStart("character",-e.value.length),t=i.text.length}else if(e.selectionStart||0===+e.selectionStart)t=e.selectionStart;return t}function n(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,a=i.documentElement,r=a.clientTop||n.clientTop||0,s=a.clientLeft||n.clientLeft||0,o=t.top+(self.pageYOffset||a.scrollTop)-r,l=t.left+(self.pageXOffset||a.scrollLeft)-s;return{left:l,top:o,right:l+t.width,bottom:o+t.height}}var a={},r=require("esui/lib"),s={getInputPositon:function(t){var a;if(document.selection){t.focus();var r=document.selection.createRange(),s=t.ownerDocument,o=s.body,l=s.documentElement,d=l.clientTop||o.clientTop||0,u=r.boundingTop+(self.pageYOffset||l.scrollTop)-d;a={left:r.boundingLeft,top:u-80,bottom:r.boundingTop+r.boundingHeight}}else{var h="{$clone_div}",c="{$cloneLeft}",f="{$cloneFocus}",p='<span style="white-space:pre-wrap;"> </span>',m=t[h]||document.createElement("div"),g=t[f]||document.createElement("span"),v=t[c]||document.createElement("span"),y=n(t),_=i(t),x={left:0,top:0};if(!t[h])t[h]=m,t[f]=g,t[c]=v,m.appendChild(v),m.appendChild(g),document.body.appendChild(m),g.innerHTML="|",g.style.cssText="display:inline-block;width:0px;overflow:hidden;z-index:-100;",m.className=e(t),m.style.cssText="visibility:hidden;display:inline-block;position:absolute;z-index:-100;overflow:hidden;";m.style.left=y.left+"px",m.style.top=y.top+"px";var M=t.value.substring(0,_).replace(/</g,"<").replace(/>/g,">").replace(/\n/g,"<br/>").replace(/\s/g,p);v.innerHTML=M,g.style.display="inline-block";try{x=n(g)}catch(b){}g.style.display="none",a={left:x.left,top:x.top,bottom:x.bottom}}return a}};return s}),define("ub-ria-ui/AutoComplete",["require","esui/lib","underscore","esui/Layer","esui/Extension","eoo","./helper/CursorPositionHelper","esui/main"],function(require){function e(e,i){return g.filter(i,function(i){var n=g.isObject(i)?i.text:i;return new RegExp(t(e),"i").test(n)})}function t(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e){return e}function n(t){if(!t)return void a.call(this);var n=this;if("function"==typeof this.target.datasource)this.target.datasource.call(this,t,function(e){e=(n.target.preProcessResponseData||i)(e)||e,a.call(n,e,t)});else if(this.target.datasource&&this.target.datasource.length)a.call(n,e(t,this.target.datasource),t)}function a(e,i){var n=this,a="";if(e&&e.length)for(var r=0,s=e.length;s>r;r++){var o=e[r];a+='<li tabindex="-1"'+(g.isObject(o)&&o.id?' data-id="'+o.id+'"':"")+' class="'+this.target.helper.getPrefixClass("autocomplete-item")+(0===r?" "+this.target.helper.getPrefixClass("autocomplete-item-hover"):"")+' "><span class="'+this.target.helper.getPrefixClass("autocomplete-item-text")+'">'+(g.isObject(o)?o.text:o).replace(new RegExp(t(i),"i"),function(e){return'<i class="'+n.target.helper.getPrefixClass("autocomplete-item-char-selected")+'">'+e+"</i>"})+"</span>"+(g.isObject(o)?'<span class="'+this.target.helper.getPrefixClass("autocomplete-item-desc")+'">'+o.desc+"</span>":"")+"</li>"}this.layer.repaint(a),a?u.call(this):h.call(this)}function r(){var e=this.getElement();m.addClass(e,this.control.helper.getPrefixClass("dropdown")),this.addCustomClasses([this.control.helper.getPrefixClass("autocomplete")]),this.control.main.appendChild(e)}function s(){var e,t=this,i=t.layer.getElement(!1),a=t.target,r=a.helper;this.inputElement=r.getPart(a.type===M?L:w),e=this.inputElement,r.addDOMEvent(i,"click",C.selectItem=function(e){var i=e.target;if("I"===i.nodeName)i=i.parentNode;i=i.parentNode.firstChild,h.call(t);var n=m.getText(i);if(!a.select||a.select(n,a)!==!1)o.call(t,n)}),r.addDOMEvent(e,"keydown",C.keyboard=function(e){if(!t.layer.isHidden())switch(e.keyCode){case 38:e.preventDefault(),c.call(t,"up");break;case 40:e.preventDefault(),c.call(t,"down");break;case 27:h.call(t);break;case 13:e.preventDefault();var i=p.call(t);if(!i)return;h.call(t);var n=m.getText(i.firstChild);if(a.select&&a.select(n,a)===!1)return;o.call(t,n)}});var s="oninput"in e?"input":"propertychange";r.addDOMEvent(e,s,C.oninput=function(){var i=e.value;if(!i||/(?:\s|\,)$/.test(i))return n.call(t,""),void h.call(t);if(i=(a.extractWord||l)(i))if(!a.search||a.search(i)!==!1)n.call(t,i)})}function o(e){var t=this.target.type===M?L:w,i=this.target.helper.getPart(t).value;i=m.trim(i);var n=[];if(/\n/.test(i)){var n=i.split(/\n/);i=n&&n.pop()}{var a=i.split(",");a.pop()}if(a.push(e),n)n.push(a.join(",")),e=n.join("\n");this.target.setValue(e),h.call(this)}function l(e){var t=e.split(/\n/),i=t.pop(),n=i.split(","),a=n&&n.pop();return m.trim(a)}function d(){this.target.main.removeChild(this.layer.getElement(!1))}function u(){this.layer.show();var e=this.inputElement,t=this.layer.getElement(!1).style,i=m.getOffset(this.target.main);if("textarea"===e.nodeName.toLowerCase()){var n=x.getInputPositon(e),a=e.scrollTop,r=e.scrollLeft;t.left=n.left-i.left-r+"px",t.top=n.top-i.top-a+parseInt(m.getStyle(e,"fontSize"),10)+"px"}else t.left=0,t.top=i.height+"px"}function h(){this.layer.hide()}function c(e){var t=this.layer.getElement(!1),i=t.children,n=f.call(this);if(-1!==n){var a=i[n];a&&m.removeClass(a,this.target.helper.getPrefixClass("autocomplete-item-hover"))}if("up"===e)if(-1===n||0===n)n=i.length-1;else n--;else if("down"===e)if(-1===n||n===i.length-1)n=0;else n++;a=i[n],a&&m.addClass(a,this.target.helper.getPrefixClass("autocomplete-item-hover")),a&&a.focus(),this.inputElement.focus()}function f(){for(var e=this.layer.getElement(!1),t=e.children,i=-1,n=0,a=t.length;a>n;n++)if(m.hasClass(t[n],this.target.helper.getPrefixClass("autocomplete-item-hover"))){i=n;break}return i}function p(){var e,t=this.layer.getElement(!1),i=f.call(this);if(-1!==i)e=t.children[i];return e}var m=require("esui/lib"),g=require("underscore"),v=require("esui/Layer"),y=require("esui/Extension"),_=require("eoo"),x=require("./helper/CursorPositionHelper"),M="TextLine",b="TextBox",w="input",L="text",C={},T={};T.constructor=function(e){this.$super(arguments);var t=e.helper,i=e.type===M?L:w,n=t.getPart(i);if(n.tagName.toLowerCase()===w)this.dock={strictWidth:!0};this.initStructure()},T.type="AutoCompleteLayer",T.initStructure=function(){r.call(this)},T.repaint=function(e){var t=this.getElement(!1);if(t)this.render(t,e)},T.render=function(e,t){if(null!=t)e.innerHTML=t},T.isHidden=function(){var e,t=this.getElement();if(!t||this.control.helper.isPart(t,"layer-hidden"))e=!0;else e=!1;return e},T.nodeName="ol";var D=_.create(v,T),exports={};exports.constructor=function(){this.$super(arguments),this.initOptions()},exports.initOptions=function(){},exports.type="AutoComplete",exports.attachTo=function(){this.$super(arguments);var e=this;setTimeout(function(){e.layer=new D(e.target),s.call(e)},0)},exports.activate=function(){var e=this.target.type;if(e===M||e===b)this.$super(arguments)},exports.inactivate=function(){var e=this.target.helper,t=this.inputElement;e.removeDOMEvent(t,w,C.oninput);var i=this.layer.getElement(!1);e.removeDOMEvent(t,"keydown",C.keyboard),e.removeDOMEvent(i,"click",C.selectItem),d.call(this),this.$super(arguments)};var Y=_.create(y,exports);return require("esui/main").registerExtension(Y),Y}),define("ub-ria-ui/Carousel",["require","underscore","esui/lib","esui/painters","esui/Control","eoo","esui/main"],function(require){function e(){return c.format(g,{typeSelector:this.helper.getPrimaryClassName(),contentId:this.helper.getId("main"),leftId:this.helper.getId("left-handler"),listId:this.helper.getId("list"),rightId:this.helper.getId("right-handler"),toolbarId:this.helper.getId("toolbar"),iconLeftArrow:this.helper.getIconClass("chevron-left"),iconRightArrow:this.helper.getIconClass("chevron-right")})}function t(e,t,i,n,a){{var r=[];e?e.length:0}return h.each(e,function(e,s){var o=s+1,l="";if(this.onRenderItem)l=this.onRenderItem(e);else l=c.format(v,{imgSrc:e.url,width:t,height:i,index:s,typeSelector:this.helper.getPrimaryClassName(),itemSelector:this.isDisabled()?this.helper.getPartClassName("disabled"):"",iconCheck:this.helper.getIconClass("check"),spacing:o>0&&o%a===0?0:n});r.push(l)},this),r.join("")}function i(e){var t=[],i=e.length,n=Math.ceil(i/this.pageSize);this.pageLength=n;for(var a=0;n>a;a++){var r=c.format(y,{index:a,typeSelector:this.helper.getPrimaryClassName()});t.push(r)}return t.join("")}function n(){if(-1===this.selectedIndex)return 0;else return Math.floor(this.selectedIndex/this.pageSize)}function a(){var e=this.helper.getPartClasses("pointer-disable")[0];if(1===this.pageLength)c.addClass(this.helper.getId("left-handler"),e),c.addClass(this.helper.getId("right-handler"),e);else if(0===this.currentPage)c.addClass(this.helper.getId("left-handler"),e),c.removeClass(this.helper.getId("right-handler"),e);else if(this.currentPage===this.pageLength-1)c.removeClass(this.helper.getId("left-handler"),e),c.addClass(this.helper.getId("right-handler"),e);else c.removeClass(this.helper.getId("left-handler"),e),c.removeClass(this.helper.getId("right-handler"),e)}function r(){var e=-this.wrapWidth,t=e*this.currentPage+"px";this.helper.getPart("list").style.left=t}function s(e){var t=this.currentPage+e;if(!(t>=this.pageLength||0>t))this.setPage(t)}function o(e,t){if(!this.isDisabled()&&this.selectedIndex!==e){if(this.emphasizeSelectedItem){var i=this.helper.getPrimaryClassName("selected-item");if(-1!==this.selectedIndex){var n=this.helper.getPart("list"),a=n.getElementsByTagName("li"),r=a[this.selectedIndex];c.removeClass(r,i)}c.addClass(t,i)}this.selectedIndex=e,this.selectedItem=this.getSelectedItem(),this.value=this.selectedItem.id,this.fire("change")}}function l(e){if(this.currentPage!==e)this.setPage(e)}function d(e){e=e||window.event;var t=e.target||e.srcElement;if("IMG"===t.nodeName){var i=t.parentNode,n=parseInt(i.getAttribute("index"),10);o.call(this,n,i)}}function u(e){e=e||window.event;var t=e.target||e.srcElement;if("LI"===t.nodeName){var i=parseInt(t.getAttribute("index"),10);l.call(this,i)}}var h=require("underscore"),c=require("esui/lib"),f=require("esui/painters"),p=require("esui/Control"),m=require("eoo"),g=['<div class="${typeSelector}-main" id="${contentId}">','<div class="${typeSelector}-content">','<span class="${typeSelector}-pointer ${typeSelector}-pointer-active-l ${iconLeftArrow}" id="${leftId}"></span>','<div class="ui-carouse-list-wrap">','<ul class="${typeSelector}-list" id="${listId}"></ul>',"</div>",'<span class="${typeSelector}-pointer ${typeSelector}-pointer-active-r ${iconRightArrow}" id="${rightId}"></span>',"</div>",'<div class="${typeSelector}-toolbar">','<ul id="${toolbarId}"></ul>',"</div>","</div>"].join(""),v=['<li class="${typeSelector}-item ${itemSelector}" index="${index}" ','style="width:${width}px;height:${height}px;margin-right:${spacing}px;">','<img class="${typeSelector}-item-img" src="${imgSrc}"/>','<span class="${typeSelector}-check ${iconCheck}"></span>',"</li>"].join(""),y='<li index="${index}" class="${typeSelector}-page"></li>',exports={type:"Carousel",initOptions:function(e){var t={pageSize:8,spacing:15,itemWidth:80,itemHeight:50,datasource:[],value:null,selectedIndex:-1,disabled:!1,emphasizeSelectedItem:!0};if(h.extend(t,e),t.value)t.value=parseInt(t.value,10),h.each(t.datasource,function(e,i){if(e.id===t.value)t.selectedIndex=i}),t.selectedItem=t.datasource[t.selectedIndex];t.itemWidth=parseFloat(t.itemWidth,10),t.itemHeight=parseFloat(t.itemHeight,10),t.pageSize=parseFloat(t.pageSize,10),this.setProperties(t)},createMain:function(){return document.createElement("div")},initStructure:function(){this.main.innerHTML=e.call(this)},initEvents:function(){this.helper.addDOMEvent("left-handler","click",h.bind(s,this,-1)),this.helper.addDOMEvent("right-handler","click",h.bind(s,this,1)),this.helper.addDOMEvent("list","click",d),this.helper.addDOMEvent("toolbar","click",u)},repaint:f.createRepaint(p.prototype.repaint,{name:["datasource","itemWidth","itemHeight"],paint:function(e,n,a,r){var s=e.helper.getPart("list"),o=e.helper.getPart("toolbar"),l=e.pageSize,d=e.spacing;s.innerHTML=t.call(e,n,a,r,d,l),o.innerHTML=i.call(e,n);var u=a*e.pageSize+(l-1)*d,h=r;e.wrapWidth=u;var c=s.parentNode;c.style.width=u+"px",c.style.height=h+"px"}},{name:"value",paint:function(e,t){e.setValue(t)}}),setValue:function(e){if(!e&&0!==e)return void this.setPage();if(this.value=parseInt(e,10),this.selectedIndex=-1,h.each(this.datasource,function(e,t){if(e.id===this.value)this.selectedIndex=t},this),this.selectedItem=this.getSelectedItem(),-1!==this.selectedIndex)if(this.emphasizeSelectedItem){var t=this.helper.getPart("list"),i=t.getElementsByTagName("li"),a=this.helper.getPrimaryClassName("selected-item");h.each(i,function(e){c.removeClass(e,a)});var r=i[this.selectedIndex];c.addClass(r,a)}var s=n.call(this);this.setPage(s)},setPage:function(e){e=e||0,e=parseInt(e,10);var t=this.helper.getPrimaryClassName("current-page");if(null===this.currentPage)this.currentPage=0;if(this.currentPage!==e)this.currentPage=e;var i=c.getChildren(this.helper.getPart("toolbar"));h.each(i,function(e){c.removeClass(e,t);var i=parseInt(e.getAttribute("index"),10);if(this.currentPage===i)c.addClass(e,t)},this),a.call(this),r.call(this)},getSelectedItem:function(){return this.datasource[this.selectedIndex]}},_=m.create(p,exports);return require("esui/main").register(_),_}),define("ub-ria-ui/colorPicker/Color",["require"],function(){function e(e){var t=(+e).toString(16);if(1===t.length)t="0"+t;return t}var exports={hsbToRGB:function(e,t,i){if("object"==typeof e)i=e.bright||e.b,t=e.saturation||e.s,e=e.hue||e.h;if(t>1)t/=100;if(i>1)i/=100;var n=Math.round(255*i),a={},r=[];if(0===t)r=[n,n,n];else{e%=360;var s=e%60,o=Math.round(i*(1-t)*255),l=Math.round(i*(60-t*s)/60*255),d=Math.round(i*(60-t*(60-s))/60*255);switch(Math.floor(e/60)){case 0:r=[n,d,o];break;case 1:r=[l,n,o];break;case 2:r=[o,n,d];break;case 3:r=[o,l,n];break;case 4:r=[d,o,n];break;case 5:r=[n,o,l]}}return a.red=Math.round(r[0]),a.green=Math.round(r[1]),a.blue=Math.round(r[2]),a.r=a.red,a.g=a.green,a.b=a.blue,a},rgbToHex:function(t,i,n){if("object"==typeof t)n=t.blue||t.b,i=t.green||t.g,t=t.red||t.r;var a=[e(t),e(i),e(n)];return a.join("")},hsbToHex:function(e,t,i){var n=exports.hsbToRGB(e,t,i),a=exports.rgbToHex(n);return a},rgbToHSB:function(e,t,i){if("object"==typeof e)i=e.blue||e.b,t=e.green||e.g,e=e.red||e.r;e/=255,t/=255,i/=255;var n=Math.max(e,t,i),a=Math.min(e,t,i),r=n-a,s=0,o=0,l=n;if(0!==n)o=r/n;if(0!==o)if(e===n)s=(t-i)/r;else if(t===n)s=2+(i-e)/r;else s=4+(e-t)/r;else s=-1;if(s*=60,0>s)s+=360;var d={hue:s,saturation:o,bright:l};return d.h=d.hue,d.s=d.saturation,d.b=d.bright,d},hexToRGB:function(e){if(0===e.indexOf("#"))e=e.substring(1);e=new Array(6-e.length+1).join("0")+e;var t={red:parseInt(e.charAt(0)+e.charAt(1),16)||0,green:parseInt(e.charAt(2)+e.charAt(3),16)||0,blue:parseInt(e.charAt(4)+e.charAt(5),16)||0};return t.r=t.red,t.g=t.green,t.b=t.blue,t},hexToHSB:function(e){var t=exports.hexToRGB(e),i=exports.rgbToHSB(t);return i},isValidRGB:function(e){return/^#?[0-9a-fA-Z]{3}$/.test(e)||/^#?[0-9a-fA-Z]{6}$/.test(e)}};return exports}),define("esui/controlHelper",["require","./lib","./Helper","./painters","underscore","./Layer"],function(require){var e=require("./lib"),t=require("./Helper"),i={};i.getGUID=e.getGUID;var n=["initViewContext","initExtensions","isInStage","changeStage","dispose","beforeDispose","afterDispose","getPartClasses","addPartClasses","removePartClasses","getStateClasses","addStateClasses","removeStateClasses","getId","replaceMain","addDOMEvent","removeDOMEvent","clearDOMEvents"];i.createRepaint=require("./painters").createRepaint,require("underscore").each(n,function(e){i[e]=function(i){var n=i.helper||new t(i),a=[].slice.call(arguments,1);return n[e].apply(n,a)}}),i.extractValueFromInput=function(t,i){var n=t.main;if(e.isInput(n)){if(n.value&&!i.value)i.value=n.value;if(n.name&&!i.name)i.name=n.name;if(n.disabled&&(null===i.disabled||void 0===i.disabled))i.disabled=n.disabled;if(n.readOnly&&(null===i.readOnly||void 0===i.readOnly))i.readOnly=n.readonly||n.readOnly}};var a=i.layer={},r=require("./Layer");return a.create=r.create,a.getZIndex=r.getZIndex,a.moveToTop=r.moveToTop,a.moveTo=r.moveTo,a.resize=r.resize,a.attachTo=r.attachTo,a.centerToView=r.centerToView,i}),define("esui/Validity",["require","underscore","./lib","./Control","./Helper","./painters","./main"],function(require){function e(){a.apply(this,arguments)}function t(e,t){var i=e.target,n=null;if(i||e.targetType){var a={type:e.targetType||i.type,skin:i&&i.skin};n=new r(a)}var s=e.helper.getPartClasses();if(n)s.push.apply(s,n.getPartClasses("validity-label"));if(t)if(s.push.apply(s,e.helper.getPartClasses(t)),n)s.push.apply(s,n.getPartClasses("validity-label-"+t));if(i&&i.isHidden()||e.isHidden())if(s.push.apply(s,e.helper.getStateClasses("hidden")),i)s.push.apply(s,i.helper.getPartClasses("validity-label-hidden"));return s}var i=require("underscore"),n=require("./lib"),a=require("./Control"),r=require("./Helper");return e.prototype.type="Validity",e.prototype.createMain=function(){return document.createElement("label")},e.prototype.initOptions=function(t){var n=i.extend({},e.defaultProperties,t);a.prototype.initOptions.call(this,n)},e.prototype.display=function(e,t){this.main.innerHTML=t},e.prototype.repaint=require("./painters").createRepaint(a.prototype.repaint,{name:["target","targetType"],paint:function(e){var i=e.validity?e.validity.getValidState():"",n=t(e,i);e.main.className=n.join(" ")}},{name:"focusTarget",paint:function(e,t){if("label"===e.main.nodeName.toLowerCase())if(t&&t.id)n.setAttribute(e.main,"for",t.id);else n.removeAttribute(e.main,"for")}},{name:"validity",paint:function(e,n){var a=n&&n.getValidState(),r=t(e,a);if(e.main.className=r.join(" "),e.disposeChildren(),n){var s=n.getCustomMessage();if(!s){var o=i.find(n.getStates(),function(e){return!e.getState()});s=o&&o.getMessage()}if(e.display(a,s||"",n),e.helper.initChildren(),s)e.show();else e.hide()}else e.main.innerHTML="",e.hide()}}),e.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.target)this.target.validityLabel=null,this.target=null;if(this.focusTarget=null,this.main.parentNode)this.main.parentNode.removeChild(this.main);a.prototype.dispose.apply(this,arguments)}},n.inherits(e,a),require("./main").register(e),e}),define("esui/validator/Validity",["require","underscore"],function(require){function e(){this.states=[],this.stateIndex={},this.customMessage="",this.customValidState=null}var t=require("underscore");return e.prototype.addState=function(e,t){if(this.stateIndex[e]){if(this.stateIndex[e]===t)return;for(var i=0;i<this.states.length;i++)if(this.states[i]===this.stateIndex[e]){this.states.splice(i,1);break}}this.states.push(t),this.stateIndex[e]=t},e.prototype.getState=function(e){return this.stateIndex[e]||null},e.prototype.getStates=function(){return this.states.slice()},e.prototype.getCustomMessage=function(){return this.customMessage},e.prototype.setCustomMessage=function(e){this.customMessage=e},e.prototype.setCustomValidState=function(e){this.customValidState=e},e.prototype.isValid=function(){return t.all(this.getStates(),function(e){return e.getState()})},e.prototype.getValidState=function(){return this.customValidState||(this.isValid()?"valid":"invalid")},e}),define("esui/InputControl",["require","./lib","./controlHelper","./Control","./Validity","./validator/Validity","./main"],function(require){function e(e){if(e=e?t.extend({},e):{},e.main&&!e.name)e.name=e.main.getAttribute("name");n.call(this,e)}var t=require("./lib"),i=require("./controlHelper"),n=require("./Control"),a=require("./Validity"),r=require("./validator/Validity"),s=require("./main");return e.prototype={constructor:e,ignoreStates:n.prototype.ignoreStates.concat("read-only"),getCategory:function(){return"input"},getFocusTarget:function(){return null},getValue:function(){return this.stringifyValue(this.getRawValue())},setValue:function(e){var t=this.parseValue(e);this.setRawValue(t)},getRawValue:function(){return this.rawValue},setRawValue:function(e){this.setProperties({rawValue:e})},setProperties:function(e){var t=e.value;if(delete e.value,null!=t&&null==e.rawValue)e.rawValue=this.parseValue(t);if(this.hasOwnProperty("readOnly"))this.readOnly=!!this.readOnly;return n.prototype.setProperties.call(this,e)},repaint:i.createRepaint(n.prototype.repaint,{name:"disabled",paint:function(e,t){var i=e.main.nodeName.toLowerCase();if("input"===i||"select"===i||"textarea"===i)e.main.disabled=t}},{name:"readOnly",paint:function(e,t){var i=t?"addState":"removeState";e[i]("read-only");var n=e.main.nodeName.toLowerCase();if("input"===n||"select"===n||"textarea"===n)e.main.readOnly=t}},{name:"hidden",paint:function(e){var n=e.getValidityLabel(!0);if(n){var a=s.getConfig("uiClassPrefix"),r=[].concat(a+"-hidden",a+"-validity-hidden",i.getPartClasses(e,"validity-hidden")),o=e.isHidden()?"addClasses":"removeClasses";t[o](n,r)}}}),stringifyValue:function(e){return null!=e?e+"":""},parseValue:function(e){return e},setReadOnly:function(e){e=!!e,this[e?"addState":"removeState"]("read-only")},isReadOnly:function(){return this.hasState("read-only")},getValidationResult:function(){var e=new r,t={validity:e};t=this.fire("beforevalidate",t);for(var i=s.createRulesByControl(this),n=0,a=i.length;a>n;n++){var o=i[n];e.addState(o.getName(),o.check(this.getValue(),this))}if(!e.isValid())t=this.fire("invalid",t);return this.fire("aftervalidate",t),e},checkValidity:function(){var e=this.getValidationResult();return e.isValid()},validate:function(){var e=this.getValidationResult();return this.showValidity(e),e.isValid()},getValidityLabel:function(e){if(!i.isInStage(this,"RENDERED"))return null;var n=this.validityLabel&&this.viewContext.get(this.validityLabel);if(!n&&!e){var r={id:this.id+"-validity",viewContext:this.viewContext};if(n=new a(r),this.main.nextSibling){var s=this.main.nextSibling;n.insertBefore(s)}else n.appendTo(this.main.parentNode);this.validityLabel=n.id}if((8===t.ie||7===t.ie)&&n)t.toggleClass(n.main.parentNode,"fuck-the-ie");return n},showValidity:function(e){if(this.validity)this.removeState("validity-"+this.validity.getValidState());this.validity=e,this.addState("validity-"+e.getValidState());var t=this.getValidityLabel();if(t){var i={target:this,focusTarget:this.getFocusTarget(),validity:e};t.setProperties(i)}},hideValidity:function(){var e=new r;this.showValidity(e)},showValidationMessage:function(e,t){t=t||"";var i=new r;i.setCustomValidState(e),i.setCustomMessage(t),this.showValidity(i)},dispose:function(){if(!i.isInStage(this,"DISPOSED")){var e=this.getValidityLabel(!0);if(e)e.dispose();n.prototype.dispose.apply(this,arguments)}}},t.inherits(e,n),e}),define("esui/TextBox",["require","underscore","./lib","./main","./InputControl","mini-event","./painters"],function(require){function e(){u.apply(this,arguments)}function t(e){var t=e.which||e.keyCode;if(13===t)this.fire("enter");var i={keyCode:t,key:String.fromCharCode(t),ctrlKey:e.ctrlKey,altKey:e.altKey},n=require("mini-event").fromDOMEvent(e,"keypress",i);this.fire("keypress",n)}function i(e,t){var i=l.g(e.inputId);if(!h){var n=e.helper.getPart("placeholder");if("boolean"!=typeof t)t=document.activeElement===i;if(!t&&!e.getRawValue())e.helper.removePartClasses("placeholder-hidden",n);else e.helper.addPartClasses("placeholder-hidden",n)}}function n(){if(i(this,!0),this.autoSelect){var e=l.g(this.inputId);e.select()}this.fire("focus")}function a(){i(this,!1),this.fire("blur")}function r(e){if("input"===e.type||"value"===e.propertyName)this.fire("input")}function s(){this.fire("iconclick")}var o=require("underscore"),l=require("./lib"),d=require("./main"),u=require("./InputControl"),h="placeholder"in document.createElement("input");return e.defaultProperties={width:200},e.prototype.type="TextBox",e.prototype.initOptions=function(t){var i={mode:"text",placeholder:"",autoSelect:!1,icon:null};if(o.extend(i,e.defaultProperties),!i.name)i.name=this.main.getAttribute("name");if(l.isInput(this.main)){var n=this.main.nodeName.toLowerCase();if("textarea"===n)i.mode="textarea";else{var a=this.main.type;i.mode="password"===a?"password":"text"}if(!i.placeholder)i.placeholder=this.main.getAttribute("placeholder");this.helper.extractOptionsFromInput(this.main,i)}if(o.extend(i,t),!i.hasOwnProperty("title")&&this.main.title)i.title=this.main.title;this.setProperties(i)},e.prototype.getFocusTarget=function(){return l.g(this.inputId)},e.prototype.initStructure=function(){if(l.isInput(this.main)){var e=this.helper.replaceMain();if(l.removeAttribute(this.main,"tabindex"),this.inputId=e.id||this.helper.getId("input"),this.main.id)this.main.id=this.helper.getId();var t=e.cloneNode(!1);l.removeAttribute(t,d.getConfig("instanceAttr")),t.id=this.inputId,this.main.appendChild(t)}else{this.inputId=this.helper.getId("input");var i="textarea"===this.mode?'<textarea id="'+this.inputId+'"':'<input type="'+this.mode+'" placeholder="'+this.placeholder+'" id="'+this.inputId+'"';if(this.name)i+=' name="'+o.escape(this.name)+'"';i+="textarea"===this.mode?"></textarea>":" />",this.main.innerHTML=i}var t=l.g(this.inputId),n=this.icon;if(n){var a=document.createElement("span");a.className=n+" "+this.helper.getPartClasses("icon"),l.insertBefore(a,t)}if(!h){var r=document.createElement("label");r.id=this.helper.getId("placeholder"),l.setAttribute(r,"for",t.id),this.helper.addPartClasses("placeholder",r),l.insertAfter(r,t)}},e.prototype.initEvents=function(){var e=l.g(this.inputId);this.helper.addDOMEvent(e,"keypress",t),this.helper.addDOMEvent(e,"focus",n),this.helper.addDOMEvent(e,"blur",a);var i="oninput"in e?"input":"propertychange";if(this.helper.addDOMEvent(e,i,r),this.helper.delegateDOMEvent(e,"change"),this.icon)this.helper.addDOMEvent(this.main.firstChild,"click",s)},e.prototype.repaint=require("./painters").createRepaint(u.prototype.repaint,{name:"rawValue",paint:function(e,t){var n=l.g(e.inputId),a="oninput"in n?"input":"propertychange";
e.helper.removeDOMEvent(n,a,r),n.value=e.stringifyValue(t),e.helper.addDOMEvent(n,a,r),i(e)}},{name:"title",paint:function(e,t){var i=l.g(e.inputId),n=e.helper.getPart("placeholder");if(t){if(l.setAttribute(e.main,"title",t),l.setAttribute(i,"title",t),n)l.setAttribute(n,"title",t)}else if(l.removeAttribute(e.main,"title"),l.removeAttribute(i,"title"),n)l.removeAttribute(n,"title")}},{name:"maxLength",paint:function(e,t){var i=l.g(e.inputId);if(t=parseInt(t,10),!t||0>=t){try{i.maxLength=void 0,delete i.maxLength}catch(n){}l.removeAttribute(i,"maxlength"),l.removeAttribute(i,"maxLength")}else i.maxLength=t,l.setAttribute(i,"maxlength",t)}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=l.g(e.inputId);n.disabled=t,n.readOnly=i}},{name:"placeholder",paint:function(e,t){var n=l.g(e.inputId);if(h)if(t)l.setAttribute(n,"placeholder",t);else l.removeAttribute(n,"placeholder");else{var a=e.helper.getPart("placeholder");a.innerHTML=o.escape(t||"")}i(e)}},{name:["hint","hintType"],paint:function(e,t,i){var n=e.helper.getPart("hint");if(e.removeState("hint-prefix"),e.removeState("hint-suffix"),!t&&n)l.removeNode(n);if(t){if(!n)n=document.createElement("label"),n.id=e.helper.getId("hint"),e.helper.addPartClasses("hint",n),l.setAttribute(n,"for",e.inputId);n.innerHTML=o.escape(t),i="prefix"===i?"prefix":"suffix";var a="prefix"===i?"insertBefore":"insertAfter",r=l.g(e.inputId);l[a](n,r),e.addState("hint-"+i)}}},{name:["width","hint","hidden"],paint:function(e,t,i,n){if(!n&&!isNaN(t)){if(i){var a=e.helper.getPart("hint");if(a)t-=a.offsetWidth}var r=l.g(e.inputId);r.style.width=t+"px";var s=e.helper.getPart("placeholder");if(s)s.style.maxWidth=t+"px"}}},{name:"height",paint:function(e,t){if(!isNaN(t)){var i=e.helper.getPart("hint"),n=t+"px";if(i)i.style.height=n,i.style.lineHeight=n;var a=l.g(e.inputId);a.style.height=n;var r=e.helper.getPart("placeholder");if(r)r.style.height=n,r.style.lineHeight=n}}}),e.prototype.getValidityLabel=function(){var e=u.prototype.getValidityLabel.apply(this,arguments);if(e)e.set("targetType","textarea"===this.mode?"TextArea":"TextBox");return e},e.prototype.getRawValue=function(){var e=l.g(this.inputId);return e?e.value:this.rawValue||this.value||""},e.prototype.getRawValueProperty=e.prototype.getRawValue,l.inherits(e,u),d.register(e),e}),define("esui/Label",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){n.apply(this,arguments)}var t=require("underscore"),i=require("./lib"),n=require("./Control");e.prototype.type="Label",e.prototype.createMain=function(e){if(!e.tagName)return n.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var n={title:""};if(t.extend(n,e),n.tagName=this.main.nodeName.toLowerCase(),null==n.text)n.text=i.trim(i.getText(this.main));t.extend(this,n)},e.prototype.initEvents=function(){this.helper.delegateDOMEvent(this.main,"click")};var a=require("./painters");return e.prototype.repaint=a.createRepaint(n.prototype.repaint,a.attribute("title"),a.text("text"),{name:"forTarget",paint:function(e,t){if("label"===e.main.nodeName.toLowerCase())e.helper.addDOMEvent(e.main,"mousedown",function n(){var e=this.viewContext.get(t),a=e&&"function"==typeof e.getFocusTarget&&e.getFocusTarget();if(a&&a.id)i.setAttribute(this.main,"for",a.id);this.helper.removeDOMEvent(this.main,"mousedown",n)})}}),e.prototype.setText=function(e){this.setProperties({text:e})},e.prototype.getText=function(){return this.text},e.prototype.setTitle=function(e){this.setProperties({title:e})},e.prototype.getTitle=function(){return this.title},i.inherits(e,n),require("./main").register(e),e}),define("ub-ria-ui/colorPicker/AdvancedColorPicker",["require","esui/lib","esui/Control","underscore","./Color","esui/TextBox","esui/Label","esui/painters","eoo","esui"],function(require){function e(){return[this.helper.getPartBeginTag("pallete","div"),this.helper.getPartBeginTag("hue","div"),this.helper.getPartBeginTag("hue-slider","div"),this.helper.getPartEndTag("hue-slider","div"),this.helper.getPartBeginTag("hue-pointer","div"),this.helper.getPartEndTag("hue-pointer","div"),this.helper.getPartEndTag("hue","div"),this.helper.getPartBeginTag("canvas","div"),this.helper.getPartBeginTag("canvas-mask","div"),this.helper.getPartEndTag("canvas-mask","div"),this.helper.getPartBeginTag("canvas-pointer","span"),this.helper.getPartEndTag("canvas-pointer","span"),this.helper.getPartEndTag("canvas","div"),this.helper.getPartBeginTag("alpha","div"),this.helper.getPartBeginTag("alpha-slider","div"),this.helper.getPartEndTag("alpha-slider","div"),this.helper.getPartBeginTag("alpha-pointer","div"),this.helper.getPartEndTag("alpha-pointer","div"),this.helper.getPartEndTag("alpha","div"),this.helper.getPartEndTag("pallete","div")].join("")}function t(){return[this.helper.getPartBeginTag("compare","div"),this.helper.getPartBeginTag("compare-title","div"),"改前",this.helper.getPartEndTag("compare-title","div"),this.helper.getPartBeginTag("compare-color-old","div"),this.helper.getPartEndTag("compare-color-old","div"),this.helper.getPartBeginTag("compare-color-new","div"),this.helper.getPartEndTag("compare-color-new","div"),this.helper.getPartBeginTag("compare-title","div"),"改后",this.helper.getPartEndTag("compare-title","div"),this.helper.getPartEndTag("compare","div")].join("")}function i(){return[this.helper.getPartBeginTag("input","div"),n(this,"hex","色值"),this.helper.getPartBeginTag("input-rgba","div"),n(this,"red","R"),n(this,"green","G"),n(this,"blue","B"),n(this,"alpha","透明度"),this.helper.getPartEndTag("input-rgba","div"),this.helper.getPartEndTag("input","div")].join("")}function n(e,t,i){var n=e.helper.getId(t+"-input"),a=t+"Input",r=[e.helper.getPartClassName("color-field"),e.helper.getPartClassName("color-field-"+t)],s='<div class="'+r.join(" ")+'"><div id="'+n+'" data-ui-type="TextBox" data-ui-variants="fluid" data-ui-width="auto"data-ui-child-name="'+a+'" ></div><label data-ui-type="Label" for="'+n+'">'+i+"</label></div>";return s}function a(){var e=M.hsbToHex(this.hue,this.saturation,this.bright);if(e!==this.displayHex)this.displayHex=e,this.fire("change")}function r(){var e=this.getChild("redInput").getValue(),t=this.getChild("greenInput").getValue(),i=this.getChild("blueInput").getValue(),n=M.rgbToHex(e,t,i),a=M.rgbToHSB(e,t,i);this.displayHex=n,this.hue=a.h,this.saturation=a.s,this.bright=a.b,d.call(this),u.call(this,"new",this.displayHex),g.call(this),m.call(this),v.call(this),this.fire("change")}function s(){var e=M.hexToHSB(this.displayHex);this.hue=e.h,this.saturation=e.s,this.bright=e.b,l.call(this),u.call(this,"new",this.displayHex),g.call(this),m.call(this),v.call(this),this.fire("change")}function o(e){if(!y.hasClass(e.target,this.helper.getPartClassName("canvas-pointer"))){var t=e.offsetY;if(void 0===t)t=e.layerY;var i=e.offsetX;if(void 0===i)i=e.layerX;this.bright=Math.min(1-t/e.target.offsetHeight,1),this.saturation=i/e.target.offsetWidth,a.call(this),v.call(this),l.call(this),d.call(this),u.call(this,"new",this.displayHex)}}function l(){var e=this.displayHex,t=this,i=M.hexToRGB(e),n=["red","green","blue"];x.each(n,function(e){var n=t.getChild(e+"Input");n.setValue(i[e])})}function d(){var e=this.displayHex,t=this.getChild("hexInput");t.setValue(e)}function u(e,t){t=new Array(6-t.length+1).join("0")+t;var i=this.helper.getPart("compare-color-"+e);i.style.background="#"+t}function h(){var e=this.displayAlpha,t=this.getChild("alphaInput");t.setValue(e)}function c(e){if(!y.hasClass(e.target,this.helper.getPartClassName("alpha-pointer"))){var t=e.offsetY;if(void 0===t)t=e.layerY;this.displayAlpha=100-Math.round(t/e.target.offsetHeight*100),f.call(this),h.call(this),this.fire("change")}}function f(){var e=this.helper.getPart("alpha"),t=this.helper.getPart("alpha-pointer");if(!this.alphaSliderSize)this.alphaSliderSize={sliderHeight:e.offsetHeight,pointerHeight:t.offsetHeight};var i=this.alphaSliderSize.sliderHeight*(1-this.displayAlpha/100);i-=this.alphaSliderSize.pointerHeight/2,t.style.top=Math.round(i)+"px"}function p(e){if(!y.hasClass(e.target,this.helper.getPartClassName("hue-pointer"))){var t=e.offsetY;if(void 0===t)t=e.layerY;this.hue=t/e.target.offsetHeight*360,g.call(this),a.call(this),m.call(this),l.call(this),d.call(this),u.call(this,"new",this.displayHex)}}function m(){var e=M.hsbToHex(this.hue,1,1),t=this.helper.getPart("canvas");t.style.backgroundColor="#"+e}function g(){var e=this.helper.getPart("hue"),t=this.helper.getPart("hue-pointer");if(!this.hueSliderSize)this.hueSliderSize={pointerHeight:t.offsetHeight,sliderHeight:e.offsetHeight};var i=this.hue*this.hueSliderSize.sliderHeight/360;i-=this.hueSliderSize.pointerHeight/2,t.style.top=Math.round(i)+"px"}function v(){var e=this.helper.getPart("canvas"),t=y.g(this.helper.getId("canvas-pointer"));if(!this.canvasSize)this.canvasSize={canvasWidth:e.offsetWidth,canvasHeight:e.offsetHeight,pointerHeight:t.offsetHeight,pointerWidth:t.offsetWidth};var i=this.canvasSize.canvasWidth*this.saturation;i-=this.canvasSize.pointerWidth/2;var n=(1-this.bright)*this.canvasSize.canvasHeight;n-=this.canvasSize.pointerHeight/2,t.style.left=Math.round(i)+"px",t.style.top=Math.round(n)+"px"}var y=require("esui/lib"),_=require("esui/Control"),x=require("underscore"),M=require("./Color");require("esui/TextBox"),require("esui/Label");var exports={};exports.type="AdvancedColorPicker",exports.initOptions=function(e){var t={hex:"0000ff",displayHex:"0000ff",noAlpha:!1,alpha:100,displayAlpha:100};if(y.extend(t,e),"false"===t.noAlpha)t.noAlpha=!1;this.setProperties(t)},exports.initStructure=function(){var n=[e.call(this),t.call(this),i.call(this)];if(this.main.innerHTML=n.join(""),this.initChildren(),this.noAlpha)this.addState("no-alpha")},exports.initEvents=function(){var e=this.helper.getPart("canvas");this.helper.addDOMEvent(e,"click",o);var t=this.helper.getPart("hue");this.helper.addDOMEvent(t,"click",p);var i=["red","green","blue"],n=this;x.each(i,function(e){var t=n.getChild(e+"Input");t.on("input",r,n)});var a=this.getChild("hexInput");a.on("input",function(){var e=this.getValue();n.displayHex=e,s.call(n)});var l=this.helper.getPart("alpha");this.helper.addDOMEvent(l,"click",c);var d=this.getChild("alphaInput");d.on("input",function(){var e=this.getValue();n.displayAlpha=e,f.call(n),n.fire("change")})},exports.repaint=require("esui/painters").createRepaint(_.prototype.repaint,{name:"hex",paint:function(e,t){if(null!=t)e.displayHex=t,d.call(e),s.call(e),u.call(e,"old",e.hex)}},{name:"alpha",paint:function(e,t){if(null!=t)e.displayAlpha=t,f.call(e),h.call(e)}}),exports.updateHex=function(e){this.displayHex=e,d.call(this),s.call(this)},exports.updateAlpha=function(e){this.displayAlpha=e,h.call(this),f.call(this)},exports.getDisplayHex=function(){return this.displayHex},exports.getDisplayAlpha=function(){return this.displayAlpha};var b=require("eoo").create(_,exports);return require("esui").register(b),b}),define("ub-ria-ui/colorPicker/SimpleColorPicker",["require","esui/lib","esui/InputControl","underscore","esui/painters","eoo","esui"],function(require){function e(e){var t=e.main.getElementsByTagName("span"),i=e.helper.getPartClasses("block")[0];r.each(t,function(e){if(n.hasClass(e,i)){var t=n.getAttribute(e,"data-value");if(t===this.rawValue)this.helper.addPartClasses("selected",e);else this.helper.removePartClasses("selected",e)}},e)}function t(e){var t='<span class="'+e.helper.getPartClassName("block")+'" title="${text}" data-value="${value}" style="background-color: ${diplayValue}">${text}</span>',i="";return r.each(e.colors,function(e){if(e.diplayValue=e.value,e.value.indexOf("#")<0)e.diplayValue="#"+e.value;i+=n.format(t,e)}),i+="</div>"}function i(e){var t=this.helper.getPartClasses("block")[0];if(n.hasClass(e.target,t)){var i=n.getAttribute(e.target,"data-value");this.setRawValue(i)}}var n=require("esui/lib"),a=require("esui/InputControl"),r=require("underscore"),exports={};exports.type="SimpleColorPicker",exports.initOptions=function(e){var t={};n.extend(t,this.$self.defaultProperties,e),this.setProperties(t)},exports.initStructure=function(){this.main.innerHTML=t(this)},exports.initEvents=function(){this.$super(arguments),this.helper.addDOMEvent(this.main,"click",i)},exports.repaint=require("esui/painters").createRepaint(a.prototype.repaint,{name:"rawValue",paint:function(t){e(t)}}),exports.setProperties=function(){var e=this.$super(arguments);if(e.hasOwnProperty("rawValue"))this.fire("change");return e};var s=require("eoo").create(a,exports);return s.defaultProperties={colors:[{text:"#ffffff",value:"ffffff"},{text:"#ededed",value:"ededed"},{text:"#d2d2d2",value:"d2d2d2"},{text:"#bfbfbf",value:"bfbfbf"},{text:"#a0a0a0",value:"a0a0a0"},{text:"#898989",value:"898989"},{text:"#6f6f6f",value:"6f6f6f"},{text:"#626262",value:"626262"},{text:"#434343",value:"434343"},{text:"#333333",value:"333333"},{text:"#1b1b1b",value:"1b1b1b"},{text:"#000000",value:"000000"},{text:"#50a7f9",value:"50a7f9"},{text:"#6ebf40",value:"6ebf40"},{text:"#fff45c",value:"fff45c"},{text:"#f39017",value:"f39017"},{text:"#ec5d57",value:"ec5d57"},{text:"#b36ae2",value:"b36ae2"},{text:"#0065c0",value:"0065c0"},{text:"#92d500",value:"92d500"},{text:"#f5d327",value:"f5d327"},{text:"#c82503",value:"c82503"},{text:"#f39017",value:"f39017"},{text:"#ec5d57",value:"ec5d57"},{text:"#86ccc8",value:"86ccc8"},{text:"#acd599",value:"acd599"},{text:"#7fcdf4",value:"7fcdf4"},{text:"#8c97cb",value:"8c97cb"},{text:"#aa8abd",value:"aa8abd"},{text:"#f19fc2",value:"f19fc2"},{text:"#f26071",value:"f26071"},{text:"#e60013",value:"e60013"},{text:"#eb6102",value:"eb6102"},{text:"#f8b551",value:"f8b551"},{text:"#7fc169",value:"7fc169"},{text:"#009d97",value:"009d97"},{text:"#0068b7",value:"0068b7"},{text:"#1e2087",value:"1e2087"},{text:"#611986",value:"611986"},{text:"#920783",value:"920783"},{text:"#e5007f",value:"e5007f"},{text:"#a40000",value:"a40000"},{text:"#a84300",value:"a84300"},{text:"#cea973",value:"cea973"},{text:"#996b34",value:"996b34"},{text:"#81511c",value:"81511c"},{text:"#372f2c",value:"372f2c"},{text:"#a6927d",value:"a6927d"}],mode:"block"},require("esui").register(s),s}),define("ub-ria-ui/colorPicker/FullColorPicker",["require","esui/Control","esui/lib","./AdvancedColorPicker","./SimpleColorPicker","esui/painters","eoo","esui"],function(require){function e(){return'<div class="'+this.helper.getPartClassName("advanced-section")+'"><div data-ui-type="AdvancedColorPicker" data-ui-child-name="advanced"data-ui-no-alpha="'+(this.hasAlpha?"false":"true")+'"></div></div>'}function t(){return'<div class="'+this.helper.getPartClassName("simple-section")+'"><div data-ui-type="SimpleColorPicker" data-ui-child-name="simple"></div></div>'}function i(){var e,t=this.getChild("switch");if("full"===this.currentMode)e=this.defaultMode,t.setContent("完整模式");else if(e="full","simple"===this.currentMode)t.setContent("简单模式");else t.setContent("高级模式");this.removeState(this.currentMode),this.addState(e),this.currentMode=e}function n(){var e=this.getChild("advanced");if(e){var t=this.displayHex;e.updateHex(t);var i=this.displayAlpha;e.updateAlpha(i)}}function a(){var e=this.getChild("simple");if(e)e.setProperties({rawValue:this.displayHex})}var r=require("esui/Control"),s=require("esui/lib");require("./AdvancedColorPicker"),require("./SimpleColorPicker");var exports={};exports.type="FullColorPicker",exports.initOptions=function(e){var t={hex:"000000",displayHex:"000000",alpha:100,displayAlpha:100,defaultMode:"simple",switchable:!0,hasAlpha:!0};if(s.extend(t,e),"full"===t.mode||"false"===t.switchable)t.switchable=!1;if("false"===t.hasAlpha)t.hasAlpha=!1;this.setProperties(t)},exports.initStructure=function(){var i=[],n=e.call(this),a=t.call(this);if("full"===this.defaultMode||this.switchable)i=[n,a];else if("simple"===this.defaultMode)i=[a];else i=[n];if(this.switchable){var r=this.helper.getPartClassName("mode-switch");i.push('<div data-ui-type="Button" data-ui-child-name="switch" '),i.push('class="'+r+'">完整模式</div>')}this.main.innerHTML=i.join(""),this.initChildren(),this.currentMode=this.defaultMode,this.addState(this.defaultMode)},exports.initEvents=function(){var e=this,t=this.getChild("advanced");if(t)t.on("change",function(){var t=this.getDisplayHex(),i=this.getDisplayAlpha();e.displayHex=t,e.displayAlpha=i,a.call(e),e.fire("change")});var r=this.getChild("simple");if(r)r.on("change",function(){var t=this.getRawValue();e.displayHex=t,n.call(e),e.fire("change")});var s=this.getChild("switch");if(s)s.on("click",i,this)},exports.repaint=require("esui/painters").createRepaint(r.prototype.repaint,{name:["hex","alpha"],paint:function(e,t,i){if(null!=t||null!=i){e.displayHex=t,e.displayAlpha=i;var n=e.getChild("advanced");if(n)n.setProperties({hex:t,alpha:i});var a=e.getChild("simple");if(a)a.setProperties({rawValue:t})}}}),exports.getDisplayHex=function(){return this.displayHex},exports.getDisplayAlpha=function(){return this.displayAlpha};var o=require("eoo").create(r,exports);return require("esui").register(o),o}),define("esui/Panel",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){r.apply(this,arguments)}function t(e,t){var i=this.main,a=document.createElement("div");a.innerHTML=e;for(var r=n.extend({},this.renderOptions,{viewContext:this.viewContext,parent:this}),s=a.childNodes,o=[],l=0;l<s.length;l++)o.push(s[l]);var d=require("./main");n.each(o,function(e){if(t)i.insertBefore(e,i.firstChild);else i.appendChild(e);d.init(i,r)})}function i(e){if(e.indexOf("-")>=0)e=e.replace(/-\w/g,function(e){return e.charAt(1).toUpperCase()});return e}var n=require("underscore"),a=require("./lib"),r=require("./Control");return e.prototype.type="Panel",e.prototype.getCategory=function(){return"container"},e.prototype.createMain=function(e){if(!e.tagName)return r.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var t={};n.extend(t,e),t.tagName=this.main.nodeName.toLowerCase(),this.setProperties(t)},e.prototype.repaint=require("./painters").createRepaint(r.prototype.repaint,{name:"content",paint:function(e,t){if(null!=t)e.helper.disposeChildren(),e.main.innerHTML=t;e.helper.initChildren()}}),e.prototype.setContent=function(e){this.setProperties({content:e})},e.prototype.prependContent=function(e){t.call(this,e,!0)},e.prototype.appendContent=function(e){t.call(this,e,!1)},e.prototype.getStyle=function(e){return e=i(e),this.main?this.main.style[e]:""},e.prototype.setStyle=function(e,t){if(e=i(e),this.main)this.main.style[e]=t||""},a.inherits(e,r),require("./main").register(e),e}),define("esui/Overlay",["require","./lib","./main","./Panel","underscore","./painters"],function(require){function e(){g.apply(this,arguments)}function t(e){var t=e.target,i=this.main;if(i){var n=p.dom.contains(i,t);if(!n)this.hide()}}function i(){var e=this.attachedTarget,t=this.attachedLayout;if(null!=e){if(v.isString(t))t=t.split(",");this.attachLayout(e,t)}else{var i=v.pick(this,"left","right","top","bottom","width","height");this.selfLayout(i)}}function n(e,t){if(e)return p.g(e);else if(t){if(v.isString(t))t=this.viewContext.get(t)||{};return t.main}return null}function a(e){var t=this.main,i=p.clone(e||{});if(v.isArray(i.align))p.addClass(t,this.helper.getPartClasses(i.align.join("-")));i=v.omit(i,"align"),t.style.top="",t.style.bottom="",t.style.left="",t.style.right="",v.each(i,function(e,i){if(!r(e))t.style[i]=e+"px"})}function r(e,t){if(t){if(!e.hasOwnProperty(t))return!0;e=e[t]}return null==e||0!==e&&""===p.trim(e)}function s(e,t){var i=p.getStyle(e,t);return parseInt(i,10)||0}function o(e,t){var i=e.page.width-e.target.viewRight,n=e.target.viewLeft,a=e.target.viewBottom,r=e.page.height-e.target.viewTop,s={};if(i>=e.layer.width)s.right=!0;if(n>=e.layer.width)s.left=!0;if(a>=e.layer.height)s.bottom=!0;if(r>=e.layer.height)s.top=!0;var o={right:e.target.layoutRight,left:e.target.layoutLeft-e.layer.width,bottom:e.target.layoutBottom-e.layer.height,top:e.target.layoutTop,center:e.target.layoutTop-1*(e.layer.height-e.target.height)/2},l={align:[]};if(s[t[0]]===!0)l.left=o[t[0]],l.align.push(t[0]);else l.left=o.right,l.align.push("right");if("center"===t[1])l.top=o.center,l.align.push("center");else if(s[t[1]]===!0)l.top=o[t[1]],l.align.push(t[1]);else l.top=o.top,l.align.push("top");return l}function l(e,t){var i=e.target.viewRight,n=e.page.width-e.target.viewLeft,a=e.target.viewTop,r=e.page.height-e.target.viewBottom,s={};if(i>=e.layer.width)s.right=!0;if(n>=e.layer.width)s.left=!0;if(r>=e.layer.height)s.bottom=!0;if(a>=e.layer.height)s.top=!0;var o={right:e.target.layoutRight-e.layer.width,left:e.target.layoutLeft,center:e.target.layoutLeft-1*(e.layer.width-e.target.width)/2,bottom:e.target.layoutBottom,top:e.target.layoutTop-e.layer.height},l={align:[]};if(s[t[0]]===!0)l.top=o[t[0]],l.align.push(t[0]);else l.top=o.bottom,l.align.push("bottom");if("center"===t[1])l.left=o.center,l.align.push("center");else if(s[t[1]]===!0)l.left=o[t[1]],l.align.push(t[1]);else l.left=o.left,l.align.push("left");return l}function d(){if(!this.isHidden())i.apply(this)}function u(e){var t=document.createElement("div");t.id=e,document.body.appendChild(t)}function h(){var e="ctrl-mask-"+this.helper.getId(),t=p.g(e);if(!t)u(e);return p.g(e)}function c(){var e=h.call(this),t=this.helper.getPartClassName("mask");e.className=t,e.style.display="block"}function f(){var e=h.call(this);if("undefined"!=typeof e)p.removeNode(e)}var p=require("./lib"),m=require("./main"),g=require("./Panel"),v=require("underscore");return p.inherits(e,g),e.prototype.type="Overlay",e.prototype.parseMain=function(e){var t=e.main;if(t){for(var i,n=p.getChildren(t),a=n.length,r={};a--;)if(i=n[a].getAttribute("data-role"))r[i]=n[a];e.roles=r}},e.prototype.initOptions=function(e){var t={fixed:!1,autoClose:!0,hasMask:!1},i=["fixed","autoClose","hasMask"];v.each(i,function(t){if("false"===e[t])e[t]=!1}),v.extend(t,e),g.prototype.initOptions.call(this,t)},e.prototype.initStructure=function(){var e=this.main;if(e.parentNode&&"body"!==e.parentNode.nodeName.toLowerCase())document.body.appendChild(e);this.addState("hidden"),g.prototype.initStructure.apply(this,arguments)},e.prototype.repaint=require("./painters").createRepaint(g.prototype.repaint,{name:["width","height"],paint:function(e,t,n){if(!r(t))if("auto"===t)e.main.style.width="auto";else e.main.style.width=t+"px";if(!r(n))if("auto"===n)e.main.style.height="auto";else e.main.style.height=n+"px";if(!e.isHidden())i.apply(e)}},{name:["attachedDOM","attachedControl"],paint:function(e,t,i){var a=n.call(e,t,i);e.attachedTarget=a}}),e.prototype.show=function(){if(this.helper.isInStage("INITED"))this.render();else if(this.helper.isInStage("DISPOSED"))return;if(this.autoClose)this.helper.addDOMEvent(document,"mousedown",t);if(this.fixed)this.helper.addDOMEvent(window,"resize",d),this.helper.addDOMEvent(window,"scroll",d);if(this.removeState("hidden"),this.hasMask)c.call(this);this.moveToTop(),i.apply(this),this.fire("show")},e.prototype.hide=function(){if(!this.isHidden()){if(this.autoClose)this.helper.removeDOMEvent(document,"mousedown",t);if(this.helper.removeDOMEvent(window,"resize",d),this.helper.removeDOMEvent(window,"scroll",d),this.addState("hidden"),this.hasMask)f.call(this)}this.fire("hide")},e.prototype.moveToTop=function(){var e=this.getZIndex();this.main.style.zIndex=e;var t=h.call(this);if(t)t.style.zIndex=e-1},e.prototype.getZIndex=function(){for(var e=this.helper.getPrimaryClassName(),t=this.helper.getPrimaryClassName("hidden"),i=1203,n=p.getChildren(document.body),a=0,r=n.length;r>a;a++)if(p.hasClass(n[a],e)&&!p.hasClass(n[a],t))i=Math.max(i,n[a].style.zIndex)+10;return i},e.prototype.selfLayout=function(e){var t=p.page,i=this.main,n=p.clone(e||{}),o=p.getOffset(i);if(r(n,"left")&&r(n,"right"))n.left=(t.getViewWidth()-o.width)/2;else if(!r(n,"left")&&!r(n,"right")){if(r(n,"width"))n.width=t.getViewWidth()-n.right-n.left-s(this.main,"padding-left")-s(this.main,"padding-right")-s(this.main,"border-left-width")-s(this.main,"border-right-width");n=v.omit(n,"right")}if(n.left=Math.max(n.left,0),n.left=t.getScrollLeft()+n.left,r(n,"top")&&r(n,"bottom"))n.top=(t.getViewHeight()-o.height)/2;else if(!r(n,"top")&&!r(n,"bottom")){if(r(n,"height"))n.height=t.getViewHeight()-n.top-n.bottom-s(this.main,"padding-top")-s(this.main,"padding-bottom")-s(this.main,"border-top-width")-s(this.main,"border-bottom-width");n=v.omit(n,"bottom")}n.top=Math.max(n.top,0),n.top=t.getScrollTop()+n.top,a.call(this,n)},e.prototype.attachLayout=function(e,t){var i=this.main;t=t||["bottom","left"];var n={width:p.page.getViewWidth(),height:p.page.getViewHeight(),scrollTop:p.page.getScrollTop(),scrollLeft:p.page.getScrollLeft()},r=e.getBoundingClientRect(),s=p.getOffset(e),d={layoutLeft:s.left,viewLeft:r.left,layoutTop:s.top,viewTop:r.top,layoutRight:s.right,viewRight:r.right,layoutBottom:s.bottom,viewBottom:r.bottom,width:s.width,height:s.height};if(this.strictWidth)i.style.minWidth=s.width+"px";var u=i.style.display;i.style.display="block",i.style.top="-5000px",i.style.left="-5000px";var h=p.getOffset(i);i.style.top="",i.style.left="",i.style.display=u;var c,f={target:d,layer:h,page:n};if("right"===t[0]||"left"===t[0])c=o(f,t);else c=l(f,t);a.call(this,c)},e.prototype.moveTo=function(e,t){this.selfLayout({top:e,left:t})},e.prototype.resize=function(){i.apply(this)},e.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED"))p.removeNode("ctrl-mask-"+this.helper.getId()),p.removeNode(this.main),g.prototype.dispose.apply(this,arguments)},m.register(e),e}),define("esui/Button",["require","underscore","./lib","./painters","./Control","./main"],function(require){function e(){r.apply(this,arguments)}function t(e){var t={};return t.borderTop=parseInt(n.getComputedStyle(e,"borderTopWidth"),10),t.borderBottom=parseInt(n.getComputedStyle(e,"borderBottomWidth"),10),t}var i=require("underscore"),n=require("./lib"),a=require("./painters"),r=require("./Control");return e.prototype={type:"Button",initOptions:function(e){var t={content:"",disabled:!1};if(i.extend(t,e),t.tagName=this.main.nodeName.toLowerCase(),null==t.text)t.text=n.getText(this.main);var a=this.main.firstChild;if(!t.content&&a&&"div"!==a.nodeName.toLowerCase())t.content=this.main.innerHTML;this.setProperties(t)},createMain:function(){return n.dom.createElement('<button type="button"></button>')},initEvents:function(){this.helper.delegateDOMEvent(this.main,"click")},repaint:a.createRepaint(r.prototype.repaint,a.style("width"),{name:"height",paint:function(e,i){if(i){var n=e.main;n.style.height=i+"px";var a=i;n.style.lineHeight=a+"px";var r=n.offsetHeight;if(r===i){var s=t(n),o=i+s.borderTop+s.borderBottom;n.style.height=o+"px"}}}},a.html("content"),{name:"disabled",paint:function(e,t){var i=e.main.nodeName.toLowerCase();if("button"===i||"input"===i)e.main.disabled=!!t}}),setContent:function(e){this.setProperties({content:e})}},n.inherits(e,r),require("./main").register(e),e}),define("ub-ria-ui/colorPicker/ColorPicker",["require","esui/lib","esui/main","esui/InputControl","./FullColorPicker","esui/Overlay","esui/TextBox","esui/Button","esui/painters","eoo","esui"],function(require){function e(e){var t=e.target,i=t.getValue();if(i.length>6)i=i.slice(0,6);i=new Array(6-i.length+1).join("0")+i;var n=this.helper.getPart("color-block");n.style.background="#"+i,this.hex=i,this.fire("change")}function t(e){var t=e.target.getValue();this.alpha=t,this.fire("change")}function i(){var e=this.helper.getPart("color-block");e.style.backgroundColor="#"+this.hex;var t=this.getChild("colorInput");if(t.setValue(this.hex),this.hasAlpha){var i=this.getChild("alphaInput");i.setValue(this.alpha)}}function n(){var e=this.getChild("layer");if(e){var t={};if(t.hex=this.getChild("colorInput").getValue(),this.hasAlpha)t.alpha=this.getChild("alphaInput").getValue();var i=e.getChild("colorPicker");if(i)i.setProperties(t)}}function a(){var e=this.helper.createPart("layer","div");d.addClass(e,this.helper.getPartClassName("layer"));var t=""+this.helper.getPartBeginTag("head","div")+this.helper.getPartBeginTag("title","div")+"颜色选择"+this.helper.getPartEndTag("title","div")+this.helper.getPartBeginTag("close-btn","div")+"关闭"+this.helper.getPartEndTag("close-btn","div")+this.helper.getPartEndTag("head","div")+'<div data-ui-type="FullColorPicker" data-ui-child-name="colorPicker"data-ui-default-mode="'+this.featureMode+'"data-ui-switchable="'+this.switchable+'"data-ui-has-alpha="'+this.hasAlpha+'"></div>'+this.helper.getPartBeginTag("foot-frame","div")+this.helper.getPartBeginTag("foot","div")+'<div class="'+this.helper.getPartClassName("ok-btn")+'"data-ui="type:Button;childName:btnOk;variants:primary">确定</div><div class="'+this.helper.getPartClassName("cancel-btn")+'"data-ui="type:Button;childName:btnCancel;variants:link">取消</div>'+this.helper.getPartEndTag("foot","div")+this.helper.getPartEndTag("foot-frame","div"),i=u.create("Overlay",{main:e,childName:"layer",content:t});this.addChild(i),i.appendTo(this.main),i.addState(this.displayMode);var n=i.getChild("colorPicker");if("attached"===this.displayMode){var a=this;n.on("change",function(){var e=this.getDisplayHex(),t=this.getDisplayAlpha();if(e!==a.hex||t!==a.alpha)a.setProperties({hex:e,alpha:t})})}else{var o=this.helper.getPart("close-btn");if(o)this.helper.addDOMEvent(o,"mousedown",s);var l=i.getChild("btnOk"),h=i.getChild("btnCancel");l.on("click",r,this),h.on("click",s,this)}return this.getChild("layer")}function r(){var e=this.getChild("layer"),t=e.getChild("colorPicker");this.setProperties({hex:t.getDisplayHex(),alpha:t.getDisplayAlpha()}),e.hide(),this.fire("submit")}function s(){var e=this.getChild("layer");e.hide()}function o(){var e=this.getChild("layer"),t={hasMask:!0,fixed:!1,autoClose:!1};if("attached"===this.displayMode)t={attachedDOM:this.helper.getId("color-block-frame"),attachedLayout:"bottom,left"};e.setProperties(t),e.show(),e.resize()}function l(){var e=this.getChild("layer");if(!e)e=a.call(this);if(e.isHidden())n.call(this),o.call(this);else e.hide()}var d=require("esui/lib"),u=require("esui/main"),h=require("esui/InputControl");require("./FullColorPicker"),require("esui/Overlay"),require("esui/TextBox"),require("esui/Button");var exports={};exports.type="ColorPicker",exports.initOptions=function(e){var t={displayMode:"attached",featureMode:"simple",switchable:!1,hex:"000000",alpha:100,hasAlpha:!0};if(d.extend(t,e),"false"===t.hasAlpha)t.hasAlpha=!1;this.setProperties(t)},exports.initStructure=function(){var e='<div class="${colorBlockFrameClass}" id="${colorBlockFrameId}"><div class="${colorBlockClass}" id="${colorBlockId}"></div></div><div class="${colorInputClass}" id="${colorInputId}" data-ui-type="TextBox"data-ui-child-name="colorInput" data-ui-hint="#" data-ui-hint-type="prefix"data-ui-width="auto"></div>';if(this.hasAlpha)e+='<div class="${alphaInputClass}" id="${alphaInputId}" data-ui-type="TextBox"data-ui-child-name="alphaInput" data-ui-hint="%" data-ui-hint-type="suffix"data-ui-width="auto"></div>';this.main.innerHTML=d.format(e,{colorBlockFrameClass:this.helper.getPartClassName("color-block-frame"),colorBlockFrameId:this.helper.getId("color-block-frame"),colorBlockClass:this.helper.getPartClassName("color-block"),colorBlockId:this.helper.getId("color-block"),colorInputClass:this.helper.getPartClassName("color-input"),colorInputId:this.helper.getId("color-input"),alphaInputClass:this.helper.getPartClassName("alpha-input"),alphaInputId:this.helper.getId("alpha-input")}),this.initChildren()},exports.initEvents=function(){this.$super(arguments);var i=this.helper.getPart("color-block");this.helper.addDOMEvent(i,"mousedown",function(e){e.stopPropagation()}),this.helper.addDOMEvent(i,"mousedown",l);var n=this.getChild("colorInput");n.on("input",e,this);var a=this.getChild("alphaInput");if(a)a.on("input",t,this)},exports.repaint=require("esui/painters").createRepaint(h.prototype.repaint,{name:["hex","alpha"],paint:function(e){i.call(e),n.call(e),e.fire("change")
}}),exports.setProperties=function(){var e=this.$super(arguments);if(e.hasOwnProperty("rawValue"))this.fire("change");return e},exports.getRawValue=function(){var e={};if(e.hex=this.hex,this.hasAlpha)e.alpha=this.alpha;return e};var c=require("eoo").create(h,exports);return require("esui").register(c),c}),define("ub-ria-ui/filter/Filter",["require","esui/lib","underscore","esui/Panel","eoo","esui/Label","esui/painters","esui/main"],function(require){function e(t,n){if(1===t.nodeType)if(n(t),t.childNodes)i.forEach(t.childNodes,function(t){e(t,n)})}var t=require("esui/lib"),i=require("underscore"),n=require("esui/Panel"),a=require("eoo");require("esui/Panel"),require("esui/Label");var exports={};exports.constructor=function(){this.$super(arguments)},exports.type="Filter",exports.datasource=[],exports.initOptions=function(e){var t={multiple:!1,defaultFirst:!1,custom:!1,customBtnLabel:"自定义"};if(i.extend(t,e),this.setProperties(t),"false"===this.multiple||"0"===this.multiple||""===this.multiple)this.multiple=!1;if("false"===this.defaultFirst||"0"===this.defaultFirst||""===this.defaultFirst)this.defaultFirst=!1;if("false"===this.custom||"0"===this.custom||""===this.custom)this.custom=!1;this.customElements=[]},exports.initStructure=function(){if(this.custom){var e=this;if(i.forEach(this.main.childNodes,function(t){if(1===t.nodeType)e.customElements.push(t)}),!this.customElements.length){var n='<div style="display:inline-block"><input type="text" style="width:50px"/><input type="button" data-role="ok" value="确定"/><input type="button" data-role="cancel" value="取消"/></div>',a=document.createElement("div");a.innerHTML=n,i.forEach(a.childNodes,function(t){if(1===t.nodeType)e.customElements.push(t)})}}var r='<div data-ui-type="Panel" data-ui-id="${filterPanelId}" class="${filterPanelStyle}"><label data-ui-type="Label" data-ui-id="${labelId}"></label><div data-ui-type="Panel" data-ui-id="${contentPanelId}" class="${contentPanelStyle}"></div></div>';this.main.innerHTML=t.format(r,{filterPanelStyle:this.helper.getPartClassName("panel"),filterPanelId:this.helper.getId("items-wrapper-panel"),labelId:this.helper.getId("items-label"),contentPanelId:this.helper.getId("items-panel"),contentPanelStyle:this.helper.getPartClassName("items-panel")}),this.initChildren(this.main)},exports.buildItems=function(e){var n='<a href="javascript:;" class="${style}" data-value="${value}">${text}</a> ',a="",r=this.helper;i.forEach(e,function(e){var i=e.selected?r.getPartClassName("item-active"):"";a+=t.format(n,{value:e.value,text:e.text,style:r.getPartClassName("item")+" "+i})},this);var s=this.getItemsPanel();s.main.innerHTML=a,this.custom&&this.buildCustomItem()},exports.buildItem=function(e){var i='<a href="javascript:;" class="${style}" data-value="${value}">${text}</a>',n=document.createElement("div");n.innerHTML=t.format(i,{value:e.value,text:e.text,style:this.helper.getPartClassName("item")});var a=n.firstChild;return t.insertBefore(a,this.customBtn),a},exports.buildCustomItem=function(){var e='<a href="javascript:;" class="${style}">${text}</a>',i=this.getItemsPanel();i.appendContent(t.format(e,{style:this.helper.getPartClassName("item-cmd"),text:this.customBtnLabel})),this.customBtn=i.main.lastChild},exports.getItemsPanel=function(){var e=this.helper.getId("items-panel");return this.viewContext.get(e)},exports.getItemsLabel=function(){var e=this.helper.getId("items-label");return this.viewContext.get(e)},exports.addCustomInput=function(n){var a=this;this.customInputs=[],i.forEach(this.customElements,function(i){e(i,function(e){var i=t.getAttribute(e,"data-role");if(!a.customOkBtn&&"ok"===i)a.customOkBtn=e;else if(!a.customCancelBtn&&"cancel"===i)a.customCancelBtn=e;else if("INPUT"===e.nodeName&&"text"===e.type)a.customInputs.push(e)}),t.insertBefore(i,n)}),n.style.display="none"},exports.removeCustemInput=function(){i.forEach(this.customElements,function(e){t.removeNode(e)}),this.customBtn.style.display="",i.each(this.customInputs,function(e){e.value&&(e.value="")})},exports.saveCustomItem=function(){var e=[],t=this,n=!1;if(i.each(this.customInputs,function(t){if(!t.value)return n=!0,!1;else return void e.push(t.value)}),n)return void alert("不允许输入为空，请输入完整！");var a={text:e.join("-"),value:e.join("-")};if(t.hasRepeatItemInDatasource(a))return void alert("存在重复的选择项，请重新输入！");else return void this.onsave(a,function(){t.datasource.push(a);var e=t.buildItem(a);t.removeCustemInput(),t.selectItem(a,e)})},exports.onsave=function(e,t){t()},exports.hasRepeatItemInDatasource=function(e){var t=!1;return i.each(this.datasource,function(i){if(i.value===e.value||i.text===e.text)return t=!0,!1;else return void 0}),t},exports.initEvents=function(){var e=this.getItemsPanel(),i=this;this.helper.addDOMEvent(e.main,"click",function(e){var n=e.target;if(n===i.customOkBtn)return void i.saveCustomItem();if(n===i.customCancelBtn)return void i.removeCustemInput();if("A"===n.nodeName){if(i.custom&&n===i.customBtn)return void i.addCustomInput(n);var a=t.getAttribute(n,"data-value"),r=t.getText(n),s={value:a,text:r};i.selectItem(s,n)}})},exports.removeItem=function(e){if(e&&this.getItemByValue(e.value)){var i=t.deepClone(this.datasource),n=this.getItemByValue(e.value,i);n.selected=!1,this.setProperties({datasource:i})}},exports.selectItem=function(e,n){var a=this.getItemByValue(e.value),r=!1;if(a.selected)a.selected=!1,r=!0;else a.selected=!0;var s=this.helper;if(!this.multiple){if(a===this.lastSelectedItem)a.selected=!1,this.lastSelectedItem=null;else this.lastSelectedItem&&(this.lastSelectedItem.selected=!1);var o=s.getPartClassName("item-active"),l=n.parentNode.childNodes;i.each(l,function(e){if(t.hasClass(e,o))return s.removePartClasses("item-active",e),!1;else return void 0})}if(r)s.removePartClasses("item-active",n);else s.addPartClasses("item-active",n);if(this.fire("change",{item:e,lastItem:this.lastSelectedItem,action:r?"remove":"add"}),this.multiple||!r)this.lastSelectedItem=a},exports.getItemByValue=function(e,t){var n;return t=t||this.datasource,i.each(t,function(t){if(t.value===e)n=t}),n},exports.repaint=require("esui/painters").createRepaint(n.prototype.repaint,{name:["datasource","value"],paint:function(e,t,n){if(i.isString(n))n=[n];if(e.lastSelectedItem=null,i.each(t,function(t){i.each(n,function(i){if(t.value===i)if(t.selected=!0,!e.multiple)e.lastSelectedItem=t})}),!e.multiple&&!e.lastSelectedItem&&e.defaultFirst&&t&&t[0])t[0].selected=!0,e.lastSelectedItem=t[0];e.buildItems(t)}},{name:["itemsLabel"],paint:function(e,t){t=t||e.label,e.getItemsLabel().setText(t)}}),exports.getSelectedItems=function(){var e=[];return i.each(this.datasource,function(t){if(t.selected)e.push(t)}),e},exports.getValue=function(){var e=this.getSelectedItems(),t=[];return i.each(e,function(e){t.push(e.value)}),t};var r=a.create(n,exports);return require("esui/main").register(r),r}),define("ub-ria-ui/filter/FilterResult",["require","esui/lib","underscore","esui/Panel","eoo","esui/Label","esui/painters","esui/main"],function(require){var e=require("esui/lib"),t=require("underscore"),i=require("esui/Panel"),n=require("eoo");require("esui/Panel"),require("esui/Label");var exports={};exports.constructor=function(){this.$super(arguments)},exports.type="FilterResult",exports.datasource=[],exports.initOptions=function(e){this.setProperties(e)},exports.initStructure=function(){var t='<div data-ui-type="Panel" data-ui-id="${filterPanelId}" class="${filterPanelStyle}"><label data-ui-type="Label" data-ui-id="${labelId}"></label><div data-ui-type="Panel" data-ui-id="${contentPanelId}" class="${contentPanelStyle}"></div></div>';this.main.innerHTML=e.format(t,{filterPanelStyle:this.helper.getPartClassName("panel"),filterPanelId:this.helper.getId("items-wrapper-panel"),labelId:this.helper.getId("items-label"),contentPanelId:this.helper.getId("items-panel"),contentPanelStyle:this.helper.getPartClassName("items-panel")}),this.initChildren(this.main)},exports.addItem=function(t){if(!this.getItemByValue(t.value)){var i=e.deepClone(this.datasource);t.selected=!0,i.push(t),this.setProperties({datasource:i})}},exports.removeItem=function(i){if(i&&this.getItemByValue(i.value)){var n=e.deepClone(this.datasource),a=this.getItemByValue(i.value,n);n=t.without(n,a),this.setProperties({datasource:n})}},exports.getSelectedItemsPanel=function(){var e=this.helper.getId("items-panel");return this.viewContext.get(e)},exports.getSelectedItemsLabel=function(){var e=this.helper.getId("items-label");return this.viewContext.get(e)},exports.initEvents=function(){var t=this.getSelectedItemsPanel(),i=this;this.helper.addDOMEvent(t.main,"click",function(t){var n=t.target;if(/^(?:A|I|SPAN)$/.test(n.nodeName)){n=/^A$/.test(n.nodeName)?n:n.parentNode;var a=e.getAttribute(n,"data-value"),r=e.getText(e.dom.first(n)),s={value:a,text:r,selected:!1};i.unselectItem(s,n)}})},exports.unselectItem=function(i,n){e.removeNode(n);var a=this.getItemByValue(i.value);this.datasource=t.without(this.datasource,a),this.fire("change",{item:i})},exports.getItemByValue=function(e,i){var n;return i=i||this.datasource,t.each(i,function(t){if(t.value===e)n=t}),n},exports.repaint=require("esui/painters").createRepaint(i.prototype.repaint,{name:["datasource","value"],paint:function(e,i,n){if(t.isString(n))n=[n];t.each(i,function(e){t.each(n,function(t){if(e.value===t)e.selected=!0})}),e.buildItems(i)}},{name:["label"],paint:function(e,t){e.getSelectedItemsLabel().setText(t)}}),exports.buildItems=function(i){var n='<a href="javascript:;" class="${style}" data-value="${value}"><span>${text}</span><span class="${iconClass} ${removeClass}"></span></a>',a="",r=this.helper;t.forEach(i,function(t){a+=e.format(n,{value:t.value,text:t.text,style:r.getPartClassName("item"),iconClass:r.getIconClass(),removeClass:r.getPartClassName("remove")})});var s=this.getSelectedItemsPanel();s.setContent(a)},exports.getSelectedItems=function(){var e=[];return t.each(this.datasource,function(t){if(t.selected)e.push(t)}),e},exports.getValue=function(){var e=this.getSelectedItems(),i=[];return t.each(e,function(e){i.push(e.value)}),i};var a=n.create(i,exports);return require("esui/main").register(a),a}),define("ub-ria-ui/helper/swfHelper",["require","underscore"],function(require){function e(e){if("number"==typeof e)e+="";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function t(e,t){var i,n,a=this[0];if(a.insertAdjacentHTML&&!r.opera)a.insertAdjacentHTML(e,t);else{if(i=a.ownerDocument.createRange(),e=e.toUpperCase(),"AFTERBEGIN"==e||"BEFOREEND"==e)i.selectNodeContents(a),i.collapse("AFTERBEGIN"==e);else n="BEFOREBEGIN"==e,i[n?"setStartBefore":"setEndAfter"](a),i.collapse(n);i.insertNode(i.createContextualFragment(t))}return a}function i(e,t){for(var i=e.length;i--;)if(e[i]===t)e.splice(i,1);return e}function n(e){if(null===e||void 0===e)return[];if(a.isArray(e))return e;if("number"!=typeof e.length||"string"==typeof e||"function"==typeof e)return[e];if(e.item){for(var t=e.length,i=new Array(t);t--;)i[t]=e[t];return i}return[].slice.call(e)}var a=require("underscore"),r=function(){var e=navigator.userAgent,t={isStrict:"CSS1Compat"==document.compatMode,isGecko:/gecko/i.test(e)&&!/like gecko/i.test(e),isWebkit:/webkit/i.test(e)};try{/(\d+\.\d+)/.test(external.max_version)&&(t.maxthon=+RegExp.$1)}catch(i){}switch(!0){case/msie (\d+\.\d+)/i.test(e):t.ie=document.documentMode||+RegExp.$1;break;case/chrome\/(\d+\.\d+)/i.test(e):t.chrome=+RegExp.$1;break;case/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e):t.safari=+(RegExp.$1||RegExp.$2);break;case/firefox\/(\d+\.\d+)/i.test(e):t.firefox=+RegExp.$1;break;case/opera(?:\/| )(\d+(?:\.\d+)?)(.+?(version\/(\d+(?:\.\d+)?)))?/i.test(e):t.opera=+(RegExp.$4||RegExp.$1)}return t}(),s={};return s.version=function(){var e=navigator;if(e.plugins&&e.mimeTypes.length){var t=e.plugins["Shockwave Flash"];if(t&&t.description)return t.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0"}else if(window.ActiveXObject&&!window.opera)for(var i=12;i>=2;i--)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);if(n){var a=n.GetVariable("$version");return a.replace(/WIN/g,"").replace(/,/g,".")}}catch(r){}}(),s.createHTML=function(t){t=t||{};var i,n,a,r,o,l,d=s.version,u=t.ver||"6.0.0",h={};for(r in t)h[r]=t[r];if(t=h,d){for(d=d.split("."),u=u.split("."),a=0;3>a&&(i=parseInt(d[a],10),n=parseInt(u[a],10),!(i>n));a++)if(n>i)return""}else return"";var c=t.vars,f=["classid","codebase","id","width","height","align"];if(t.align=t.align||"middle",t.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",t.codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",t.movie=t.url||"",delete t.vars,delete t.url,"string"==typeof c)t.flashvars=c;else{var p=[];for(r in c)l=c[r],p.push(r+"="+encodeURIComponent(l));t.flashvars=p.join("&")}var m=["<object "];for(a=0,o=f.length;o>a;a++)l=f[a],m.push(" ",l,'="',e(t[l]),'"');m.push(">");var g={wmode:1,scale:1,quality:1,play:1,loop:1,menu:1,salign:1,bgcolor:1,base:1,allowscriptaccess:1,allownetworking:1,allowfullscreen:1,seamlesstabbing:1,devicefont:1,swliveconnect:1,flashvars:1,movie:1};for(r in t)if(l=t[r],r=r.toLowerCase(),g[r]&&(l||l===!1||0===l))m.push('<param name="'+r+'" value="'+e(l)+'" />');t.src=t.movie,t.name=t.id,delete t.id,delete t.movie,delete t.classid,delete t.codebase,t.type="application/x-shockwave-flash",t.pluginspage="http://www.macromedia.com/go/getflashplayer",m.push("<embed");var v;for(r in t)if(l=t[r],l||l===!1||0===l){if(new RegExp("^salign$","i").test(r)){v=l;continue}m.push(" ",r,'="',e(l),'"')}if(v)m.push(' salign="',e(v),'"');return m.push("></embed></object>"),m.join("")},s.create=function(e,i){e=e||{};var n=s.createHTML(e)||e.errorMessage||"";if(i&&"string"==typeof i)i=document.getElementById(i);t(i||document.body,"beforeEnd",n)},s.getMovie=function(e){var t,a=document[e];return 9==r.ie?a&&a.length?1==(t=i(n(a),function(e){return"embed"!=e.tagName.toLowerCase()})).length?t[0]:t:a:a||window[e]},s.Proxy=function(e,t,i){var n,a=this,r=this._flash=s.getMovie(e);if(!t)return this;else return void(n=setInterval(function(){try{if(r[t])if(a._initialized=!0,clearInterval(n),i)i()}catch(e){}},100))},s.Proxy.prototype.getFlash=function(){return this._flash},s.Proxy.prototype.isReady=function(){return!!this._initialized},s.Proxy.prototype.call=function(e){try{var t=this.getFlash(),i=Array.prototype.slice.call(arguments);if(i.shift(),t[e])t[e].apply(t,i)}catch(n){}},s}),define("esui/Dialog",["require","./Button","./Panel","./lib","./controlHelper","./Control","./main"],function(require){function e(){v.apply(this,arguments)}function t(e){var t=e.main;if(t){for(var i,n=m.getChildren(t),a=n.length,r={};a--;)if(i=n[a].getAttribute("data-role"))r[i]=n[a];e.roles=r}}function i(e,t){var i="title",n="close-icon",a='<div class="${clsClass}" id="${clsId}"></div>',r="",s=[];if(e.closeButton)s=g.getPartClasses(e,n),s.push(e.helper.getIconClass("close")),r=m.format(a,{clsId:g.getId(e,n),clsClass:s.join(" ")});var o='<div id="${titleId}" class="${titleClass}"></div>${closeIcon}',l=[].concat(g.getPartClasses(e,"head")),d={titleId:g.getId(e,i),titleClass:g.getPartClasses(e,i).join(" "),closeIcon:r},u=m.format(o,d);if(t)e.title=t.innerHTML;else if(t=document.createElement("div"),e.main.firstChild)m.insertBefore(t,e.main.firstChild);else e.main.appendChild(t);t.innerHTML=u,m.addClasses(t,l);var h={main:t,renderOptions:e.renderOptions},c=y.create("Panel",h);return c.render(),e.addChild(c,"head"),c}function n(){var e=this.fire("beforeclose");if(e.isDefaultPrevented())return!1;if(this.hide(),this.fire("close"),this.closeOnHide)this.dispose()}function a(){var e=m.page,t=this.main,i=this.left,n=this.top,a=this.right,r=this.bottom;if(void 0===i||null===i)i=(e.getViewWidth()-t.offsetWidth)/2;if(0>i)i=0;if(void 0===n||null===n)n=(e.getViewHeight()-t.offsetHeight)/2;if(n=Math.max(n,0),t.style.left=i+"px",t.style.top=e.getScrollTop()+n+"px",void 0!==a&&null!==a)t.style.right=a+"px";if(void 0!==r&&null!==r)t.style.bottom=r+"px";if("auto"===this.height){var s=e.getViewHeight()-n;t.style.height=s+"px";var o=this.getBody().main,l=this.getHead().main,d=parseInt(m.getStyle(l,"height"),10);o.style.height=s-d+"px"}}function r(e,t){var i=e,n=e.getChild("head").main;if(t===!0)g.removeDOMEvent(i,n,"mousedown",o);else g.addDOMEvent(i,n,"mousedown",o)}function s(e,t,i){if(i)g.addDOMEvent(e,t,"selectstart",function(e){e.preventDefault()});else g.removeDOMEvent(e,t,"selectstart")}function o(e){var t=e.button,i=!1;if(!e.which&&1===t||1===e.which)i=!0;if(i){var n=document;this.addState("dragging"),s(this,this.main,!0),g.addDOMEvent(this,n,"mousemove",l),g.addDOMEvent(this,n,"mouseup",d),m.event.getMousePosition(e),this.dragStartPos={x:e.pageX,y:e.pageY}}}function l(e){var t=this;m.event.getMousePosition(e);var i={x:e.pageX-t.dragStartPos.x,y:e.pageY-t.dragStartPos.y};t.dragStartPos={x:e.pageX,y:e.pageY};var n=t.main,a=m.getOffset(n),r=a.left+i.x,s=a.top+i.y,o=m.page.getWidth(),l=m.page.getHeight(),d=m.getOffset(n);if(0>s)s=0;else if(s>l-d.height)s=l-d.height;if(0>r)r=0;else if(r>o-d.width)r=o-d.width;n.style.left=r+"px",n.style.top=s+"px"}function d(){g.removeDOMEvent(this,document,"mousemove",l),g.removeDOMEvent(this,document,"mouseup",d),this.removeState("dragging"),s(this,this.main,!1)}function u(e,t){var i=f(e),n=[e.helper.getPrefixClass("mask"),e.helper.getPrefixClass("mask-page")],a=g.getPartClasses(e,"mask").join(" ");n.push(a),i.className=n.join(" "),i.style.display="block",i.style.zIndex=t}function h(e){var t=f(e);if("undefined"!=typeof t)m.removeNode(t)}function c(e){var t=document.createElement("div");t.id=e,document.body.appendChild(t)}function f(e){var t=g.getId(e),i=_+"-"+t,n=m.g(i);if(!n)c(i);return m.g(i)}require("./Button"),require("./Panel");var p,m=require("./lib"),g=require("./controlHelper"),v=require("./Control"),y=require("./main"),_="ctrl-mask";return e.OK_TEXT="确定",e.CANCEL_TEXT="取消",e.prototype={type:"Dialog",initOptions:function(e){t(e);var i={closeButton:!0,closeOnHide:!0,draggable:!1,mask:!0,title:"我是标题",content:"<p>我是内容</p>",defaultFoot:'<div class="'+this.helper.getPartClassName("ok-btn")+'" data-ui="type:Button;id:btnFootOk;childName:btnOk;variants:primary;">确定</div> <div class="'+this.helper.getPartClassName("cancel-btn")+'" data-ui="type:Button;id:btnFootCancel;childName:btnCancel;variants:link">取消</div>',needFoot:!0,roles:{}};if(m.extend(i,e),"false"===e.closeOnHide)i.closeOnHide=!1;if("false"===e.closeButton)i.closeButton=!1;if("false"===e.mask)i.mask=!1;if("false"===e.needFoot)i.needFoot=!1;if(i.needFoot)if(!i.foot)i.foot=i.defaultFoot;this.setProperties(i)},initStructure:function(){var e=this.main;if(e.parentNode&&"body"!==e.parentNode.nodeName.toLowerCase())document.body.appendChild(e);if(this.addState("hidden"),i(this,this.roles.title),this.createBF("body",this.roles.content),this.needFoot)this.createBF("foot",this.roles.foot)},initEvents:function(){if(this.closeButton){var e=m.g(g.getId(this,"close-icon"));if(e)g.addDOMEvent(this,e,"click",m.curry(n,this))}},createBF:function(e,t){if(t)this.content=t.innerHTML;else if(t=document.createElement("div"),"body"===e){var i=this.getChild("head");if(i)m.insertAfter(t,i.main);else if(this.main.firstChild)m.insertBefore(t,i,this.main.firstChild);else this.main.appendChild(t)}else this.main.appendChild(t);m.addClasses(t,g.getPartClasses(this,e+"-panel"));var n={main:t,renderOptions:this.renderOptions},a=y.create("Panel",n);return a.render(),this.addChild(a,e),a},repaint:g.createRepaint(v.prototype.repaint,{name:"height",paint:function(e,t){if("auto"===t)e.main.style.height="auto";else if(t)e.main.style.height=t+"px";if(e.isShow)a.apply(e)}},{name:"width",paint:function(e,t){if("auto"===t)e.main.style.width="auto";else if(t)e.main.style.width=t+"px";if(e.isShow)a.apply(e)}},{name:"title",paint:function(e,t){var i=g.getId(e,"title");m.g(i).innerHTML=t}},{name:"content",paint:function(e,t){if(t){var i='<div class="${class}" id="${id}">${content}</div>',n=e.getBody(),a=g.getId(e,"body"),r=g.getPartClasses(e,"body"),s={"class":r.join(" "),id:a,content:t};n.setContent(m.format(i,s))}}},{name:"foot",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',n=g.getId(e,"foot"),a=g.getPartClasses(e,"foot"),r=e.getFoot();if(null==t){if(e.needFoot=!1,r)e.removeChild(r)}else{e.needFoot=!0;var s={"class":a.join(" "),id:n,content:t};if(!r)r=e.createBF("foot");r.setContent(m.format(i,s))}}},{name:"draggable",paint:function(e,t){var i=!1;if(t)e.addState("draggable");else e.removeState("draggable"),i=!0;r(e,i)}}),getBody:function(){return this.getChild("body")},getHead:function(){return this.getChild("head")},getFoot:function(){return this.getChild("foot")},show:function(){if(this.isShow)return void this.resize();var e=this.mask;if(g.isInStage(this,"INITED"))this.render();else if(g.isInStage(this,"DISPOSED"))return;p=m.curry(a,this),g.addDOMEvent(this,window,"resize",a),this.setWidth(this.width),this.removeState("hidden"),a.apply(this);for(var t=1203,i=document.body.children,n=0,r=0,s=i.length;s>r;r++)if(1===i[r].nodeType)if(m.hasClass(i[r],this.helper.getPrimaryClassName())&&!m.hasClass(i[r],this.helper.getPrimaryClassName("hidden")))n++;if(t+=10*n,this.main.style.zIndex=t,e)u(this,t-1);this.fire("show"),this.isShow=!0},hide:function(){if(this.isShow){g.removeDOMEvent(this,window,"resize",a);var e=this.mask;if(this.addState("hidden"),e)h(this)}this.fire("hide"),this.isShow=!1},setTitle:function(e){this.setProperties({title:e})},setContent:function(e){this.setProperties({content:e})},setFoot:function(e){this.setProperties({foot:e})},setHeight:function(e){this.setProperties({height:e})},setWidth:function(e){this.setProperties({width:e})},resize:function(){a.apply(this)},dispose:function(){if(!this.helper.isInStage("DISPOSED")){this.hide();var e=this.main.id;m.removeNode(e),v.prototype.dispose.apply(this,arguments)}}},e.confirm=function(t){function i(e,t){e.fire(t),e.dispose()}var n="dialog-confirm",a=m.encodeHTML(t.title)||"",r=m.encodeHTML(t.content)||"",s=m.encodeHTML(t.okText)||e.OK_TEXT,o=m.encodeHTML(t.cancelText)||e.CANCEL_TEXT,l={type:"confirm",variants:"confirm",title:""};m.extend(l,t);var d=['<div class="${prefix}-icon ${prefix}-icon-${type}"><span class="${icon}"></span></div>','<div class="${prefix}-text">${content}</div>'].join("");l.id=g.getGUID(n),l.closeButton=!1,l.mask=!0,l.alwaysTop=!0;var u=l.type;l.type=null;var h=y.create("Dialog",l);h.appendTo(document.body),h.show();var c=h.getFoot().getChild("btnOk"),f=h.getFoot().getChild("btnCancel");if(c.setContent(s),f.setContent(o),h.setTitle(a),h.setContent(m.format(d,{type:u,content:r,prefix:h.helper.getPrimaryClassName(),icon:h.helper.getIconClass("question-circle")})),l.btnHeight)c.set("height",l.btnHeight),f.set("height",l.btnHeight);if(l.btnWidth)c.set("width",l.btnWidth),f.set("width",l.btnWidth);return c.on("click",m.curry(i,h,"ok")),f.on("click",m.curry(i,h,"cancel")),h},e.alert=function(t){function i(e,t){e.fire("ok"),t.dispose(),e.dispose()}var n="dialog-alert",a="dialog-alert-ok",r=m.encodeHTML(t.title)||"",s=m.encodeHTML(t.content)||"",o=m.encodeHTML(t.okText)||e.OK_TEXT,l={type:"warning",variants:"alert",title:""};m.extend(l,t);var d=['<div class="${prefix}-icon ${prefix}-icon-${type}"><span class="${icon}"></span></div>','<div class="${prefix}-text">${content}</div>'].join(""),u=g.getGUID(n);l.id=u,l.closeButton=!1,l.mask=!0,l.alwaysTop=!0;var h=l.type;l.type=null;var c=y.create("Dialog",l);c.appendTo(document.body),c.setTitle(r),c.setContent(m.format(d,{type:h,content:s,prefix:c.helper.getPrimaryClassName(),icon:c.helper.getIconClass("exclamation-circle")})),c.setFoot('<div class="'+c.helper.getPartClassName("ok-btn")+'" data-ui="type:Button;childName:okBtn;id:'+u+"-"+a+';variants:primary;">'+o+"</div>"),c.show();var f=c.getFoot().getChild("okBtn");if(f.on("click",m.curry(i,c,f)),l.btnHeight)f.set("height",l.btnHeight);if(l.btnwidth)f.set("width",l.btnwidth);return c},m.inherits(e,v),y.register(e),e}),define("ub-ria-ui/LightBox",["require","esui/lib","underscore","eoo","esui/Dialog","esui/Control","esui/controlHelper","./helper/swfHelper","esui","esui/painters","esui/main"],function(require){function e(e){return l.createHTML({id:e.id||"preview-fla",url:e.url,width:e.width,height:e.height,wmode:"transparent"})}function t(e,t){return l.createHTML({id:e.id||"preview-flv",url:t,width:e.width,height:e.height,wmode:"transparent",vars:"play_url="+e.url})}function i(e){return n.format(u,{id:e.id||"preview-video",title:e.title,src:e.url,width:e.width,height:e.height})}var n=require("esui/lib"),a=require("underscore"),r=require("eoo"),s=(require("esui/Dialog"),require("esui/Control")),o=require("esui/controlHelper"),l=require("./helper/swfHelper"),d="暂不支持该格式预览",u=['<video id="${id}" title="${title}" width="${width}" height="${height}" src="${src}" autoplay="autoplay">',"该浏览器暂不支持此格式视频预览","</video>"].join(""),h='<div class="${loadedFailtureStyle}">加载图片失败</div>',exports={};exports.constructor=function(){this.$super(arguments),this.dialog=null},exports.type="LightBox",exports.initOptions=function(e){var t={currentIndex:0,width:"auto",height:"auto",dialogVariants:"lightbox",loadingStyle:this.helper.getPartClassName("media-loading"),loadedFailtureStyle:this.helper.getPartClassName("media-loaded-failture")};a.extend(t,e),this.setProperties(t)},exports.initStructure=function(){var e={id:o.getGUID("dialog-lightbox-foot"),type:"warning",content:"",closeButton:!0,mask:!0,alwaysTop:!0,closeOnHide:!1,width:"auto"};a.extend(e,{title:this.title||"",foot:this.foot||"",draggable:this.draggable||!1,needFoot:this.needFoot||!1,variants:this.dialogVariants});var t=require("esui").create("Dialog",e);t.appendTo(document.body),this.dialog=t},exports.initEvents=function(){this.initCarousel();var e=n.g(o.getId(this.dialog,"link-left")),t=n.g(o.getId(this.dialog,"link-right")),i=this;if(o.addDOMEvent(this.dialog,e,"click",function(){i.showPreviousMedia()}),o.addDOMEvent(this.dialog,t,"click",function(){i.showNextMedia()}),this.group){var r=this.groupContainerId?n.g(this.groupContainerId):document.body;i.helper.addDOMEvent(r,"click",function(e){for(var t=e.target;t!==document.body&&!n.hasAttribute(t,"data-lightbox-group");)t=t.parentNode;if(n.hasAttribute(t,"data-lightbox-group")){e.preventDefault();for(var r=document.querySelectorAll('[data-lightbox-group="'+i.group+'"]'),s=0;s<r.length&&r[s]!==t;s++);var o=[];a.each(r,function(e){var t={url:n.getAttribute(e,"href")},i=n.getAttribute(e,"data-lightbox-type");i&&(t.type=i),o.push(t)}),i.datasource=o,i.show({currentIndex:s})}})}},exports.initCarousel=function(){var e=['<div id="${mediaId}" class="${mediaStyle}"></div>','<div id="${linkId}" class="${linkStyle}">','<a href="javascript:;" id="${leftLinkId}" class="${leftLinkStyle}"></a>','<a href="javascript:;" id="${rightLinkId}" class="${rightLinkStyle}"></a>',"</div>"].join(""),t=this.dialog.getBody(),i=this.dialog.helper,a=i.getPartClassName("lightbox-content-link-left")+" "+i.getIconClass(),r=i.getPartClassName("lightbox-content-link-right")+" "+i.getIconClass();t.setContent(n.format(e,{mediaId:i.getId("media"),mediaStyle:i.getPartClassName("lightbox-content-media"),linkId:i.getId("link"),linkStyle:i.getPartClassName("lightbox-content-link"),leftLinkId:i.getId("link-left"),leftLinkStyle:a,rightLinkId:i.getId("link-right"),rightLinkStyle:r}))},exports.mediaContainer=function(){return n.g(o.getId(this.dialog,"media"))},exports.show=function(e){e&&this.setProperties(e);var t=n.g(o.getId(this.dialog,"link"));t.style.display=this.datasource.length<=1?"none":"",this.showMedia()},exports.hide=function(){this.dialog.hide()},exports.setContent=function(e){this.setProperties({datasource:e})},exports.showMedia=function(){var e=this.datasource[this.currentIndex];if(this.showLoading(),!e.type)if(/\.(?:jpg|png|gif|jpeg|bmp)$/i.test(e.url))e.type="image";else if(/\.swf$/i.test(e.url))e.type="flash";else if(/\.(?:mp4|flv|mov|mkv|mpg|avi|rmvb|rm|ogg|wmv|mp3|wma|mid)$/i.test(e.url))e.type="video";this.preview(e)},exports.showLoading=function(){n.addClass(this.dialog.main,this.helper.getPartClassName("loading"))},exports.hideLoading=function(){n.removeClass(this.dialog.main,this.helper.getPartClassName("loading"))},exports.preview=function(e){if(e){var t=e.type;e.id=e.id||"preiew-"+Math.random(),e.width=e.width||this.width,e.height=e.height||this.height;var i=t.charAt(0).toUpperCase()+t.substring(1).toLowerCase();(this["preview"+i]||this.previewNotSupported).call(this,e)}},exports.previewImage=function(e){var t=this,i=new Image;i.onload=function(){t.hideLoading(),t.mediaContainer().innerHTML="",t.mediaContainer().appendChild(i),t.dialog.show(),i.onload=i.onerror=null},i.onerror=function(){t.hideLoading(),t.mediaContainer().innerHTML=n.format(h,t),i.onload=i.onerror=null,t.dialog.show()},i.src=e.url,e.width&&(i.style.width=e.width+"px"),e.height&&(i.style.height=e.height+"px")},exports.previewFlash=function(t){var i=e(t);this.hideLoading(),this.mediaContainer.innerHTML=i,this.dialog.show()},exports.previewVideo=function(e){var n=e.url;if(/\.flv$/.test(n))html=t(e,this.swfPath);else if(/\.mp4|\.mov/.test(n))html=i(e);this.hideLoading(),this.mediaContainer().innerHTML=html,this.dialog.show()},exports.previewNotSupported=function(){this.hideLoading(),this.mediaContainer().innerHTML=d,this.dialog.show()},exports.showNextMedia=function(){this.currentIndex=++this.currentIndex%this.datasource.length,this.showMedia()},exports.showPreviousMedia=function(){this.currentIndex=(--this.currentIndex+this.datasource.length)%this.datasource.length,this.showMedia()},exports.repaint=require("esui/painters").createRepaint(s.prototype.repaint,{name:["title"],paint:function(e,t){e.dialog.setTitle(t||"")}});var c=r.create(s,exports);return require("esui/main").register(c),c}),define("esui/Select",["require","underscore","./lib","./InputControl","./Layer","./painters","./main"],function(require){function e(e){for(var t=o.event.getTarget(e),i=this.layer.getElement();t&&t!==i&&!o.hasAttribute(t,"data-index");)t=t.parentNode;if(t&&!this.helper.isPart(t,"item-disabled")){var n=t.getAttribute("data-index");this.set("selectedIndex",+n),this.layer.hide()}}function t(){d.apply(this,arguments)}function i(){l.apply(this,arguments),this.layer=new t(this)}function n(e){if(null==e.selectedIndex&&null==e.rawValue&&null==e.value)e.selectedIndex=-1;if(null!=e.rawValue)e.value=null,e.selectedIndex=null;else if(null!=e.value)e.selectedIndex=null;if(null==e.selectedIndex&&(null!=e.value||null!=e.rawValue)){e.selectedIndex=-1;for(var t=e.rawValue||e.value,i=0;i<e.datasource.length;i++)if(e.datasource[i].value==t){e.selectedIndex=i;break}delete e.value,delete e.rawValue}if(e.selectedIndex<0||e.selectedIndex>=e.datasource.length)if(e.emptyText)e.selectedIndex=-1;else{e.selectedIndex=-1;for(var i=0;i<e.datasource.length;i++)if(!e.datasource[i].disabled){e.selectedIndex=i;break}}}function a(){this.fire("layerrendered",{layer:this.layer})}function r(e){var t=e.helper.getPart("text"),i=-1===e.selectedIndex?null:e.datasource[e.selectedIndex],n=e.getDisplayHTML(i);t.innerHTML=n,t.title=n;var a=e.layer.getElement(!1);if(a)e.layer.syncState(a)}var s=require("underscore"),o=require("./lib"),l=require("./InputControl"),d=require("./Layer");o.inherits(t,d),t.prototype.nodeName="ol",t.prototype.render=function(e){for(var t="",i=0;i<this.control.datasource.length;i++){var n=this.control.datasource[i],a=this.control.helper.getPartClasses("item");if(n.disabled)a.push.apply(a,this.control.helper.getPartClasses("item-disabled"));t+='<li data-index="'+i+'" class="'+a.join(" ")+'">',t+=this.control.getItemHTML(n),t+="</li>"}e.innerHTML=t},t.prototype.initBehavior=function(t){var i=this.control.helper;i.addDOMEvent(t,"click",e),o.addClass(t,i.getPrefixClass("dropdown"))},t.prototype.syncState=function(e){for(var t=this.control.helper.getPartClasses("item-selected"),i=o.getChildren(e),n=i.length-1;n>=0;n--){var a=i[n];if(n===this.control.selectedIndex)o.addClasses(a,t);
else o.removeClasses(a,t)}},t.prototype.dock={strictWidth:!0},i.prototype.type="Select",i.prototype.initOptions=function(e){var t={datasource:[],tabIndex:0},i={};if(s.extend(i,t,e),"select"===this.main.nodeName.toLowerCase()){i.datasource=[];for(var n=this.main.getElementsByTagName("option"),a=0,r=n.length;r>a;a++){var o=n[a],l={name:o.name||o.text,value:o.value};if(o.disabled)l.disabled=!0;if(i.datasource.push(l),o.selected&&null==i.selectedIndex&&null==i.value&&null==i.rawValue)i.selectedIndex=o.value?a:0}this.helper.extractOptionsFromInput(this.main,i)}if("string"==typeof i.selectedIndex)i.selectedIndex=+i.selectedIndex;this.setProperties(i)},i.prototype.itemTemplate="<span>${text}</span>",i.prototype.getItemHTML=function(e){var t={text:s.escape(e.name||e.text),value:s.escape(e.value)};return o.format(this.itemTemplate,t)},i.prototype.displayTemplate="${text}",i.prototype.getDisplayHTML=function(e){if(!e)return s.escape(this.emptyText||"");var t={text:s.escape(e.name||e.text),value:s.escape(e.value)};return o.format(this.displayTemplate,t)},i.prototype.initStructure=function(){var e=this.helper,t="arrow",i="span",n=this.main;if("select"===n.nodeName.toLowerCase())e.replaceMain(),n=this.main;n.tabIndex=this.tabIndex;var a=e.createPart("inner","div");a.innerHTML=e.getPartHTML("text",i)+e.getPartHTML(t,i),n.appendChild(a),o.addClass(e.getPart(t),e.getIconClass())},i.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",s.bind(this.layer.toggle,this.layer)),this.layer.on("rendered",s.bind(a,this))},i.prototype.getRawValue=function(){if(this.selectedIndex<0)return null;var e=this.datasource[this.selectedIndex];return e?e.value:null};var u=require("./painters");return i.prototype.repaint=u.createRepaint(l.prototype.repaint,u.style("width"),u.style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},{name:["selectedIndex","emptyText","datasource"],paint:r},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),i.prototype.updateDatasource=function(e){if(!e)e=this.datasource;this.datasource=e;var t={name:"datasource"};this.repaint([t],{datasource:t})},i.prototype.setProperties=function(e){if(null==e.datasource)e.datasource=this.datasource;if(null==e.value&&null==e.rawValue&&null==e.selectedIndex&&e.datasource===this.datasource)e.selectedIndex=this.selectedIndex;if(!e.hasOwnProperty("emptyText"))e.emptyText=this.emptyText;n(e);var t=l.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("selectedIndex"))this.fire("change");return t},i.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;l.prototype.dispose.apply(this,arguments)}},i.prototype.getSelectedItem=function(){return this.get("datasource")[this.get("selectedIndex")]},o.inherits(i,l),require("./main").register(i),i}),define("esui/MonthView",["require","./Button","./Select","./Panel","./lib","./controlHelper","./Control","./main","moment"],function(require){function e(){A.apply(this,arguments)}function t(e){for(var t=e.viewRange||e.range,i=[],n=t.end.getFullYear(),a=t.begin.getFullYear();n>=a;a++)i.push({text:a,value:a});return i}function i(e,t){var i=e.viewRange||e.range,n=[],a=11,r=0;if(t===i.begin.getFullYear())r=i.begin.getMonth();if(t===i.end.getFullYear())a=i.end.getMonth();for(;a>=r;r++)n.push({text:r+1,value:r});return n}function n(e){var t=['<div class="${headClass}"><table><tr>','<td class="${monthBackTdClass}">','<div class="${monthBackClass}"',' data-ui-type="Button"',' data-ui-child-name="monthBack"',' data-ui-id="${monthBackId}"','><span class="${monthBackIcon}"></span></div>',"</td>",'<td class="${yearSelectTdClass}">','<div class="${yearSelectClass}"',' data-ui="type:Select;childName:yearSel;variants:compact;',' id:${yearSelId};"></div>',"</td>",'<td class="${selectLabelClass}">',"<div>年</div>","</td>",'<td class="${monthSelectTdClass}">','<div class="${monthSelectClass}"',' data-ui="type:Select;childName:monthSel;variants:compact;',' id:${monthSelId};"></div>',"</td>",'<td class="${selectLabelClass}">',"<div>月</div>","</td>",'<td class="${monthForTdClass}">','<div class="${monthForClass}"',' data-ui-type="Button"',' data-ui-child-name="monthForward"',' data-ui-id="${monthForwardId}"','><span class="${monthForwardIcon}"></span></div>',"</td>","</tr></table></div>",'<div id="${monthMainId}" class="${monthMainClass}"></div>'];return t=t.join(""),V.format(t,{headClass:e.helper.getPartClassName("head"),monthBackId:e.helper.getId("monthBack"),monthBackIcon:e.helper.getIconClass("caret-left"),monthForwardId:e.helper.getId("monthForward"),monthForwardIcon:e.helper.getIconClass("caret-right"),yearSelId:e.helper.getId("yearSel"),monthSelId:e.helper.getId("monthSel"),monthMainId:e.helper.getId("monthMain"),monthMainClass:e.helper.getPartClassName("month"),monthBackClass:e.helper.getPartClassName("month-back"),monthForClass:e.helper.getPartClassName("month-forward"),yearSelectClass:e.helper.getPartClassName("year-select"),monthSelectClass:e.helper.getPartClassName("month-select"),monthBackTdClass:e.helper.getPartClassName("month-back-td"),monthForTdClass:e.helper.getPartClassName("month-forward-td"),yearSelectTdClass:e.helper.getPartClassName("year-select-td"),monthSelectTdClass:e.helper.getPartClassName("month-select-td"),selectLabelClass:e.helper.getPartClassName("select-label")})}function a(e){var t=[];if("multi"===e.mode)t.push("");t=t.concat(["一","二","三","四","五","六","日"]);var i='<table border="0" cellpadding="0" cellspacing="0" class="${className}"><thead><tr>',n=[];n.push(V.format(i,{className:e.helper.getPartClassName("month-main")}));for(var a='<td id="${id}" data-index="${index}" class="${className}">${text}</td>',s=e.helper.getPartClassName("month-title"),o=e.helper.getId("month-title"),l=e.helper.getPartClassName("month-select-all"),d=t.length,u=0;d>u;u++)n.push(V.format(a,{className:""===t[u]?l:s,text:t[u],index:u,id:o+"-"+u}));n.push("</tr></thead><tbody><tr>");var h='<td data-year="${year}" data-month="${month}" data-date="${date}" class="${className}" id="${id}">${date}</td>',c=e.helper.getPartClassName("month-row-select"),f=e.helper.getId("row-select"),p=0,m='<td id="${id}" class="'+c+'">&gt;</td>',g=0,v=e.year,y=e.month,_=new Date(v,y,1),x=new Date(v,y+1,1),M=1-(_.getDay()+6)%7;_.setDate(M);var b=e.helper.getPartClassName("month-item"),w=e.helper.getPartClassName("month-item-today"),L=e.helper.getPartClassName("month-item-virtual"),C=e.helper.getPartClassName("month-item-disabled"),T=e.range;if("multi"===e.mode)n.push(V.format(m,{id:f+"-"+p++}));for(;x-_>0||g%7!==0;){if(M>1&&g%7===0)if(n.push("</tr><tr>"),"multi"===e.mode)n.push(V.format(m,{id:f+"-"+p++}));var D=_.getMonth()!==y,Y=!1;if(_<T.begin)Y=!0;else if(_>T.end)Y=!0;var k=b;if(D)k+=" "+L;else if(R().isSame(_,"day"))k+=" "+w;if(Y)k+=" "+C;n.push(V.format(h,{year:_.getFullYear(),month:_.getMonth(),date:_.getDate(),className:k,id:r(e,_)})),_=new Date(v,y,++M),g++}return e.rowTagNum=p,n.push("</tr></tbody></table>"),n.join("")}function r(e,t){return e.helper.getId(t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate())}function s(e){for(var t=e.target||e.srcElement,i=$.getPartClasses(this,"month-select-all"),n=$.getPartClasses(this,"month-title"),a=$.getPartClasses(this,"month-item"),r=$.getPartClasses(this,"month-row-select"),s=$.getPartClasses(this,"month-item-virtual"),o=$.getPartClasses(this,"month-item-disabled");t&&t!==document.body;){if(V.hasClass(t,a[0])&&!V.hasClass(t,s[0])&&!V.hasClass(t,o[0]))return void L(this,t);else if("multi"===this.mode){if(V.hasClass(t,r[0]))return void g(this,t);if(V.hasClass(t,n[0]))return void c(this,t);if(V.hasClass(t,i[0]))return void y(this)}t=t.parentNode}}function o(e){var t=e.rawValue;e.viewValue={};for(var i=0;i<t.length;i++){var n=t[i],a=n.getFullYear(),r=n.getMonth(),s=n.getDate(),o=a+"-"+r+"-"+s;e.viewValue[o]={isSelected:!0,value:new Date(a,r,s)}}}function l(e,t){var i=$.getPartClasses(e,"month-item-virtual"),n=$.getPartClasses(e,"month-item-disabled");if(!V.hasClass(t,i[0])&&!V.hasClass(t,n[0]))return 1;else if(V.hasClass(t,i[0])&&!V.hasClass(t,n[0]))return-1;return 0}function d(e,t,i){if($.removePartClasses(e,"month-row-select-selected",t),i)$.addPartClasses(e,"month-row-select-selected",t)}function u(e){for(var t=e.rowTagNum,i=$.getId(e,"row-select"),n=0;t>n;n++){var a=V.g(i+"-"+n);h(e,a)}}function h(e,t){for(var i=$.getPartClasses(e,"month-item-selected"),n=t.nextSibling,a=!0,r=0;n;){if(1===l(e,n))if(++r,!V.hasClass(n,i[0])){a=!1;break}n=n.nextSibling}if(0===r)a=!1;d(e,t,a)}function c(e,t){var i=t.getAttribute("data-index"),n=$.getPartClasses(e,"month-title-selected"),a=!0;if(V.hasClass(t,n[0]))a=!1,$.removePartClasses(e,"month-title-selected",t);else $.addPartClasses(e,"month-title-selected",t);for(var r=e.rowTagNum,s=$.getId(e,"row-select"),o=e.viewValue,d=[],h=0;r>h;h++){var c=V.g(s+"-"+h),f=c.parentNode.children[i];if(1===l(e,f)){var p=f.getAttribute("data-date"),m=f.getAttribute("data-month"),g=f.getAttribute("data-year"),y=g+"-"+m+"-"+p;o[y]={isSelected:a,value:new Date(g,m,p)},d.push(y)}}if(d&&d.length>0)_(e),x(e,d,a),u(e),v(e)}function f(e,t,i){if($.removePartClasses(e,"month-title-selected",t),i)$.addPartClasses(e,"month-title-selected",t)}function p(e){for(var t=$.getId(e,"month-title"),i=1;7>=i;i++){var n=V.g(t+"-"+i);m(e,n)}}function m(e,t){for(var i=$.getPartClasses(e,"month-item-selected"),n=t.getAttribute("data-index"),a=!0,r=0,s=e.rowTagNum,o=$.getId(e,"row-select"),d=0;s>d;d++){var u=V.g(o+"-"+d),h=u.parentNode.children[n];if(1===l(e,h))if(++r,!V.hasClass(h,i[0])){a=!1;break}}if(0===r)a=!1;f(e,t,a)}function g(e,t){var i=t.parentNode,n=$.getPartClasses(e,"month-row-select"),a=$.getPartClasses(e,"month-row-select-selected"),r=$.getPartClasses(e,"month-item-virtual"),s=$.getPartClasses(e,"month-item-disabled"),o=!0;if(V.hasClass(t,a[0]))o=!1,$.removePartClasses(e,"month-row-select-selected",t);else $.addPartClasses(e,"month-row-select-selected",t);for(var l=i.children,d=e.viewValue,u=[],h=0;h<l.length;h++){var c=l[h];if(1===c.nodeType&&!V.hasClass(c,n[0])&&!V.hasClass(c,r[0])&&!V.hasClass(c,s[0])){var f=c.getAttribute("data-date"),m=c.getAttribute("data-month"),g=c.getAttribute("data-year"),y=g+"-"+m+"-"+f;d[y]={isSelected:o,value:new Date(g,m,f)},u.push(y)}}if(u&&u.length>0)_(e),x(e,u,o),p(e),v(e)}function v(e){for(var t=e.rowTagNum,i=$.getId(e,"row-select"),n=V.g($.getId(e,"month-title-0")),a=$.getPartClasses(e,"month-row-select-selected"),r=0,s=0;t>s;s++){var o=V.g(i+"-"+s);if(V.hasClass(o,a[0]))r++}if(r===t)$.addPartClasses(e,"month-select-all-selected",n);else $.removePartClasses(e,"month-select-all-selected",n)}function y(e){for(var t=e.rowTagNum,i=$.getId(e,"row-select"),n=0;t>n;n++){var a=V.g(i+"-"+n);$.removePartClasses(e,"month-row-select-selected",a),g(e,a)}}function _(e){var t=[];for(var i in e.viewValue)if(e.viewValue[i].isSelected)t.push(e.viewValue[i].value);t.sort(function(e,t){return e-t}),e.rawValue=t,e.fire("change")}function x(e,t,i){if(i)b(e,t);else M(e,t)}function M(e,t){for(var i=e,n=0;n<t.length;n++){var a=$.getId(e,t[n]),r=V.g(a);if(r)V.removeClasses(r,$.getPartClasses(i,"month-item-selected"))}}function b(e,t){for(var i=e,n=0;n<t.length;n++){var a=$.getId(e,t[n]),r=V.g(a);if(r)V.addClasses(r,$.getPartClasses(i,"month-item-selected"))}}function w(e,t,i){if(!t)return!1;var n=$.getPartClasses(e,i);if(V.hasClass(t,n[0]))return $.removePartClasses(e,i,t),!1;else return $.addPartClasses(e,i,t),!0}function L(e,t){var i=t.getAttribute("data-date"),n=t.getAttribute("data-month"),a=t.getAttribute("data-year"),r=a+"-"+n+"-"+i;if("multi"===e.mode){var s=w(e,t,"month-item-selected");e.viewValue[r]={isSelected:s,value:new Date(a,n,i)},_(e);var o=t.parentNode.firstChild;h(e,o),p(e),v(e)}else{var l=$.getPartClasses(e,"month-item-selected");if(V.hasClass(t,l[0]))return;var d=new Date(a,n,i);D(e,e.rawValue,d),e.rawValue=d,e.fire("change"),e.fire("itemclick")}}function C(e,t,i){var n=e,a=n.viewRange||n.range,r=12*a.begin.getFullYear()+a.begin.getMonth(),s=12*a.end.getFullYear()+a.end.getMonth(),o=12*t+i,l=new Date(t,i,1);if(i=l.getMonth(),r-o>0)i+=r-o;else if(o-s>0)i-=o-s;return l.setMonth(i),i=l.getMonth(),t=l.getFullYear(),{year:t,month:i}}function T(e,i,n){if(null==i)i=e.year;if(null==n)n=e.month;var a=e,r=C(a,i,n);a.month=r.month,a.year=r.year;var s=a.getChild("yearSel"),o=s.getValue();if(s.setProperties({datasource:t(a),value:a.year}),o===a.year+"")s.fire("change")}function D(e,t,i){if(t!==i){if(t){var n=V.g(r(e,t));if(n)w(e,n,"month-item-selected")}var a=V.g(r(e,i));if(a)if(l(e,a))w(e,a,"month-item-selected");else return e.rawValue=null,null}return i}function Y(e){var t=new Date(e.year,e.month,1),i=R(t).add("month",1);T(e,i.year(),i.month())}function k(e){var t=new Date(e.year,e.month,1),i=R(t).subtract("month",1);T(e,i.year(),i.month())}function P(e,t){var n=parseInt(t.getValue(),10);e.year=n;var a=e.month,r=C(e,n,a);a=r.month,e.month=a;var s=e.getChild("monthSel"),o=s.setProperties({datasource:i(e,e.year),value:e.month});if(!o.hasOwnProperty("rawValue"))S(e,s);e.fire("changeyear")}function S(e,t){var i=parseInt(t.getValue(),10);e.month=i,I(e),e.fire("changemonth")}function I(e){var t=$.getId(e,"monthMain"),i=V.g(t);i.innerHTML=a(e);var n=i.getElementsByTagName("tr"),r=n[n.length-1];$.addPartClasses(e,"last-row",r),H(e)}function E(e){var t,i;if("string"==typeof e){var n=e.split(",");t=N(n[0]),i=N(n[1])}else t=e.begin,i=e.end;if(t>i)return{begin:i,end:t};else return{begin:t,end:i}}function N(e){function t(e){var t=e.split("-");if(t)return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else return null}e+="";var i=e.split(" "),n=t(i[0]);if(i[1]){var a=i[1].split(":");n.setHours(a[0]),n.setMinutes(a[1]),n.setSeconds(a[2])}return n}function O(e,t){if("single"===t)return N(e);else{for(var i=e.split(","),n=[],a=0;a<i.length-1;a+=2){var r,s=N(i[a]),o=N(i[a+1]);if(s&&o)if(s-o===0)n.push(s);else for(r=s;o>=r;)n.push(r),r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1);else;}return n}}function H(e){if("multi"!==e.mode)return void D(e,null,e.rawValue);var t=e.viewValue;for(var i in t){var n=V.g($.getId(e,i));if(n){var a=l(e,n);if(1===a)if(t[i].isSelected)$.addPartClasses(e,"month-item-selected",n);else $.removePartClasses(e,"month-item-selected",n);else if(0===a)t[i].isSelected=!1,_(e)}}u(e),p(e),v(e)}function j(e,t,i){var n=e.helper.getPartClasses(t+"-layer"),a=i.layer;a.addCustomClasses(n),e.fire("selectlayerrendered",{layer:a})}require("./Button"),require("./Select"),require("./Panel");var V=require("./lib"),$=require("./controlHelper"),A=require("./Control"),F=require("./main"),R=require("moment");return e.prototype={type:"MonthView",initOptions:function(e){var t={range:{begin:new Date(1982,10,4),end:new Date(2046,10,4)},dateFormat:"YYYY-MM-DD",paramFormat:"YYYY-MM-DD",viewValue:{},mode:"single"};V.extend(t,e),this.setProperties(t)},setProperties:function(e){if(e.range)e.range=E(e.range);var t=new Date,i=e.mode||this.mode;if(null==e.rawValue)if(e.value)e.rawValue=O(e.value,i);else if(null==this.rawValue)if("single"===i)e.rawValue=t;else e.rawValue=[];var n=e.year,a=e.month;if(!n&&null==a)if("single"===i){if(e.rawValue)n=e.rawValue.getFullYear(),a=e.rawValue.getMonth()+1}else n=t.getFullYear(),a=t.getMonth()+1;if(n&&a)e.year=parseInt(n,10),e.month=parseInt(a,10)-1;else if(e.hasOwnProperty("year")){if(null==this.month)delete e.year}else if(e.hasOwnProperty("month"))if(null==this.year)delete e.month;else e.month=parseInt(a,10)-1;var r=A.prototype.setProperties.apply(this,arguments);if(r.hasOwnProperty("rawValue"))this.fire("change");return r},initStructure:function(){if(this.main.innerHTML=n(this),this.initChildren(this.main),"multi"===this.mode)this.addState("multi-select")},initEvents:function(){var e=this.getChild("monthBack");e.on("click",V.curry(k,this));var t=this.getChild("monthForward");t.on("click",V.curry(Y,this));var i=this.getChild("monthSel");i.on("change",V.curry(S,this,i)),i.on("layerrendered",V.curry(j,this,"month-select"));var n=this.getChild("yearSel");n.on("change",V.curry(P,this,n)),n.on("layerrendered",V.curry(j,this,"year-select"));var a=this.helper.getPart("monthMain");$.addDOMEvent(this,a,"click",s)},repaint:$.createRepaint(A.prototype.repaint,{name:["range","rawValue","year","month"],paint:function(e,t,i){if(i)if("multi"===e.mode)o(e);T(e,e.year,e.month)}},{name:"disabled",paint:function(e,t){var i=e.getChild("monthBack");i.setProperties({disabled:t});var n=e.getChild("monthForward");n.setProperties({disabled:t});var a=e.getChild("monthSel");a.setProperties({disabled:t});var r=e.getChild("yearSel");r.setProperties({disabled:t})}}),disable:function(){this.setProperties({disabled:!0}),this.addState("disabled")},enable:function(){this.setProperties({disabled:!1}),this.removeState("disabled")},setRange:function(e){this.setProperties({range:e})},setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},getValue:function(){return this.stringifyValue(this.rawValue)},stringifyValue:function(e){if("single"===this.mode)return V.date.format(e,this.paramFormat)||"";else{for(var t=[],i=864e5,n=0;n<e.length;n++)if(0===n)t.push(V.date.format(e[n],this.paramFormat));else if(e[n]-e[n-1]>i)t.push(V.date.format(e[n-1],this.paramFormat)),t.push(V.date.format(e[n],this.paramFormat));else if(n===e.length-1)t.push(V.date.format(e[n],this.paramFormat));else continue;return t.join(",")}},parseValue:function(e){return O(e,this.mode)},setRawValueWithoutFireChange:function(e){this.rawValue=e,o(this)},getDateItemHTML:function(e){return V.g(r(this,e))}},V.inherits(e,A),F.register(e),e}),define("ub-ria-ui/MultiCalendar",["require","esui/Button","esui/MonthView","esui/lib","esui/InputControl","esui/controlHelper","esui/Layer","esui/main","moment","underscore"],function(require){function e(){h.apply(this,arguments)}function t(e,t,s){var o=e.getChild("prevMonthView"),d=e.getChild("nextMonthView"),u=e.range,h=i(u),c=f(e.rawValue).add(1,"month"),m=c.month()+1,g=c.year(),v=f(t).format("YYYY-MM")===f(h.nextRange.end).format("YYYY-MM");if(!v)d&&d.setProperties({range:h.nextRange,month:m,year:g}),o&&o.setProperties({rawValue:t,range:h.prevRange});else d&&d.setProperties({range:h.nextRange,rawValue:t}),o&&o.setProperties({rawValue:t,year:f(e.rawValue).year(),month:f(e.rawValue).month()});if("render"===s){var y=o.getChild("monthForward").main,_=d.getChild("monthBack").main;if(y&&l.removeNode(y),_&&l.removeNode(_),o.on("change",r,e),o.on("changemonth",n,e),d.on("change",r,e),d.on("changemonth",a,e),e.autoHideLayer)o.on("itemclick",p.bind(e.layer.toggle,e.layer)),d.on("itemclick",p.bind(e.layer.toggle,e.layer))}}function i(e){var t={},i=f(e.begin).endOf("month").toDate();i.setDate(i.getDate()+1);var n=f(e.end).startOf("month").toDate();n.setDate(n.getDate()-1);var a={begin:e.begin,end:n},r={begin:i,end:e.end};return t.prevRange=a,t.nextRange=r,t}function n(e){var t=this,i=e.target,n=t.getChild("nextMonthView"),a=i.year,r=i.month+1,s=f(a+"-"+r,"YYYY-MM").add(1,"month");n.setProperties({year:s.year(),month:s.month()+1})}function a(e){var t=this,i=e.target,n=t.getChild("prevMonthView"),a=f(i.year+"-"+i.month,"YYYY-MM");n.setProperties({year:a.year(),month:a.month()+1})}function r(e){var t=e.target,i=t.getRawValue();if(i)this.rawValue=i,s(this),this.fire("change")}function s(e){var t=e.helper.getPart("text");t.innerHTML=p.escape(e.getValue())}function o(){this.now=new Date,d.apply(this,arguments),this.layer=new e(this)}require("esui/Button"),require("esui/MonthView");var l=require("esui/lib"),d=require("esui/InputControl"),u=require("esui/controlHelper"),h=require("esui/Layer"),c=require("esui/main"),f=require("moment"),p=require("underscore");return l.inherits(e,h),e.prototype.render=function(e){document.body.appendChild(e);var i=this.control;l.addClass(e,this.control.helper.getPrefixClass("multicalendar-layer"));var n='<div data-ui="type: MonthView; childName: prevMonthView" class="${prevClass}"></div><div data-ui="type: MonthView; childName: nextMonthView" class="${nextClass}"></div>';e.innerHTML=l.format(n,{prevClass:i.helper.getPartClassName("prev-month"),nextClass:i.helper.getPartClassName("next-month")}),i.helper.initChildren(e),t(i,i.rawValue,"render")},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden")){var i=this.control;t(i,i.rawValue,"repaint"),this.show()}else this.hide()},o.prototype={type:"MultiCalendar",styleType:"Calendar",initOptions:function(e){var t=new Date,i={range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},dateFormat:"YYYY-MM-DD",paramFormat:"YYYY-MM-DD",rawValue:t,autoHideLayer:!1};if("false"===e.autoHideLayer)e.autoHideLayer=!1;if(p.extend(i,e),l.isInput(this.main))this.helper.extractOptionsFromInput(this.main,i);if(this.paramFormat=i.paramFormat,i.value)i.rawValue=this.parseValue(i.value);var n=i.range;if("string"==typeof n)i.range=this.convertToRaw(n);this.setProperties(i)},initStructure:function(){var e=this.helper,t=this.main,i="calendar";if(l.isInput(t))e.replaceMain(),t=this.main;var n='<div class="${classes}" id="${id}">${value}</div><div class="${arrow}"><span class="${icon}"></span></div>';l.addClass(t,e.getPrefixClass(i)),t.innerHTML=l.format(n,{classes:e.getPartClassName("text"),id:e.getId("text"),arrow:e.getPartClassName("arrow"),icon:e.getIconClass(i)})},initEvents:function(){this.helper.addDOMEvent(this.main,"click",p.bind(this.layer.toggle,this.layer))},repaint:u.createRepaint(d.prototype.repaint,{name:["rawValue","range"],paint:function(e,i,n){if(n){if("string"==typeof n)n=e.convertToRaw(n);if(!n.begin)n.begin=new Date(1983,8,3);else if(!n.end)n.end=new Date(2046,10,4);e.range=n}if(i){if(i<n.begin)i=n.begin;if(i>n.end)i=n.end;e.rawValue=i,s(e)}if(e.layer)t(e,e.rawValue,"repaint")}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),parseValue:function(e){var t=f(e,this.paramFormat).toDate();return t},stringifyValue:function(e){return f(e).format(this.dateFormat)||""},convertToRaw:function(e){var t=e.split(",");if(1===t.length)t.push("2046-11-04");else if(""===t[0])t[0]="1983-09-03";else if(""===t[1])t[1]="2046-11-04";return{begin:f(t[0],"YYYY-MM-DD").toDate(),end:f(t[1],"YYYY-MM-DD").toDate()}},dispose:function(){if(!u.isInStage(this,"DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;d.prototype.dispose.apply(this,arguments)}}},l.inherits(o,d),c.register(o),o}),define("esui/SearchBox",["require","./lib","esui","./Control","./TextBox","./Button","mini-event","./painters"],function(require){function e(){s.apply(this,arguments)}function t(){{var e='<span class="${searchIconClasses}"></span>';"instant"!==this.searchMode}e='<button data-ui="type:Button;childName:search;variants:${buttonVariants}"class="${searchClasses}">'+(this.buttonContent?this.buttonContent:e)+"</button>";var t='<div class="${addonClasses}">'+e+"</div>",i=this.helper;return a.format(t,{searchIconClasses:i.getIconClass("search"),buttonVariants:this.buttonVariants,searchClasses:i.getPartClassName("search"),addonClasses:i.getPrefixClass("textbox-addon")})}function i(){var e=this.getChild("text"),t=e.getValue()?"addState":"removeState";this[t]("searched")}function n(){var e=this.getChild("text");if(e.setValue(""),this.removeState("searched"),"instant"===this.searchMode)this.fire("search");else this.fire("clear")}var a=require("./lib"),r=require("esui"),s=require("./Control");require("./TextBox"),require("./Button"),e.prototype.type="SearchBox",e.prototype.initOptions=function(e){var t={searchMode:"normal",buttonContent:"",buttonVariants:"primary icon",buttonPosition:"left",text:"",searched:!1,width:""};if(a.extend(t,e),"false"===t.disabled)t.disabled=!1;if(a.isInput(this.main)){if(!t.placeholder)t.placeholder=a.getAttribute(this.main,"placeholder");if(!t.text)t.text=this.main.value;if(!t.maxLength&&(a.hasAttribute(this.main,"maxlength")||this.main.maxLength>0))t.maxLength=this.main.maxLength}else if(!t.text)t.text=a.getText(this.main);if(!t.title)t.title=this.main.title;if(t.text)t.searched=!0;s.prototype.initOptions.call(this,t)},e.prototype.initStructure=function(){var e='<esui-text-box data-ui-mode="text" data-ui-child-name="text"data-ui-placeholder="${placeholder}" data-ui-icon="${clearClasses}"data-ui-variants="icon-right" data-ui-width="auto"></esui-text-box>',i=t.apply(this);if("left"===this.buttonPosition)e=i+e;else if("right"===this.buttonPosition)e+=i;var n=a.format(e,{placeholder:this.placeholder,clearClasses:this.helper.getIconClass("times-circle")});if(a.isInput(this.main))this.helper.replaceMain();if(this.buttonPosition)a.addClass(this.main,this.helper.getPrefixClass("textbox-wrapper"));this.main.innerHTML=n,this.helper.initChildren(this.main)},e.prototype.initEvents=function(){var e=this.getChild("text"),t=require("mini-event").delegate;if(e.on("input",i,this),"instant"===this.searchMode)t(e,"input",this,"search");t(e,"enter",this,"search"),e.on("keypress",function(e){if(13===e.keyCode)e.preventDefault()}),e.on("iconclick",n,this),e.on("focus",a.bind(this.addState,this,"focus")),e.on("blur",a.bind(this.removeState,this,"focus"));var r=this.getChild("search");if(r)t(r,"click",this,"search")},e.prototype.getValue=function(){var e=this.getChild("text");return e.getValue()};var o=require("./painters");return e.prototype.repaint=o.createRepaint(s.prototype.repaint,o.attribute("title"),{name:["maxLength","placeholder","text","height","disabled","readOnly"],paint:function(e,t,i,n,a,r,s){var o={maxLength:t,placeholder:i,value:n,height:a,disabled:r,readOnly:s};e.getChild("text").setProperties(o)}},{name:"disabled",paint:function(e,t){var i=e.getChild("search");i&&i.set("disabled",t)}},{name:"width",paint:function(e,t){e.main.style.width=t+"px"}},{name:"searched",paint:function(e,t){var i=t?"addState":"removeState";e[i]("searched")}},{name:"searchMode",paint:function(e,t){e.addState(t)}}),a.inherits(e,s),r.register(e),e}),define("ub-ria-ui/util",["require","eoo","underscore"],function(require){var e=require("eoo").static(require("underscore"));return e.deepClone=function(t){if(!e.isObject(t)||e.isFunction(t)||e.isRegExp(t))return t;if(e.isArray(t))return e.map(t,e.deepClone);var i={};return e.each(t,function(t,n){i[n]=e.deepClone(t)}),i},e.parseBoolean=function(t){e.each(t,function(e,i){if("false"===e)t[i]=!1})},e}),define("ub-ria-ui/selectors/RichSelector",["require","esui/Label","esui/Panel","esui/SearchBox","esui/lib","esui/InputControl","../util","esui/painters","eoo","esui"],function(require){function e(){this.search()}function t(e){e.removeState("queried");var t=e.getSearchBox();if(t)t.set("text","")}require("esui/Label"),require("esui/Panel"),require("esui/SearchBox");var i=require("esui/lib"),n=require("esui/InputControl"),a=require("../util"),exports={};exports.type="RichSelector",exports.initOptions=function(e){var t={hasHead:!0,needHeadCount:!0,title:"标题名",needBatchAction:!1,batchActionLabel:"批量操作",hasSearchBox:!0,hasFoot:!0,itemName:"结果",emptyText:"没有相应的搜索结果",holdState:!1,mode:"add",multi:!0,allowUnselectNode:!1};i.extend(t,e),a.parseBoolean(t),this.$super([t])},exports.getHeadHTML=function(){var e=this.helper,t="",n="";if(this.needBatchAction){var a=e.getPartClassName("batch-action-link"),r=this.helper.getId("batch-action");t='<a class="'+a+'" id="'+r+'" >'+this.batchActionLabel+"</a>"}if(this.hasHead&&this.needHeadCount){var s=e.getPartClassName("head-count");n='<span class="'+s+'" data-ui="type:Label;childName:headTotalCount;title:;"></span>'}var o=['<div data-ui="type:Panel;childName:head;"',' class="${headClass}">','<span class="${headTitleClass}" data-ui="type:Label;childName:title;title:;">',"${title}</span>${totalCount}","${actionLink}","</div>"].join("\n");return o=i.format(o,{headClass:e.getPartClassName("head"),headTitleClass:e.getPartClassName("head-title"),title:this.title,actionLink:t,totalCount:n})},exports.getFootHTML=function(){return['<div data-ui="type:Panel;childName:foot;"',' class="'+this.helper.getPartClassName("foot")+'">','<span data-ui="type:Label;childName:totalCount">',"</span>","</div>"].join("\n")},exports.getSearchBoxHTML=function(){return['<div data-ui="type:Panel;childName:searchBoxArea"',' class="'+this.helper.getPartClassName("search-wrapper")+'">','    <div data-ui="type:SearchBox;childName:itemSearch;" ','      data-ui-button-variants="text-border icon"></div>',"</div>"].join("")},exports.initStructure=function(){var t=["${head}",'<div data-ui="type:Panel;childName:body;" class="${bodyClass}">',"    ${searchInput}",'    <div data-ui="type:Panel;childName:content" class="${contentClass}">','        <div data-ui="type:Label;childName:emptyText" class="${emptyTextClass}">${emptyText}</div>','        <div data-ui="type:Panel;childName:queryList" class="${queryListClass}"></div>',"    </div>","</div>","${footInfo}"];if(this.main.innerHTML=i.format(t.join("\n"),{head:this.hasHead?this.getHeadHTML():"",bodyClass:this.helper.getPartClassName("body"),searchInput:this.hasSearchBox?this.getSearchBoxHTML():"",contentClass:this.helper.getPartClassName("content-wrapper"),emptyTextClass:this.helper.getPartClassName("empty-text"),emptyText:this.emptyText,queryListClass:this.helper.getPartClassName("query-list"),footInfo:this.hasFoot?this.getFootHTML():""}),this.initChildren(),this.addState(this.mode||"delete"),this.needBatchAction)this.helper.addDOMEvent(this.helper.getPart("batch-action"),"click",a.bind(this.batchAction,this));if(this.hasSearchBox){this.addState("has-search");var n=this.getSearchBox();n.on("search",e,this),n.on("clear",this.clearQuery,this)}var r=this.getQueryList().main;this.helper.addDOMEvent(r,"click",a.bind(this.eventDispatcher,this))},exports.eventDispatcher=function(){return!1},exports.search=function(){var e={filterData:[]};if(e=this.fire("search",e),!e.isDefaultPrevented()){var t=this.getSearchBox();if(t){var n={value:i.trim(t.getValue())};e.filterData.push(n)}}if(e.filterData.length)this.queryItem(e.filterData),this.refreshFoot(),this.refreshHead(),this.addState("queried");else this.clearQuery()},exports.clearQuery=function(){return t(this),this.clearData(),this.refreshContent(),this.refreshFoot(),this.refreshHead(),this.fire("clearquery"),!1},exports.getContent=function(){var e=this.getChild("body");if(e)return e.getChild("content");else return null},exports.getKeyword=function(){var e=this.getSearchBox(),t=this.isQuery();if(e&&t)return i.trim(e.getValue());else return null},exports.getQueryList=function(){var e=this.getContent();if(e)return e.getChild("queryList");else return null},exports.getSearchBox=function(){var e=this.getChild("body").getChild("searchBoxArea");if(e)return e.getChild("itemSearch");else return void 0},exports.getTotalCountPanel=function(){var e=this.getChild("foot");if(!e)return null;else return e.getChild("totalCount")},exports.getHeadTotalCountPanel=function(){var e=this.getChild("head");if(!e)return null;else return e.getChild("headTotalCount")},exports.isQuery=function(){return this.hasState("queried")},exports.batchAction=function(){if("delete"===this.mode)this.deleteAll(),this.refreshFoot(),this.refreshHead();else if("add"===this.mode)this.selectAll();return!1},exports.deleteAll=function(){return!1},exports.addAll=function(){return!1},exports.adaptData=function(){},exports.refresh=function(){var e=this.adaptData(),i=!0;if(this.hasSearchBox&&this.isQuery())if(this.holdState)this.search(this.getKeyword()),i=!1;else t(this);if(i)this.refreshContent(),this.processDataAfterRefresh(e),this.refreshFoot(),this.refreshHead()},exports.processDataAfterRefresh=function(){},exports.refreshFoot=function(){if(this.hasFoot){var e=this.getCurrentStateItemsCount(),t=this.getTotalCountPanel();if(t){var i=a.escape(this.itemName);t.setText("共 "+e+" 个"+i)}}},exports.refreshHead=function(){if(this.hasHead&&this.needHeadCount){var e=this.getCurrentStateItemsCount(),t=this.getHeadTotalCountPanel();if(t)t.setText("（"+e+"）")}},exports.getCurrentStateItemsCount=function(){return 0};var r=require("esui/painters");exports.repaint=r.createRepaint(n.prototype.repaint,{name:"title",paint:function(e,t){var i=e.getChild("head"),n=i&&i.getChild("title");
n&&n.setText(t)}},r.style("width")),exports.getSelectedItems=function(){return[]},exports.getSelectedItemsFullStructure=function(){return{}},exports.selectItems=function(){},exports.setRawValue=function(e){if(!a.isArray(e))e=[e];if(!this.multi&&e.length>1)e=e.slice(0);this.selectItems(e,!0)},exports.getRawValue=function(){var e=this.getSelectedItems();if(!this.multi)return e[0];else return e},exports.stringifyValue=function(e){var t=[];if(!a.isArray(e))t=[e];else a.each(e,function(e){t.push(e.id)});return t.join(",")};var s=require("eoo").create(n,exports);return require("esui").register(s),s}),define("ub-ria-ui/selectors/RichSelectorGroup",["require","eoo","esui/Panel","esui"],function(require){var exports={};exports.type="RichSelectorGroup",exports.getCategory=function(){return"input"},exports.initStructure=function(){this.helper.initChildren();var e=this.getChild("filter"),t=this.getChild("source"),i=this.getChild("target");e&&e.on("load",this.fire.bind(this,"load")),t&&t.on("add",function(e){var t=e.target.getSelectedItemsFullStructure();i&&i.setProperties({datasource:t}),this.fire("add"),this.fire("change")},this),i&&i.on("delete",function(e){var i=e.items;t&&t.selectItems(i,!1),this.fire("delete"),this.fire("change")},this)},exports.getRealTargetSelector=function(){var e=this.getChild("source"),t=this.getChild("target");if(t)return t;else return e},exports.getValue=function(){return this.getRealTargetSelector().getValue()},exports.getRawValue=function(){return this.getRealTargetSelector().getRawValue()},exports.validate=function(){var e=this.getRealTargetSelector();if("function"==typeof e.validate)return e.validate();else return void 0};var e=require("eoo").create(require("esui/Panel"),exports);return require("esui").register(e),e}),define("esui/TreeStrategy",["require","underscore"],function(require){function e(e){var i={defaultExpand:!1};t.extend(this,i,e)}var t=require("underscore");return e.prototype.isLeafNode=function(e){return!e.children||!e.children.length},e.prototype.shouldExpand=function(){return this.defaultExpand},e.prototype.attachTo=function(e){this.enableToggleStrategy(e),this.enableSelectStrategy(e)},e.prototype.enableToggleStrategy=function(e){e.on("expand",function(e){this.expandNode(e.node.id)}),e.on("collapse",function(e){this.collapseNode(e.node.id,!1)})},e.prototype.enableSelectStrategy=function(e){e.on("select",function(e){this.selectNode(e.node.id)}),e.on("unselect",function(t){if(e.get("allowUnselectNode"))e.unselectNode(t.node.id)})},e}),define("ub-ria-ui/selectors/SelectorTreeStrategy",["require","esui/lib","esui/TreeStrategy","eoo"],function(require){var e=require("esui/lib"),exports={};exports.constructor=function(t){var i={defaultExpand:!0,orientExpand:!1};e.extend(this,i,t)},exports.isLeafNode=function(e){return!e.children},exports.shouldExpand=function(e){if(this.orientExpand)return!e.isSelected;else return this.defaultExpand},exports.enableSelectStrategy=function(e){var t=this;e.on("select",function(e){var i=!0,n=t.isLeafNode(e.node);if("load"!==t.mode){if(t.onlyLeafSelect&&!n)i=!1}else if(!n)i=!1;if(i)this.selectNode(e.node.id)}),e.on("unselect",function(t){if(e.get("allowUnselectNode"))e.unselectNode(t.node.id)})};var t=require("esui/TreeStrategy"),i=require("eoo").create(t,exports);return i}),define("ub-ria-ui/selectors/TableRichSelector",["require","esui/lib","../util","./RichSelector","esui/painters","eoo","esui"],function(require){function e(e,t,i,n){var a=e.fields,r=[],s=e.helper.getPartClassName("row-field"),o=0;d.each(a,function(a,l){var u=a.content,h="function"==typeof u?u.call(e,t,i,l):d.escape(t[u]);if(n){var c=n.insertCell(l);c.style.width=a.width+"px",c.title=h,c.innerHTML=h}else{var f='<td class="'+s+'" title="'+h+'" style="width:'+a.width+'px;">'+h+"</td>";r.push(f)}o++});var l=e.helper.getPartClassName("row-action-icon")+" "+e.helper.getIconClass(),u='<span class="'+l+'"></span>';if(n){var h=n.insertCell(o);h.innerHTML=u}else return r.push("<td>"+u+"</td>"),r.join(" ")}function t(e,t,n){var a=e.helper.getPartClassName("row-selected"),r=!1;if(l.hasClass(t,a)){if(e.allowUnselectNode)i(e,n.id,!1),r=!0}else i(e,n.id,!0),r=!0;if(r)e.fire("add",{item:n}),e.fire("change")}function i(e,t,i){if(!e.multi)n(e),e.currentSelectedId=i?t:null;a(e,t,i)}function n(e){var t=e.currentSelectedId;if(t)a(e,t,!1),e.currentSelectedId=null}function a(e,t,i){var n=e.indexData[t];if(n){n.isSelected=i;var a=e.helper.getPart("row-"+t),r=i?l.addClass:l.removeClass;r(a,e.helper.getPartClassName("row-selected"))}}function r(e,t,i){s(e,i.id),e.fire("delete",{items:[i]}),e.fire("change")}function s(e,t){var i=e.indexData,n=i[t].index,a=[].slice.call(e.datasource,0);a.splice(n,1),e.set("datasource",a)}function o(e,t,n){var a=e.helper.getPartClassName("row-selected");if(!l.hasClass(t,a))i(e,n.id,!0),e.fire("load",{item:n}),e.fire("change")}var l=require("esui/lib"),d=require("../util"),u=require("./RichSelector"),exports={};exports.type="TableRichSelector",exports.styleType="RichSelector",exports.initOptions=function(e){var t={firedOnIcon:!1,datasource:[],selectedData:[],fields:[{field:"name",title:"名称",content:"name",searchScope:"partial",isDefaultSearchField:!0}],hasRowHead:!0};l.extend(t,e),d.parseBoolean(t),this.$super([t])},exports.initStructure=function(){this.$super(arguments),l.addClass(this.main,this.helper.getPrefixClass("tablerichselector"))},exports.repaint=require("esui/painters").createRepaint(u.prototype.repaint,{name:["datasource","selectedData","disabledData","fields"],paint:function(e){e.refresh(),e.fire("change")}}),exports.adaptData=function(){this.allData=l.deepClone(this.datasource);var e={};d.each(this.allData,function(t,i){e[t.id]={index:i}});var t=this.selectedData||[];if(!this.multi)if(!d.isArray(t))this.currentSelectedId=t,t=[{id:t}];else if(t.length)this.currentSelectedId=t[0].id;d.each(t,function(t){if(void 0!==e[t.id])e[t.id].isSelected=!0});var i=this.disabledData||[];return d.each(i,function(t){if(void 0!==e[t.id])e[t.id].isDisabled=!0}),this.indexData=e,this.fieldsIndex={},this.defaultSearchFields=[],d.each(this.fields,function(e){if(this.fieldsIndex[e.field]=e,e.isDefaultSearchField)this.defaultSearchFields.push(e.field)},this),{allData:this.allData,indexData:this.indexData}},exports.refreshContent=function(){var e=this.isQuery()?this.queriedData:this.allData;if(!e||0===e.length)this.addState("empty");else this.removeState("empty");var t=[];if(this.hasRowHead)t.push(this.createTableHead());t.push(this.createTableContent(e));var i=this.getQueryList();i.setContent(t.join(""))},exports.createTableHead=function(){for(var e=this.helper.getPartClassName("head-table"),t=this.helper.getId("head-table"),i=['<table border=0 class="'+e+'" id="'+t+'"><tr>'],n=this.fields.length,a=0;n>a;a++){var r=this.fields[a];i.push('<th class="th'+a+'" style="width:'+r.width+'px;">'+r.title||"</th>")}return i.push("<th></th>"),i.push("</tr></table>"),i.join(" ")},exports.rowTpl='<tr id="${rowId}" class="${rowClass}" index="${index}">${content}</tr>',exports.createTableContent=function(t){var i=this.indexData,n=this.helper,a=n.getPartClassName("content-table"),r=n.getId("content-table"),s=['<table border=0 class="'+a+'" id="'+r+'">'],o=n.getPartClassName("row"),u=n.getPartClassName("row-selected"),h=n.getPartClassName("row-disabled");return d.each(t,function(t,n){var a=[o],r=i[t.id];if(r.isSelected)a.push(u);if(r.isDisabled)a.push(h);s.push(l.format(this.rowTpl,{rowId:this.helper.getId("row-"+t.id),rowClass:a.join(" "),index:r.index,content:e(this,t,n)}))},this),s.push("</table>"),s.join(" ")},exports.eventDispatcher=function(e){for(var t=e.target,i=this.helper,n=i.getPartClassName("row"),a=i.getPartClassName("row-action-icon");t&&t!==document.body;){var r;if(this.hasIcon&&this.fireOnIcon&&l.hasClass(t,a))r=t.parentNode;else if(l.hasClass(t,n))r=t;if(r)return void this.operateRow(r);t=t.parentNode}},exports.operateRow=function(e){var i=this.helper.getPartClassName("row-disabled");if(!l.hasClass(e,i)){var n=parseInt(e.getAttribute("index"),10),a=this.allData[n];if(a)if("add"===this.mode)t(this,e,a);else if("delete"===this.mode)r(this,e,a);else if("load"===this.mode)o(this,e,a)}},exports.selectAll=function(){var e=this.isQuery()?this.queriedData:this.allData,t=this;d.each(e,function(e){i(t,e.id,!0)}),this.fire("add"),this.fire("change")},exports.selectItems=function(e,t){var n=this.indexData,a=this;d.each(e,function(e){var r=void 0!==e.id?e.id:e,s=n[r];if(null!==s&&void 0!==s)i(a,r,t)})},exports.deleteAll=function(){var e=d.clone(this.datasource);this.set("datasource",[]),this.fire("delete",{items:e}),this.fire("change")},exports.queryItem=function(e){function t(e,t,i){var n=!1;if("string"==typeof t)t=l.trim(t);if("partial"===this.fieldsIndex[e].searchScope){if(-1!==i[e].indexOf(t))n=!0}else if(i[e]===t)n=!0;return n}function i(i){return!d.any(e,function(e){var n=[];if(void 0===e.keys)n=this.defaultSearchFields;else n=e.keys;return!d.any(n,function(n){return t.call(this,n,e.value,i)},this)},this)}e=e||[],this.queriedData=d.filter(this.allData,i,this),this.afterQueryHandler()},exports.afterQueryHandler=function(){this.addState("queried"),this.refreshContent()},exports.clearData=function(){this.queriedData=[]},exports.getSelectedItems=function(){var e=this.datasource,t=this.indexData,i=this.mode;if("delete"===i)return this.allData;var n=d.filter(e,function(e){return t[e.id].isSelected});return n},exports.getSelectedItemsFullStructure=function(){return this.getSelectedItems()},exports.getCurrentStateItemsCount=function(){var e=this.isQuery()?this.queriedData:this.allData;return e=e||[],e.length};var h=require("eoo").create(u,exports);return require("esui").register(h),h}),define("ub-ria-ui/selectors/TableRichSelectorWithFilter",["require","esui/lib","esui/Select","esui/Panel","./TableRichSelector","esui/painters","eoo","esui"],function(require){var e=require("esui/lib");require("esui/Select"),require("esui/Panel");var t=require("./TableRichSelector"),exports={};exports.type="TableRichSelectorWithFilter",exports.styleType="RichSelector",exports.createTableHead=function(){for(var e=this.helper.getPartClassName("head-table"),t=['<table border=0 class="'+e+'"><tr>'],i=this.fields.length,n=0;i>n;n++){var a=this.fields[n];if(a.field!==this.filterField)t.push('<th class="th'+n+'" style="width:'+a.width+'px;">'+a.title||"</th>");else t.push('<th class="th'+n+'" style="width:'+a.width+'px;">    <div data-ui="type:Select;childName:filterSel;variants:compact;"></div></th>')}return t.push("<th></th>"),t.push("</tr></table>"),t.join(" ")},exports.getSearchBoxHTML=function(){var t=this.$super(arguments),i='<div class="${queryListClass}" data-ui-type="Panel" data-ui-child-name="filter"></div>';return i=e.format(i,{queryListClass:this.helper.getPrefixClass("richselector-query-list")}),t+i},exports.refreshFilter=function(){var e=this.getFilter();e.setContent(this.createTableHead());var t=e.getChild("filterSel");if(t)t.setProperties({datasource:this.filterDatasource}),t.on("change",this.search,this)},exports.repaint=require("esui/painters").createRepaint(t.prototype.repaint,{name:"fields",paint:function(e){e.refreshFilter()}}),exports.initStructure=function(){this.$super(arguments),this.addState("with-filter")},exports.refreshContent=function(){this.hasRowHead=!1,this.$super(arguments)},exports.search=function(){var t=[],i=this.getSearchBox();if(i)t.push({value:e.trim(i.getValue())});var n=this.getFilter().getChild("filterSel");if(n){var a=n.getValue();if(a&&""!==a)t.push({keys:[this.filterField],value:n.getValue()})}if(t.length)this.queryItem(t),this.refreshFoot(),this.refreshHead(),this.addState("queried");else this.clearQuery()},exports.getFilter=function(){return this.getChild("body").getChild("filter")};var i=require("eoo").create(t,exports);return require("esui").register(i),i}),define("ub-ria-ui/TogglePanel",["require","esui/Control","esui/lib","esui","esui/Panel","esui/Overlay","esui/painters","eoo"],function(require){function e(e){var t=o.create("Panel",{main:e});this.helper.addPartClasses("title",t.main),this.addChild(t,"title"),t.render(),this.set("title",e&&e.innerHTML),t.helper.addDOMEvent(t.main,"click",s.bind(a,this))}function t(e){var t={main:e,childName:"content",viewContext:this.viewContext,renderOptions:this.renderOptions},i=o.create("Panel",t);this.helper.addPartClasses("content",i.main),this.addChild(i,"content"),i.render()}function i(e){var t=this.helper.createPart("layer","div");s.addClass(t,this.helper.getPartClassName("layer"));var i={main:e,childName:"content",attachedDOM:this.main,attachedLayout:"bottom,left",autoClose:!1,viewContext:this.viewContext,renderOptions:this.renderOptions},a=o.create("Overlay",i);this.helper.addPartClasses("content",a.main),this.addChild(a,"content"),a.render();var r=s.bind(n,this);a.on("show",function(){this.helper.addDOMEvent(document,"mousedown",r)}),a.on("hide",function(){this.helper.removeDOMEvent(document,"mousedown",r)})}function n(e){var t=e.target,i=this.getChild("content");if(i){var n=s.dom.contains(i.main,t);if(!n){i.hide();var a=i.attachedTarget,r=s.dom.contains(a,t)||a===t;if(!r)this.removeState("expanded"),this.removeState("active")}}}function a(){this.toggleContent()}var r=require("esui/Control"),s=require("esui/lib"),o=require("esui");require("esui/Panel"),require("esui/Overlay");var exports={};exports.type="TogglePanel",exports.initOptions=function(e){var t={expanded:!1,position:"layer"},i=s.extend(t,e);this.setProperties(i)},exports.initStructure=function(){var n=s.getChildren(this.main),a=n[0],r=n[1];e.call(this,a);var o=this.position;if("fixed"===o)t.call(this,r);else i.call(this,r)},exports.toggleContent=function(){this.toggleStates(),this.fire("change")},exports.toggleStates=function(){var e=this.position;if("fixed"===e)this.toggleState("expanded"),this.toggleState("active");else{var t=this.getChild("content");if(this.isExpanded())this.removeState("expanded"),this.removeState("active"),t.hide();else this.addState("expanded"),this.addState("active"),t.show()}};var l=require("esui/painters");exports.repaint=l.createRepaint(r.prototype.repaint,l.state("expanded"),{name:"title",paint:function(e,t){e.getChild("title").set("content",t)}},{name:"content",paint:function(e,t){e.getChild("content").set("content",t)}},l.style("width")),exports.isExpanded=function(){return this.hasState("expanded")};var d=require("eoo").create(r,exports);return o.register(d),d}),define("ub-ria-ui/selectors/ToggleSelector",["require","esui/lib","../util","../TogglePanel","eoo","esui"],function(require){function e(e){var t=this.fire("change");if(!t.isDefaultPrevented())this.updateDisplayText(e.target)}function t(){if(this.collapseAfterChange)this.toggleContent()}var i=require("esui/lib"),n=require("../util"),exports={};exports.type="ToggleSelector",exports.getCategory=function(){return"input"},exports.initOptions=function(e){var t={textField:null,collapseAfterChange:!0};e=n.extend(t,e),this.$super(arguments)},exports.initStructure=function(){var e=this,t=e.main,n=this.helper;e.$super(arguments);var a=i.getChildren(t),r=document.createElement("div");i.addClass(r,n.getPrefixClass("select-inner")),i.addClass(r,n.getPrefixClass("select")),i.addClass(a[0],n.getPrefixClass("select-text")),r.appendChild(a[0]);var s=document.createElement("span");i.addClass(s,n.getPrefixClass("select-arrow")),i.addClass(s,n.getIconClass("caret-down")),r.appendChild(s),i.insertBefore(r,t.firstChild)},exports.initEvents=function(){this.$super(arguments);var i=this.viewContext.getSafely(this.targetControl);i.on("change",n.bind(e,this)),i.on("add",n.bind(t,this)),this.updateDisplayText(i)},exports.toggleContent=function(){if(!this.isDisabled())this.toggleStates()},exports.updateDisplayText=function(e){var t=this.title;if(e.helper.isInStage("RENDERED")){var i=e.getRawValue();if(n.isArray(i))i=i[0];if(i&&i[this.textField])t=i[this.textField]}this.set("title",n.escape(t))},exports.getRawValue=function(){var e=this.viewContext.getSafely(this.targetControl),t=e.getRawValue();if(t.length>0)return t[0][this.valueField];else return void 0},exports.setRawValue=function(e){var t=this.viewContext.getSafely(this.targetControl);t.setRawValue(e)},exports.getValue=function(){return this.getRawValue()},exports.setValue=function(e){var t=[{id:e}];this.setRawValue(t)},exports.validate=function(){var e=this.viewContext.get(this.targetControl);if(!e)return!0;if("function"==typeof e.validate)return e.validate();else return void 0};var a=require("../TogglePanel"),r=require("eoo").create(a,exports);return require("esui").register(r),r}),define("esui/Tree",["require","./Control","./lib","./controlHelper","underscore","./TreeStrategy","./main"],function(require){function e(){v.apply(this,arguments)}function t(){f.apply(this,arguments)}function i(e,t,i,n,a){var r=a-n,s=0===r?"current":1===r?"previous":"far-previous",o=[].concat(m.getPartClasses(e,"node-indicator"),m.getPartClasses(e,"node-indicator-"+i),m.getPartClasses(e,"node-indicator-level-"+n),m.getPartClasses(e,"node-indicator-"+s)),l=0===r?y[i||"collapsed"]:"第"+n+"级",d="<span ";if(0===r)d+='id="'+m.getId(e,"indicator-"+t.id)+'" ';return d+='class="'+o.join(" ")+'">'+l+"</span>"}function n(e,t,n,a){var s=m.getPartClasses(e,"content-wrapper");if(e.selectedNodeIndex[t.id])s=s.concat(m.getPartClasses(e,"content-wrapper-selected"));s=s.join(" ");for(var o=m.getId(e,"content-wrapper-"+t.id),l='<div id="'+o+'" class="'+s+'">',d=e.strategy.isLeafNode(t)?"empty":a?"expanded":"collapsed",u=0;n>=u;u++)l+=i(e,t,d,u,n);var h=e.getItemHTML(t);if(e.checkboxes)h=p.format('<div class="'+e.helper.getPrefixClass("checkbox-custom")+'"><label>${contentHTML}</label></div>',{contentHTML:h});var c=m.getPartClasses(e,"item-content");if(l+='<div class="'+c.join(" ")+'">'+h+"</div>",l+="</div>",a&&!e.strategy.isLeafNode(t)){var f=[].concat(m.getPartClasses(e,"sub-root"),m.getPartClasses(e,"sub-root-"+d));l+='<ul class="'+f.join(" ")+'">';for(var g,v=0;v<t.children.length;v++)g=t.children[v],l+=r(e,g,n+1,e.strategy.shouldExpand(g));l+="</ul>"}return l}function a(e,t,i,n){var a=e.strategy.isLeafNode(t)?"empty":n?"expanded":"collapsed",r=[].concat(m.getPartClasses(e,"node"),m.getPartClasses(e,"node-"+a),m.getPartClasses(e,"node-level-"+i));if(t===e.datasource)r=[].concat(m.getPartClasses(e,"root"),m.getPartClasses(e,"root-"+a),r);return r}function r(e,t,i,r,s){s=s||"li";var o=a(e,t,i,r),l="<"+s+' class="'+o.join(" ")+'" id="'+m.getId(e,"node-"+t.id)+'" data-id="'+t.id+'" data-level="'+i+'">';return l+=n(e,t,i,r),l+="</"+s+">"}function s(e){var t=e.target,i=m.getPartClasses(this,"node-indicator")[0],n=p.hasClass(t,i),a=!n;if(!n){for(var r=m.getPartClasses(this,"content-wrapper")[0];t&&t!==this.main&&!p.hasClass(t,r);)t=t.parentNode;if(p.hasClass(t,r))n=this.wideToggleArea,a=a&&!0}if(n||a){for(;t&&t!==this.main&&!p.hasAttribute(t,"data-id");)t=t.parentNode;var s=t.getAttribute("data-id");if(n)this.triggerToggleStrategy(s);if(a)this.triggerSelectStrategy(s)}}function o(e,t){if(t=t||{},t[e.id]=e,e.children)for(var i=0;i<e.children.length;i++)o(e.children[i],t);return t}function l(e,t){if(e.selectedNodeIndex[t.id])return!1;else return e.selectedNodes.push(t),e.selectedNodeIndex[t.id]=t,!0}function d(e,t){if(e.selectedNodeIndex[t.id]){delete e.selectedNodeIndex[t.id];for(var i=0;i<e.selectedNodes.length;i++)if(e.selectedNodes[i]===t)e.selectedNodes.splice(i,1);return!0}return!1}function u(e,t,i){if(i.force||e.allowUnselectNode){var n=e.nodeIndex[t];if(n){var a=d(e,n);if(a){if(i.modifyDOM){var r=p.g(m.getId(e,"content-wrapper-"+t));m.removePartClasses(e,"content-wrapper-selected",r)}if(!i.silent)e.fire("unselectnode",{node:n}),e.fire("selectionchange")}}}}function h(e,t){var i=m.getPartClasses(e,"node-empty")[0];return p.hasClass(t,i)}function c(e,t){var i=m.getPartClasses(e,"node-expanded")[0];return p.hasClass(t,i)}var f=require("./Control"),p=require("./lib"),m=require("./controlHelper"),g=require("underscore"),v=require("./TreeStrategy");e.prototype.attachTo=function(){},p.inherits(e,v),t.prototype.type="Tree",t.defaultProperties={selectMode:"single",hideRoot:!1},t.prototype.initOptions=function(i){var n={datasource:{},strategy:new e,selectedNodes:[],selectedNodeIndex:{},checkboxes:!1},a=p.extend(n,t.defaultProperties,i);if(null==a.allowUnselectNode)a.allowUnselectNode="single"!==a.selectMode;this.setProperties(a)},t.prototype.itemTemplate="<span>${text}</span>",t.prototype.getItemHTML=function(e){var t={id:p.encodeHTML(e.id),text:p.encodeHTML(e.text)};return p.format(this.itemTemplate,t)};var y={collapsed:"展开",expanded:"收起",busy:"加载中",empty:"无内容"};return t.prototype.clickNode=function(){s.apply(this,arguments)},t.prototype.initStructure=function(){this.strategy.attachTo(this)},t.prototype.initEvents=function(){m.addDOMEvent(this,this.main,"click",this.clickNode)},t.prototype.removeNodeFromIndex=function(e){var t=this.nodeIndex[e];if(t)if(this.nodeIndex[e]=void 0,t.children)g.each(t.children,this.removeNodeFromIndex,this)},t.prototype.repaint=m.createRepaint(f.prototype.repaint,{name:"datasource",paint:function(e,t){e.selectedNodes=[],e.selectedNodeIndex={},e.nodeIndex=o(t),e.main.innerHTML=r(e,t,0,!0,"div")}},{name:"hideRoot",paint:function(e,t){var i=t?"addState":"removeState";e[i]("hide-root")}}),t.prototype.triggerSelectStrategy=function(e){var t=this.nodeIndex[e];if(t)if(this.selectedNodeIndex[e])this.fire("unselect",{node:t});else this.fire("select",{node:t})},t.prototype.getSelectedNodes=function(){return this.selectedNodes.slice()},t.prototype.toggleNodeSelection=function(e){var t=this.selectedNodeIndex[e]?"unselectNode":"selectNode";this[t](e)},t.prototype.selectNode=function(e,t){var i=this.nodeIndex[e];if(i){var n=l(this,i);if(n){if("single"===this.selectMode&&this.selectedNodes.length>1)u(this,this.selectedNodes[0].id,{force:!0,silent:!0,modifyDOM:!0});var a=p.g(m.getId(this,"content-wrapper-"+e));if(m.addPartClasses(this,"content-wrapper-selected",a),!t)this.fire("selectnode",{node:i}),this.fire("selectionchange")}}},t.prototype.unselectNode=function(e,t){u(this,e,{force:!0,silent:t,modifyDOM:!0})},t.prototype.expandNode=function(e,t){var i=p.g(m.getId(this,"node-"+e));if(i){var r=+p.getAttribute(i,"data-level");if(t||"ul"!==i.lastChild.nodeName.toLowerCase()){var s=this.nodeIndex[e];if(!s)return;if(t){if(s.children)for(var l=0;l<s.children.length;l++)u(this,s.children[l].id,{force:!0,silent:!0,modifyDOM:!1}),this.removeNodeFromIndex(s.children[l].id);s.children=t,o(s,this.nodeIndex)}i.innerHTML=n(this,s,r,!0)}else{var d=p.g(m.getId(this,"indicator-"+e));d.innerHTML=y.expanded;var h=[].concat(m.getPartClasses(this,"node-indicator"),m.getPartClasses(this,"node-indicator-level-"+r),m.getPartClasses(this,"node-indicator-current"),m.getPartClasses(this,"node-indicator-expanded"));d.className=h.join(" ");var c=[].concat(m.getPartClasses(this,"sub-root"),m.getPartClasses(this,"sub-root-expanded"));i.lastChild.className=c.join(" ")}var f=this.nodeIndex[e],g=a(this,f,r,!0);i.className=g.join(" ")}},t.prototype.collapseNode=function(e,t){var i=p.g(m.getId(this,"node-"+e));if(i){var n=this.nodeIndex[e],r=i.getElementsByTagName("ul")[0];if(r)if(t){if(r.parentNode.removeChild(r),n.children)for(var s=0;s<n.children.length;s++)u(this,n.children[s].id,{force:!0,silent:!1,modifyDOM:!1})}else{var o=[].concat(m.getPartClasses(this,"sub-root"),m.getPartClasses(this,"sub-root-collapsed"));r.className=o.join(" ")}var l=+p.getAttribute(i,"data-level"),d=a(this,n,l,!1);i.className=d.join(" ");var h=p.g(m.getId(this,"indicator-"+e)),c=[].concat(m.getPartClasses(this,"node-indicator"),m.getPartClasses(this,"node-indicator-level-"+l),m.getPartClasses(this,"node-indicator-current"),m.getPartClasses(this,"node-indicator-collapsed"));h.className=c.join(" "),h.innerHTML=y.collapsed}},t.prototype.toggleNode=function(e,t,i){if(this.nodeIndex[e]){var n=p.g(m.getId(this,"node-"+e));if(n)if(!h(this,n))if(c(this,n))this.collapseNode(e,i);else this.expandNode(e,t)}},t.prototype.triggerToggleStrategy=function(e){var t=this.nodeIndex[e];if(t){var i=p.g(m.getId(this,"node-"+e));if(i)if(!h(this,i))if(c(this,i))this.fire("collapse",{node:t});else this.fire("expand",{node:t})}},t.prototype.indicateNodeLoading=function(e){var t=p.g(m.getId(this,"node-"+e));if(t){for(var i=p.getChildren(t),n=0;!this.helper.isPart(i[n],"item-content");)n++;var a=i[n];a.innerHTML=y.busy;var r=[].concat(m.getPartClasses(this,"node-indicator"),m.getPartClasses(this,"node-indicator-level-"+n),m.getPartClasses(this,"node-indicator-current"),m.getPartClasses(this,"node-indicator-busy"));a.className=r.join(" ")}},t.prototype.dispose=function(){f.prototype.dispose.apply(this,arguments),this.nodeIndex=null,this.selectedNodes=null,this.selectedNodeIndex=null},require("./main").register(t),p.inherits(t,f),t}),define("ub-ria-ui/selectors/TreeRichSelector",["require","esui/Tree","esui/main","esui/lib","../util","./RichSelector","./SelectorTreeStrategy","esui/painters","eoo","esui"],function(require){function e(e,i,n){var a=e.getQueryList().getChild("tree"),r=e.indexData,s=r[i];if(s){if(!e.multi&&n)t(e),e.currentSeletedId=i;if(e.setItemState(i,"isSelected",n),n)a.selectNode(i,!0);else a.unselectNode(i,!0)}}function t(e){var t=e.currentSeletedId;if(t){var i=e.getQueryList().getChild("tree");i.unselectNode(t),e.currentSeletedId=null}}function i(e,t,i){if(e.needSyncParentChild)a(e,t,i),n(e,t,i)}function n(t,i,a){var r=t.indexData,s=i.node,o=s.children||[];f.each(o,function(i){e(t,i.id,a),n(t,r[i.id],a)})}function a(t,i){var n=t.indexData,r=i.parentId,s=n[r];if(s){var o=s.node.children||[],l=!f.find(o,function(e){return!t.getItemState(e.id,"isSelected")});e(t,r,l),a(t,s,l)}}function r(e,t){var i,n=e.indexData,a=n[t],s=a.parentId,o=n[s];if(!o)i=e.allData;else i=o.node;var l=i.children||[],d=f.without(l,a.node);if(0===d.length&&s!==u(e))r(e,s);else i.children=d,e.setProperties({datasource:e.allData})}function s(e,t){var i=e.children;return f.filter(i,function(e){return this.getItemState(e.id,"isSelected")},t)}function o(e,t){var i=[],n=t.children;return f.each(n,function(t){var n;if(-1!==t.text.indexOf(e))n=f.clone(t);if(t.children&&t.children.length){var a=o(e,t);if(a.length>0){if(!n)n=f.clone(t);n.children=a}}if(n)i.push(n)}),i}function l(e){return!e.children}function d(e,t,i){var n=1;if(i){if(l(t))if(!t.id||t.id===u(e))return 0;else return 1;n=0}else if(t.id===u(e))n=0;return n+=f.reduce(t.children,function(t,n){return t+d(e,n,i)},0)}function u(e){return e.datasource.id}require("esui/Tree");var h=require("esui/main"),c=require("esui/lib"),f=require("../util"),p=require("./RichSelector"),m=require("./SelectorTreeStrategy"),exports={};exports.type="TreeRichSelector",exports.styleType="RichSelector",exports.initOptions=function(e){var t={datasource:null,orientExpand:!1,wideToggleArea:!1,onlyLeafSelect:!0,hideRoot:!0,needSyncParentChild:!0,treeVariants:"icon angle hoverable"};c.extend(t,e),f.parseBoolean(t),this.$super([t])},exports.initStructure=function(){if(this.$super(arguments),c.addClass(this.main,this.helper.getPrefixClass("treerichselector")),this.onlyLeafSelect)this.addState("only-leaf-selectable")},exports.repaint=require("esui/painters").createRepaint(p.prototype.repaint,{name:"datasource",paint:function(e){e.refresh()}},{name:"selectedData",paint:function(e,t){if(null!=t){var i=e.allData;if(i&&i.children){var n=e.getSelectedItems();e.selectItems(n,!1),e.selectItems(t,!0),e.fire("add"),e.fire("change")}}}}),exports.adaptData=function(){var e=[];this.allData=f.deepClone(this.datasource);var t={};if(this.allData&&this.allData.children)this.walkTree(this.allData,this.allData.children,function(i,n){if(t[n.id]={parentId:i.id,node:n,isSelected:!1},n.hasOwnProperty("isSelected"))t[n.id].isSelected=n.isSelected;if(t[n.id].isSelected===!0)e.push(n)});return this.indexData=t,{indexData:t,selectedData:e}},exports.processDataAfterRefresh=function(e){if("delete"!==this.mode)this.selectItems(e.selectedData,!0)},exports.refreshContent=function(){var e=this.isQuery()?this.queriedData:this.allData;if(!e||!e.children||!e.children.length)this.addState("empty");else this.removeState("empty");if(e&&e.children){var t=this.getQueryList(),i=t.getChild("tree");if(!i){var n={childName:"tree",datasource:e,allowUnselectNode:this.allowUnselectNode,strategy:new m({mode:this.mode,onlyLeafSelect:this.onlyLeafSelect,orientExpand:this.orientExpand}),wideToggleArea:this.wideToggleArea,hideRoot:this.hideRoot,selectMode:this.multi?"multiple":"single",variants:this.treeVariants};if(this.getItemHTML)n.getItemHTML=this.getItemHTML;if(this.itemTemplate)n.itemTemplate=this.itemTemplate;i=h.create("Tree",n),t.addChild(i),i.appendTo(t.main);var a=this;i.on("selectnode",function(e){var t=e.node;a.handlerAfterClickNode(t)}),i.on("unselectnode",function(e){a.handlerAfterClickNode(e.node)})}else i.setProperties({datasource:f.deepClone(e),keyword:this.getKeyword()})}},exports.getStateNode=function(e){return this.indexData[e]},exports.getItemState=function(e,t){if(this.indexData[e]){var i=this.getStateNode(e);return i[t]}return null},exports.setItemState=function(e,t,i){if(this.indexData[e]){var n=this.getStateNode(e);n[t]=i}},exports.getDatasourceWithState=function(){var e=f.deepClone(this.datasource),t=this.indexData;return this.walkTree(e,e.children,function(e,i){i.isSelected=t[i.id].isSelected}),e},exports.handlerAfterClickNode=function(e){var t=this.indexData[e.id];if(t)if("add"===this.mode)this.actionForAdd(t);else if("delete"===this.mode)this.actionForDelete(t);else if("load"===this.mode)this.actionForLoad(t)},exports.actionForAdd=function(e){var t=this.getStateNode(e.node.id),n=!0;if(t.isSelected&&this.allowUnselectNode)n=!1;if(this.setItemState(e.node.id,"isSelected",n),!this.multi){if(this.currentSeletedId)this.setItemState(this.currentSeletedId,"isSelected",!n);if(n)this.currentSeletedId=e.node.id}else i(this,e,n);this.fire("add",{item:e.node}),this.fire("change")},exports.selectAll=function(){var t=this.isQuery()?this.queriedData:this.allData,i=t.children,n=this;this.walkTree(t,i,function(t,i){e(n,i.id,!0)}),this.fire("add"),this.fire("change")},exports.selectItems=function(t,n){var a=this.indexData;if(a){var r=this;f.each(t,function(t){var s=void 0!==t.id?t.id:t,o=a[s];if(null!=o&&void 0!==o)e(r,s,n),i(r,o,n)})}},exports.actionForDelete=function(e){var t=this.fire("delete",{items:[e.node]});if(!t.isDefaultPrevented())r(this,e.node.id),this.fire("change")},exports.deleteAll=function(){var e=this.fire("delete",{items:this.getSelectedItems()});if(!e.isDefaultPrevented())this.set("datasource",null),this.fire("change")},exports.actionForLoad=function(e){if(this.setItemState(e.node.id,"isActive",!0),this.currentActiveId)if(this.setItemState(this.currentActiveId,"isActive",!1),!this.getStateNode(this.currentActiveId).isSelected){var t=this.getQueryList().getChild("tree");t.unselectNode(this.currentActiveId,!0)}this.currentActiveId=e.node.id,this.fire("load",{item:e.node}),this.fire("change")},exports.getLeafItems=function(e,t){e=e||this.allData&&this.allData.children||[];var i=[],n=this;return f.each(e,function(e){if(l(e)){var a=t===this.getItemState(e.id,"isSelected");if("delete"===n.mode||a)i.push(e)}else i=f.union(i,n.getLeafItems(e.children,t))},this),i},exports.getSelectedItems=function(){if(!this.allData)return[];var e=[],t=this;return this.walkTree(this.allData,this.allData.children,function(i,n){if("delete"===t.mode||t.getStateNode(n.id).isSelected)e.push(n)}),e},exports.getSelectedTree=function(){var e=this,t=f.deepClone(this.allData);return this.walkTree(t,t.children,function(t,i){var n=s(i,e);if(n.length)i.children=n;else i.children=null}),t.children=f.filter(t.children,function(t){return t.children||e.indexData[t.id].isSelected}),t},exports.getSelectedItemsFullStructure=function(){return this.getSelectedTree()},exports.clearQuery=function(){if(this.$super(arguments),"delete"!==this.mode){var e=this.getSelectedItems();this.selectItems(e,!0)}return!1},exports.clearData=function(){this.queriedData={}},exports.queryItem=function(e){var t=e[0].value,i=[];
i=o(t,this.allData),this.queriedData={id:u(this),text:"符合条件的结果",children:i},this.addState("queried"),this.refreshContent();var n=this.getSelectedItems();if("delete"!==this.mode)this.selectItems(n,!0)},exports.walkTree=function(e,t,i){f.each(t,function(t){i(e,t),this.walkTree(t,t.children,i)},this)},exports.getFilteredItemsCount=function(){var e=this.isQuery()?this.queriedData:this.allData,t=d(this,e,!0);return t},exports.getCurrentStateItemsCount=function(){var e=this.isQuery()?this.queriedData:this.allData;if(!e)return 0;var t=d(this,e,!0);return t};var g=require("eoo").create(p,exports);return require("esui").register(g),g}),define("esui/validator/ValidityState",[],function(){function e(e,t){this.state=e,this.message=t||""}return e.prototype.getMessage=function(){return this.message},e.prototype.getState=function(){return this.state},e.prototype.setMessage=function(e){this.message=e},e.prototype.setState=function(e){this.state=e},e}),define("esui/validator/Rule",["require","./ValidityState","../lib"],function(require){function e(){}return e.prototype.type=null,e.prototype.errorMessage="${title}验证失败",e.prototype.check=function(){var e=require("./ValidityState");return new e(!0,"")},e.prototype.getErrorMessage=function(e){var t=require("../lib"),i=e.get(this.type+"ErrorMessage")||this.errorMessage;return t.format(i,e)},e.prototype.getLimitCondition=function(e){return e.get(this.type)},e.prototype.getName=function(){return this.type},e}),define("esui/validator/RequiredRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="required",e.prototype.errorMessage="${title}不能为空",e.prototype.check=function(e,t){return new i(!!e,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,0),e}),define("esui/validator/MaxRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="max",e.prototype.errorMessage="${title}不能大于${max}",e.prototype.check=function(e,t){var n=+e,a=!isNaN(n)&&n<=this.getLimitCondition(t);return new i(!e||a,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,301),e}),define("esui/validator/MinRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="min",e.prototype.errorMessage="${title}不能小于${min}",e.prototype.check=function(e,t){var n=+e,a=!isNaN(n)&&n>=this.getLimitCondition(t);return new i(!e||a,this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,300),e}),define("esui/validator/PatternRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="pattern",e.prototype.errorMessage="${title}格式不符合要求",e.prototype.check=function(e,t){var n=new RegExp(this.getLimitCondition(t));return new i(!e||n.test(e),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,200),e}),define("ub-ria-ui/Slider",["require","esui/Panel","esui/TextBox","esui/Select","esui/validator/RequiredRule","esui/validator/MaxRule","esui/validator/MinRule","esui/validator/PatternRule","esui","underscore","esui/lib","esui/InputControl","esui/painters","eoo"],function(require){function e(e){var t=e.value;if(delete e.value,null!=t&&null==e.rawValue)e.rawValue=this.parseValue(t,e);if(e.min="undefined"!=typeof e.min?e.min:this.min,e.max="undefined"!=typeof e.max?e.max:this.max,e.range||this.range)e.rawValue="undefined"==typeof e.rawValue?[e.min,e.max]:e.rawValue,e.minRangeValue=e.rawValue[0],e.maxRangeValue=e.rawValue[1],e.minRangeValue=Math.max(e.minRangeValue,e.min),e.maxRangeValue=Math.min(e.maxRangeValue,e.max),e.rawValue=[e.minRangeValue,e.maxRangeValue];else e.rawValue="undefined"==typeof e.rawValue?e.min:e.rawValue,e.rawValue=Math.max(e.rawValue,e.min),e.rawValue=Math.min(e.rawValue,e.max);return e}function t(){var e=this.helper.getPart("body");if(e)p(this,e)}function i(e){var t=this.widthHeight,i=c(this.cursorElement,t),n=this[t],a=e+i/2,r=a/n*(this.end-this.start);r-=r%this.step;var s=this.start+Math.round(r);return s}function n(e){var t=this.widthHeight,i=c(this.cursorElement,t),n=this[t],a=this.start,r=this.end,s=(e-a)/(r-a)*n-i/2;return s}function a(e,t,i){var a,r=e.cursorElement,s=e.leftTop,l=e.widthHeight;if(e.range){var d=e.cursorElementTwo,u=n.call(e,t[1]);if(d.style[s]=u+"px",a=n.call(e,t[0]),t[0]===t[1]&&t[0]===e.max)r.style.zIndex=3,d.style.zIndex=2;else r.style.zIndex=2,d.style.zIndex=3}else a=n.call(e,t);if(r.style[s]=a+"px",e.isShowSelectedBG){var h=c(e.cursorElement,l);if(e.range)e.bodySelectedElement.style[s]=a+h/2+"px",e.bodySelectedElement.style[l]=u-a+"px";else e.bodySelectedElement.style[l]=a+h/2+"px"}if(i)o(e,t)}function r(e){if(e.hasHead){var t=e.getHeadTarget();if("TextBox"===t.type)t.on("blur",m,e);else if("Select"===t.type)t.on("change",g,e)}}function s(e){if(e.hasHead){var t=e.getHeadTarget();if("TextBox"===t.type)t.un("blur");else if("Select"===t.type)t.un("change")}}function o(e,t){if(e.hasHead){var i=e.getHeadTarget();if(i instanceof x)s(e),i.setProperties({value:t}),r(e);else i.innerHTML=t}}function l(e,t){var a,r=this.activeCursorElement,s=this.cursorElement,l=_.event.getMousePosition(e),d=this.pageXY,u=this.leftTop,h=this.widthHeight;if(this.range){var f,p,m=!1;if(r.id===s.id)f=n.call(this,this.maxRangeValue),p=this.maxRangeValue,m=!0,a=Math.max(this.minStartPos-this.startPos,l[d]-this.startPos),a=Math.min(a,f);else f=n.call(this,this.minRangeValue),p=this.minRangeValue,a=Math.max(f,l[d]-this.startPos),a=Math.min(a,this.maxEndPos-this.startPos)}else r=s,a=Math.max(this.minStartPos-this.startPos,l[d]-this.startPos),a=Math.min(a,this.maxEndPos-this.startPos);var g,v=i.call(this,a);if(this.range)if(m)g=[v,p];else g=[p,v];else g=v;if(!t){if(a=n.call(this,v),r.style[this.leftTop]=a+"px",this.isShowSelectedBG)if(this.range){var y;if(m)this.bodySelectedElement.style[u]=a+"px",y=f-a;else this.bodySelectedElement.style[u]=f+"px",y=a-f;this.bodySelectedElement.style[h]=y+"px"}else{var x=c(this.cursorElement,h);this.bodySelectedElement.style[h]=a+x/2+"px"}this.fire("move",g)}return o(this,g),g}function d(e){_.removeClass(this.activeCursorElement,this.helper.getPartClasses("body-cursor-active")[0]);var t=l.call(this,e,!0);this.rawValue=t,this.minRangeValue=t[0],this.maxRangeValue=t[1],a(this,t,!0),this.fire("change",t);var i=document;this.helper.removeDOMEvent(i,"mouseup",d),this.helper.removeDOMEvent(i,"mousemove",l),e.preventDefault()}function u(e){var t=e.bodyElement,i=(e.cursorElement,_.getOffset(t)),a=e.leftTop,r=e.rightBottom,s=e.widthHeight;if(e[s]=i[s],"undefined"!=typeof e.min){var o=n.call(e,e.min);e.minStartPos=i[a]+o,e.startPos=i[a]}if("undefined"!=typeof e.max){var l=n.call(e,e.max);e.maxEndPos=i[a]+l,e.endPos=i[r]}}function h(e){var t=_.event.getMousePosition(e),i=this.pageXY,a=this.leftTop,r=this.helper.getPart("body"),s=_.getOffset(r),o=t[i]-s[a];if(this.range){var l=n.call(this,this.minRangeValue),d=n.call(this,this.maxRangeValue),u=l+(d-l)/2;if(o>u&&this.cursorElementTwo)return this.cursorElementTwo}return this.cursorElement}function c(e,t){return parseInt(_.getStyle(e,t),10)}function f(e){var t=h.call(this,e);this.activeCursorElement=t,_.addClass(t,this.helper.getPartClasses("body-cursor-active")[0]),u(this),e.preventDefault(),l.call(this,e);var i=document;this.helper.addDOMEvent(i,"mouseup",d),this.helper.addDOMEvent(i,"mousemove",l)}function p(e,t,i){if(i)e.helper.removeDOMEvent(t,"mousedown",f);else e.helper.addDOMEvent(t,"mousedown",f)}function m(e){var t=e.target,i=t.validate();if(i){var n=t.getValue();this.rawValue=+n,a(this,n)}}function g(e){var t=e.target,i=t.getValue();this.value=+i,a(this,i)}require("esui/Panel"),require("esui/TextBox"),require("esui/Select"),require("esui/validator/RequiredRule"),require("esui/validator/MaxRule"),require("esui/validator/MinRule"),require("esui/validator/PatternRule");var v=require("esui"),y=require("underscore"),_=require("esui/lib"),x=require("esui/InputControl"),exports={};exports.type="Slider",exports.initOptions=function(t){var i={orientation:"",start:0,end:10,step:1,unitText:"",isShowSelectedBG:!0,hasHead:!1,title:"标题",headType:"label",pattern:"^-?[1-9]d*|0$",errorMessgae:"输入的值必须为数字",datasource:[],hasFoot:!1,footStep:2,range:!1},n={};if(_.extend(n,i,t),n.start=+n.start,n.end=+n.end,n.step=+n.step,n.min="undefined"!=typeof n.min?n.min:n.start,n.max="undefined"!=typeof n.max?n.max:n.end,n.min=Math.max(n.min,n.start),n.max=Math.min(n.max,n.end),"vertical"===n.orientation)n.leftTop="top",n.rightBottom="bottom",n.widthHeight="height",n.cursorWH="height",n.pageXY="pageY";else n.leftTop="left",n.rightBottom="right",n.widthHeight="width",n.cursorWH="width",n.pageXY="pageX";n=e.call(this,n),this.$super([n])},exports.parseValue=function(e,t){if(t&&t.range||this.range)if("string"==typeof e){var i=e.split(",");return[+i[0],+i[1]]}return e},exports.setProperties=function(t){if(t.hasOwnProperty("rawValue"))t=e.call(this,t);this.$super([t])},exports.createHead=function(){if(this.hasHead){var e='<label for="${headValueDomId}" class="${headLabelClasses}">${title}：</label>',t={title:this.title,value:this.rawValue,headLabelClasses:this.helper.getPartClasses("head-label").join(),headValueClasses:this.helper.getPartClasses("head-value").join(),headValueDomId:this.helper.getId("head-value"),headValueId:this.id+"-head-value"};switch(this.headType){case"textbox":e+='<div class="${headValueClasses} ${headTextBoxClasses}"data-ui="id:${headValueId};childName:headValue;type:TextBox;required:required;value:${value};${max}${min}${pattern}${errorMessgae}"></div>',t.headTextBoxClasses=this.helper.getPartClasses("head-textbox").join(),t.max="undefined"!=typeof this.max?"max:"+this.max+";":"",t.min="undefined"!=typeof this.min?"min:"+this.min+";":"",t.pattern=this.pattern?"pattern:"+this.pattern+";":"",t.errorMessgae=this.errorMessgae?"patternErrorMessage:"+this.errorMessgae+";":"";break;case"select":e+='<div class="${headValueClasses} ${headSelectClasses}"data-ui="id:${headValueId};childName:headValue;type:Select;value:${value};"></div>',t.headSelectClasses=this.helper.getPartClasses("head-select").join();break;default:e+='<span class="${headValueClasses} ${headSpanClasses}"id="${headValueDomId}">${value}</span>',t.headSpanClasses=this.helper.getPartClasses("head-span").join()}if(this.unitText)t.unitText=this.unitText,t.headUnitClasses=this.helper.getPartClasses("head-unit").join(),e+='<span class="${headUnitClasses}">${unitText}</span>';var i=_.format(e,t),n=this.helper.createPart("head");n.innerHTML=i,this.main.appendChild(n);var a={main:n,renderOptions:this.renderOptions},r=v.create("Panel",a);if(r.initChildren(),this.addChild(r,"head"),"select"===this.headType){var s=r.getChild("headValue");s.setProperties({datasource:this.datasource,value:this.value})}return r}},exports.getHeadTarget=function(){if(!this.hasHead)return null;var e;if("label"===this.headType)e=this.helper.getPart("head-value");else e=this.getChild("head").getChild("headValue");return e},exports.createBody=function(){var e=this.bodyElement=this.helper.createPart("body"),t=this.cursorElement=this.helper.createPart("body-cursor");if(e.appendChild(t),this.range){var i=this.cursorElementTwo=this.helper.createPart("body-cursortwo");_.addClass(this.cursorElementTwo,this.helper.getPartClasses("body-cursor")),e.appendChild(i)}if(this.isShowSelectedBG){var n=this.bodySelectedElement=this.helper.createPart("body-selected");e.appendChild(n)}this.main.appendChild(e),u(this)},exports.footTemplate="<li>${text}${unitText}</li>",exports.createFoot=function(){if(this.hasFoot){var e=this.helper.getPart("foot");if(e)_.removeNode(e);e=this.helper.createPart("foot","ul");var t="",i=(this.end-this.start)/this.footStep,n=this.width/i,a="";if(this.unitText)a=this.unitText;for(var r=0;i>=r;r++){var s={text:this.start+r*this.footStep,unitText:a};t+=_.format(this.footTemplate,s)}e.innerHTML=t,this.main.appendChild(e),y.each(_.getChildren(e),function(e,t){e.style.left=t*n-_.getOffset(e).width/2+"px"})}},exports.initStructure=function(){if("vertical"===this.orientation)_.addClass(this.main,this.helper.getPartClasses("vertical")[0]);this.main.style[this.widthHeight]=this.size+"px",this.createHead(),this.createBody(),this.createFoot()},exports.initEvents=function(){t.call(this),r(this)},exports.getValue=function(){var e;if(this.range)e=[this.minRangeValue,this.maxRangeValue];else e=this.getRawValue();return e},exports.repaint=require("esui/painters").createRepaint(x.prototype.repaint,{name:"rawValue",paint:function(e,t){a(e,t,!0)}}),exports.dispose=function(){if(this.bodyElement=null,this.cursorElement=null,this.bodySelectedElement=null,this.activeCursorElement=null,this.range)this.cursorElementTwo=null;this.$super(arguments)};var M=require("eoo").create(x,exports);return v.register(M),M}),define("ub-ria-ui/Spinner",["require","esui/InputControl","esui/lib","moment","underscore","esui/main","esui/painters","eoo","esui"],function(require){function e(e){if(e)e=parseFloat(e);return isNaN(e)?"":e}function t(t){var i=this.getInput(),n="object"==typeof this.scale?this.scale:e(this.scale),a=this.format,r=c(i.value,a),s=this.max,o=this.min;if(r=r.isValid()?r:o,t==p.UP)if(r=r.add(n.value,n.key),c.max(r,s)==s)r=c(r,a).format(a);else if(this.turn&&"false"!==this.turn)r=c(o,a).format(a);else r=c(s,a).format(a);else if(r=r.subtract(n.value,n.key),c.min(r,o)==o)r=c(r,a).format(a);else if(this.turn&&"false"!==this.turn)r=c(s,a).format(a);else r=c(o,a).format(a);l.call(this,r)}function i(t){var i=this.getInput(),n=e(this.scale),a=e(i.value),r=this.max,s=this.min;if(t==p.UP){if(a+=n,a>r)if(this.turn&&"false"!==this.turn)a=s;else a=r}else if(a-=n,s>a)if(this.turn&&"false"!==this.turn)a=r;else a=s;l.call(this,a)}function n(e){if("number"!=this.format)t.call(this,e);else i.call(this,e)}function a(e){if(!this.disabled&&!this.readOnly){var t=e.target.id==this.helper.getId("up")?p.UP:p.DOWN,i={direct:t},a=this.fire("scrollValue",i);if(!a.isDefaultPrevented())n.call(this,t)}}function r(t){var i=this;this.timer=setInterval(function(){return a.call(i,t)},+e(this.timeInterval)),this.longTimer=setTimeout(function(){clearInterval(i.timer),i.timer=setInterval(function(){return a.call(i,t)},e(this.timeInterval)/2)},3e3)}function s(e){var t=1200-this.timeInterval;a.call(this,e);var i=this;this.timer=setTimeout(function(){return r.call(i,e)},t),e.preventDefault()}function o(){clearInterval(this.timer),clearTimeout(this.timer),clearTimeout(this.longTimer),this.timer=0,this.longTimer=0}function l(e){if(this.precision)e=e.toFixed(this.precision);var t=this.getInput();t.value=e}function d(){var e=this.helper,t=e.getPart("up"),i=e.getPart("down");e.removeDOMEvent(t,"mousedown",s),e.removeDOMEvent(i,"mousedown",s),e.removeDOMEvent(t,"mouseup",o),e.removeDOMEvent(i,"mouseup",o),e.removeDOMEvent(t,"mouseout",o),e.removeDOMEvent(i,"mouseout",o)}var u=require("esui/InputControl"),h=require("esui/lib"),c=require("moment"),f=(require("underscore"),require("esui/main")),exports={};exports.type="Spinner",exports.constructor=function(){this.$super(arguments),this.timer=0,this.longTimer=0};var p={UP:"up",DOWN:"down"};exports.initOptions=function(t){var i={};h.extend(i,this.$self.defaultProperties,t);var n=i.format,a=i.max,r=i.min;if("number"===n)a="indefinite"===a?Number.MAX_VALUE:e(a),r="indefinite"===r?-Number.MAX_VALUE:e(r);else a="indefinite"==a?c().add(50,"years"):c(a,n),r="indefinite"==r?c().subtract(50,"years"):c(r,n);i.max=a,i.min=r;var s=i.scale;if("number"===n){var o=(s+"").indexOf(".");if(o>-1)i.precision=s.length-o-1;else i.precision=0}if("number"!==n&&/^\s*\{/.test(s))i.scale=JSON.parse(s);this.setProperties(i)},exports.initStructure=function(){var e=this.helper,t=['<input id="${inputId}" type="text" />','<span id="${upId}" class="${upClass} ${iconClass}"></span>','<span id=${downId} class="${downClass} ${iconClass}"></span>'].join(""),i=this.main;i.innerHTML=h.format(t,{inputId:e.getId("input"),upId:e.getId("up"),upClass:e.getPartClasses("up"),downId:e.getId("down"),downClass:e.getPartClasses("down"),iconClass:e.getIconClass()}),h.addClass(i,e.getPrefixClass("textbox")),f.init(i,{viewContext:this.viewContext})},exports.initEvents=function(){var e=this.helper,t=e.getPart("up"),i=e.getPart("down");e.addDOMEvent(t,"mousedown",s),e.addDOMEvent(i,"mousedown",s),e.addDOMEvent(t,"mouseup",o),e.addDOMEvent(i,"mouseup",o),e.addDOMEvent(t,"mouseout",o),e.addDOMEvent(i,"mouseout",o)},exports.repaint=require("esui/painters").createRepaint(u.prototype.repaint,{name:["rawValue"],paint:function(t,i){var n=t.max,a=t.min,r=t.format;if("number"===t.format)i=e(i),i=Math.max(i,a),i=Math.min(i,n);else{if(i=c(i,r),i.isValid())i=c.max(i,a),i=c.min(i,n);else i=a;i=c(i,r).format(r)}l.call(t,i)}},{name:["width"],paint:function(e,t){t=parseInt(t,10),e.main.style.width=t+"px"}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=e.getInput();n.disabled=t,n.readOnly=i}}),exports.getInput=function(){return h.g(this.helper.getId("input"))},exports.getValue=function(){var e=this.getInput();return e.value},exports.setValue=function(e){l.call(this,e)},exports.dispose=function(){d.call(this),this.$super(arguments)};var m=require("eoo").create(u,exports);return m.defaultProperties={turn:!0,scale:1,width:200,height:30,max:"indefinite",min:"indefinite",format:"number",timeInterval:100},require("esui").register(m),m}),define("ub-ria-ui/Sticky",["require","underscore","esui/lib","esui/painters","esui/Control","eoo","esui/main"],function(require){function e(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}function t(t){if(t.disabled)return!1;var i=window.pageYOffset||document.documentElement.scrollTop,n=e()-window.innerHeight,a=i>n?n-i:0,r=t.initialTop-t.top-a;return i>=r}function i(e){e.currentTop=null;var t=e.main.style;t.position="",t.top="",t.width="",t.margin="0px",t.left=""}function n(){var n=l,a=window.pageYOffset||document.documentElement.scrollTop;if(n.length&&!(0>a))for(var s,o,d,u,h=document.documentElement.clientHeight,c=e()-h,f=a>c?c-a:0,p=0;p<n.length;p++)if(d=n[p],u=d.main,u.offsetWidth&&u.offsetHeight)if(!t(d)){if(!isNaN(d.currentTop))i(d)}else{if(d.top<0)s=0;else o=u.offsetHeight,s=e-o-d.top-a-f,s=0>s?s+d.top:d.top;if(d.currentTop!=s){var m=u.style,g=d.getWidthFrom?r.g(d.getWidthFrom).offsetWidth:u.offsetWidth;m.width=g+"px",m.position="fixed",m.top=parseInt(s)+"px",m.left=r.getOffset(u).left+"px",d.currentTop=s}}else;}var a=require("underscore"),r=require("esui/lib"),s=(require("esui/painters"),require("esui/Control")),o=require("eoo"),l=[],d=r.getComputedStyle,exports={type:"Sticky",initOptions:function(e){var t={top:0};a.extend(t,e),this.setProperties(t)},initStructure:function(){var e=document.createElement("div"),t=this.main;r.insertBefore(e,t),e.appendChild(t),r.addClass(e,this.helper.getPartClassName("placeholder"));var i="absolute"!=d(t,"position")?t.offsetHeight:"",n=e.style;n.height=i+"px",n.float="none"!=d(t,"float")?d(t).float:"",n.margin=d(t,"margin"),this.initialTop=r.getOffset(t).top},initEvents:function(){if(0===l.length)r.on(window,"scroll",n);l.push(this)},dispose:function(){var e=this;e.$super(arguments);var t=e.main;if(i(e),l=a.without(l,e),0===l.length)r.un(window,"scroll",n);var s=t.parentNode;r.insertBefore(t,t.parentNode),r.removeNode(s)}},u=o.create(s,exports);return require("esui/main").register(u),u}),define("ub-ria-ui/TokenField",["require","underscore","esui/lib","esui/InputControl","eoo","esui/TextBox","esui/painters","esui/main"],function(require){var e=require("underscore"),t=require("esui/lib"),i=require("esui/InputControl"),n=require("eoo");require("esui/TextBox");var a=function(e){var t=this;setTimeout(function(){t.helper.addPartClasses("flash",e)},0),setTimeout(function(){t.helper.removePartClasses("flash",e)},300)},r=function(t){var i={};if(e.each(this.data,function(e,n){if(e.value===t)return i.dataId=n,i.token=e,!1;else return void 0}),i.dataId)i.tokenElement=document.querySelector("div[data-id="+i.dataId+"]");return i},s=function(){var t=this.getInput(),i=t.getRawValue();if(!(i.length<this.minLength)){if(!this.repeat){var n=r.call(this,i);if(n.token)return a.call(this,n.tokenElement),void(e.isFunction(this.repeatCallback)&&this.repeatCallback(n))}var s=this.getRawValue();if(this.setTokens(i,!0),s!==this.getRawValue()||!i.length)t.setRawValue("")}},exports={constructor:function(){this.$super(arguments),this.data={}},type:"TokenField",createMain:function(){return document.createElement("div")},initOptions:function(t){var i={width:300,inputWidth:90,minLength:0,limit:0,delimiter:",",tokens:"",repeat:!1};if(e.extend(i,t),"false"===this.repeat||""===this.repeat)this.repeat=!1;this.delimiters="string"==typeof i.delimiter?i.delimiter.split(""):i.delimiter,this.triggerKeys=e.map(this.delimiters,function(e){return e.charCodeAt(0)}),this.delimiter=this.delimiters[0];var n=e.indexOf(this.delimiters," ");if(n>=0)this.delimiters[n]="\\s";var a=e.indexOf(this.delimiters,"-");if(a>=0)delete this.delimiters[a],this.delimiters.unshift("-");var r=this,s=["\\","$","[","{","^",".","|","?","*","+","(",")"];e.each(this.delimiters,function(t,i){var n=e.indexOf(s,t);if(n>=0)r.delimiters[i]="\\"+t}),i.name=i.name||this.main.getAttribute("name"),this.setProperties(i)},initStructure:function(){if("input"===this.main.nodeName.toLowerCase())this.helper.replaceMain(),this.main.id=this.helper.getId();var e=['<input type="text" name="${inputName}" autocomplete="off"',' class="${inputClasses}"',' data-ui-type="TextBox"',' data-ui-width="${width}"',' data-ui-id="${inputId}" />'].join("");this.main.innerHTML=t.format(e,{inputName:this.name,inputId:this.helper.getId("input"),inputClasses:this.helper.getPartClasses("input"),width:this.inputWidth}),this.initChildren(this.main),this.setTokens(this.tokens,!1)},initEvents:function(){var t=this.helper;t.addDOMEvent(this.main,"click",this.focusInput);var i=this.getInput(),n=i.getFocusTarget();i.on("focus",e.bind(this.focus,this)),i.on("blur",e.bind(this.blur,this)),i.on("enter",e.bind(this.enter,this)),i.on("keypress",e.bind(this.keypress,this)),t.addDOMEvent(n,"keydown",this.keydown),t.addDOMEvent(n,"keyup",this.keyup)},getInput:function(){var e=this.helper.getId("input");return this.viewContext.get(e)},createToken:function(i){if("string"==typeof i)i={value:i,label:i};else i=e.extend({},i);if(i.value=t.trim(i.value),i.label=t.trim(i.label)||i.value,i.value&&i.label&&!(i.label.length<=this.minLength))if(!(this.limit&&this.getTokens().length>=this.limit)){this.fire("beforecreate",{token:i});var n=document.createElement("div");n.className=this.helper.getPartClasses("item"),n.innerHTML=this.helper.getPartHTML("label","span")+this.helper.getPartHTML("close","span");var a=t.getGUID();t.setAttribute(n,"data-id",a),this.data[a]=i;var r=this.getInput(),s=r.main,o=t.dom.first(n);o.innerHTML=i.label;var l=t.dom.last(n);t.addClass(l,this.helper.getIconClass("remove")),this.helper.addDOMEvent(n,"click",this.remove),t.insertBefore(n,s),this.fire("aftercreate",{token:i,relatedTarget:n})}},focusInput:function(){var e=this.getInput();e.getFocusTarget().focus()},focus:function(){this.focused=!0,this.helper.addStateClasses("focus")},blur:function(){this.focused=!1,this.helper.removeStateClasses("focus")},keydown:function(e){var t=this.getInput();switch(e.keyCode){case 8:if(t.getFocusTarget()===document.activeElement)this.lastInputValue=t.getRawValue()}},keypress:function(t){var i=t.target;if(e.indexOf(this.triggerKeys,t.keyCode)>-1&&i.getFocusTarget()===document.activeElement)this.enter(t),t.preventDefault()},keyup:function(e){if(this.focused){var t=this.getInput(),i=t.getRawValue();switch(e.keyCode){case 8:case 46:if(t.getFocusTarget()===document.activeElement){if(i.length||this.lastInputValue)break;this.remove()}}}},enter:function(e){var t=e.target,i=t.getRawValue();if(t.getFocusTarget()===document.activeElement&&i.length)s.call(this)},remove:function(e){var i=e&&e.target;if(i)for(var n=this.helper.getPartClasses("item");!t.hasClass(i,n);)i=i.parentNode;else i=t.dom.previous(this.getInput().main);var a=t.getAttribute(i,"data-id");i.parentNode.removeChild(i),delete this.data[a]},setTokens:function(i,n){if(i){var a=this;if(!n)e.each(t.getChildren(this.main),function(e){if(t.hasClass(e,"item")){var i=t.getAttribute(e,"data-id");delete a.data[i],e.parentNode.removeChild(e)}});if("string"==typeof i)if(this.delimiters.length)i=i.split(new RegExp("["+this.delimiters.join("")+"]"));else i=[i];e.each(i,function(e){a.createToken(e)})}},getTokens:function(){var i=[],n=this;return e.each(t.getChildren(this.main),function(e){if(t.hasAttribute(e,"data-id")){var a=t.getAttribute(e,"data-id"),r=n.data[a];if(r)i.push(r)}}),i},getRawValue:function(t){return t=t||this.delimiter,e.map(this.getTokens(),function(e){return e.value}).join(t)},repaint:require("esui/painters").createRepaint(i.prototype.repaint,{name:["width"],paint:function(e,t){if(!isNaN(t))e.main.style.width=parseInt(t,10)+"px"}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=e.getInput();n.setProperties({disabled:t,readOnly:i})}})},o=n.create(i,exports);return require("esui/main").register(o),o}),define("ub-ria-ui/uploader/File",["require","esui/lib","underscore","mini-event/EventTarget","eoo"],function(require){function e(e){if(i.isNumber(e)){var t=e/1024,n=t/1024;if(n>=1)return n.toFixed(1)+"MB";else return t.toFixed(1)+"KB"}return"N/A"}var t=require("esui/lib"),i=require("underscore"),n={QUEUED:0,UPLOADING:1,FAILED:2,DONE:3},exports={size:void 0,loaded:0};exports.constructor=function(e){if(window.File&&e instanceof window.File)this.name=e.name,this.raw=e,this.size=e.size;else if(e)i.extend(this,e);this.id=this.id||t.getGUID(),this.status=n.QUEUED,this.serverData=null},exports.getProgress=function(){if(!i.isUndefined(this.size)){var e=Math.ceil(this.loaded/this.size*100);return e+"%"}return"N/A"};var a=require("mini-event/EventTarget"),r=require("eoo").create(a,exports);return r.formatSize=e,i.extend(r,n),r}),define("ub-ria-ui/uploader/FileInput",["require","esui/InputControl","./File","underscore","esui/lib","esui/painters","eoo","esui"],function(require){function e(){var t=this,r=a.getGUID("fileinput");if(this.lastUid){var s=a.g(this.lastUid+"_form");if(s)n.extend(s.style,{top:"100%"})}var o=document.createElement("form");o.setAttribute("id",r+"_form"),o.setAttribute("method","post"),o.setAttribute("enctype","multipart/form-data"),o.setAttribute("encoding","multipart/form-data"),a.addClass(o,this.helper.getPartClassName("form")),a.extend(o.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"});var l=document.createElement("input");if(l.setAttribute("id",r),l.setAttribute("type","file"),l.setAttribute("name",this.name),l.setAttribute("accept",this.accept),a.extend(l.style,{fontSize:"999px",opacity:0,position:"absolute",top:0,left:0,width:"100%",height:"100%"}),a.ie&&a.ie<10)a.extend(l.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"});o.appendChild(l),this.main.appendChild(o),l.onchange=function(){var a;if(this.value){if(this.files&&this.files.length)a=new i(this.files[0]);else a=new i,a.name=this.value;n.extend(a,{id:r}),t.files=[a],this.onchange=function(){},t.fire("change"),e.call(t)}},this.lastUid=r}var t=require("esui/InputControl"),i=require("./File"),n=require("underscore"),a=require("esui/lib"),exports={name:"file-data"};exports.type="FileInput",exports.constructor=function(){this.$super(arguments),this.files=[],this.lastUid=null};var r=!(a.ie&&a.ie<=9);exports.initOptions=function(e){var t={};a.extend(t,this.$self.defaultProperties,e),this.setProperties(t)},exports.initStructure=function(){if(r){var t='<input id="${inputId}" type="file" style="font-size:999px;opacity:0;display:none;" ${multiplel} ${accept} />';this.lastUid=this.helper.getId("input"),this.main.innerHTML=a.format(t,{inputId:this.lastUid,multiple:this.multiple,accept:this.accept&&this.accept.join(",")||""})}else{e.call(this);var i=this.main.parentNode;if(i){if("static"===a.getStyle(i,"position"))i.style.position="relative";var s=a.getStyle(i,"height");if("auto"===s||0===parseInt(s,10))i.style.height="100%"}n.extend(this.main.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"})}},exports.initEvents=function(){if(r){var e=this,t=a.g(this.lastUid);this.browseButton.on("click",function(e){if(t&&!t.disabled)t.click();e.preventDefault()}),t.onchange=function(){e.files=[],n.each(this.files,function(t){e.files.push(new i(t))}),e.reset(),e.fire("change")}}},exports.repaint=require("esui/painters").createRepaint(t.prototype.repaint,{name:"accept",paint:function(e,t){var i=a.g(e.lastUid);if(i&&t)a.setAttribute(i,"accept",t.join(","));else a.removeAttribute(i,"accept")}},{name:"multiple",paint:function(e,t){var i=a.g(e.lastUid);if(i&&t)a.setAttribute(i,"multiple","multiple");else a.removeAttribute(i,"multiple")}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=a.g(e.lastUid);n.disabled=t,n.readOnly=i}}),exports.reset=function(){var e=a.g(this.lastUid);if(!a.ie)e.value="";else{var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.onchange=e.onchange}},exports.dispose=function(){this.$super(arguments)};var s=require("eoo").create(t,exports);return s.defaultProperties={},require("esui").register(s),s}),define("ub-ria-ui/uploader/XMLHttpRequest",["require","underscore","mini-event/EventTarget","eoo"],function(require){var e=require("underscore"),t=0,i=1,exports={method:"POST",url:"",headers:{},timeout:0,readyState:t,status:0,statusText:"",responseType:"json",responseText:null,response:null};exports.open=function(e,t){this.method=e,this.url=unescape(encodeURIComponent(t)),this.readyState=i},exports.send=function(){},exports.getStatus=function(){return this.status},exports.getResponse=function(){if("json"===this.responseType)if(e.isString(this.response)&&window.JSON)try{return JSON.parse(this.response)}catch(t){return{}}return this.response},exports.abort=function(){this.fire("abort")};var n=require("mini-event/EventTarget"),a=require("eoo").create(n,exports);return a}),define("ub-ria-ui/uploader/HTML4XMLHttpRequest",["require","underscore","esui/lib","./File","./XMLHttpRequest","eoo"],function(require){function e(e){if(a){var n=a.id.replace(/_iframe$/,""),r=i.g(n),s=i.g(n+"_placeholder");if(s&&r)i.insertBefore(r,s),s.parentNode.removeChild(s);var o=i.g(n+"_form");if(o){var l=o.getElementsByTagName("input");t.each(l,function(e){var t=e.getAttribute("type");if("hidden"===t)e.parentNode.removeChild(e)}),l=[],o.parentNode.removeChild(o),o=null}setTimeout(function(){if(a.parentNode)a.parentNode.removeChild(a);a=null,e()},1)}}var t=require("underscore"),i=require("esui/lib"),n=require("./File"),exports={},a=null;exports.send=function(r,s){function o(){a=i.dom.createElement(i.format('<iframe id="${uid}_iframe" name="${uid}_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',{uid:l})),u.appendChild(a),i.on(a,"load",function(){try{var t=a.contentWindow.document||a.contentDocument||window.frames[a.id].document;if(/^4(0[0-9]|1[0-7]|2[2346])\s/.test(t.title))p.status=t.title.replace(/^(\d+).*$/,"$1");else p.status=200,p.response=i.trim(t.body.innerHTML),p.fire("progress",{loaded:p.response.length,total:p.response.length}),p.fire("uploadprogress",{loaded:d.size||1025,total:d.size||1025})}catch(n){p.status=404}e.call(p,function(){if(200===p.status)p.fire("load");else p.fire("error",{status:p.status})})})}this.status=null,this.response=null;var l,d=null;if(t.each(s,function(e,t){if(e&&e instanceof n)d=e,l=d.id,delete s[t]
}),l){var u=r.container||document.body,h=i.g(l),c=i.dom.createElement('<div id="'+l+'_placeholder" style="display:none;"></div>');i.insertBefore(c,h);var f=i.g(l+"_form");if(!f)f=document.createElement("form"),f.setAttribute("id",l+"_form"),f.setAttribute("method",this.method),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),f.style.display="none",u.appendChild(f);f.setAttribute("target",l+"_iframe"),f.appendChild(h),t.each(s,function(e,i){var n=document.createElement("input");t.extend(n,{type:"hidden",name:i,value:e}),f.appendChild(n)}),f.setAttribute("action",this.url),o(),f.submit(),this.fire("loadstart");var p=this}},exports.abort=function(){if(a&&a.contentWindow)if(a.contentWindow.stop)a.contentWindow.stop();else if(a.contentWindow.document.execCommand)a.contentWindow.document.execCommand("Stop");else a.src="about:blank";var t=this;e.call(t,function(){t.fire("abort")})};var r=require("./XMLHttpRequest"),s=require("eoo").create(r,exports);return s}),define("ub-ria-ui/uploader/HTML5XMLHttpRequest",["require","underscore","esui/lib","./File","./XMLHttpRequest","eoo"],function(require){var e,t=require("underscore"),i=(require("esui/lib"),require("./File")),exports={};exports.send=function(n,a){this.status=null,this.response=null,e=new window.XMLHttpRequest,e.open(this.method,this.url,!0);var r=new window.FormData;if(!t.isEmpty(a))t.each(a,function(e,t){if(e instanceof i)e=e.raw;r.append(t,e)});var s=this;if(e.upload)e.addEventListener("load",function(t){if(200===e.status)s.response=e.response,s.fire("load",t);else s.fire("error",t)}),e.addEventListener("error",function(e){s.fire("error",e)}),e.addEventListener("progress",function(){s.fire("progress")}),e.upload.addEventListener("progress",function(e){s.fire("uploadprogress",{loaded:e.loaded,total:e.total})});else e.onreadystatechange=function(){switch(e.readyState){case 1:break;case 2:break;case 3:var t=0,i=0;try{t=e.getResponseHeader("Content-Length")||0,i=e.responseText.length}catch(n){t=0,i=0}s.fire("progress",{lengthComputable:!!t,total:parseInt(t,10),loaded:i});break;case 4:if(e.onreadystatechange=null,0===e.status)s.fire("error");else s.fire("load")}};if(this.responseType&&"responseType"in e)e.responseType=this.responseType;e.send(r)},exports.getResponse=function(){if("json"===this.responseType)return this.response=e.response,this.response;else if("text"===this.responseType||""===responseType)return JSON.parse(this.responseText);return{}},exports.abort=function(){if(e&&e.abort)e.abort();me.fire("abort")};var n=require("./XMLHttpRequest"),a=require("eoo").create(n,exports);return a}),define("ub-ria-ui/uploader/Uploader",["require","esui/validator/Validity","esui/validator/ValidityState","esui/InputControl","./File","./FileInput","underscore","esui/lib","esui/main","./HTML5XMLHttpRequest","./HTML4XMLHttpRequest","esui/painters","eoo","esui"],function(require){function e(e,t){return c.format(v[e],t||{})}function t(){h.each(h.keys(y),function(e){y[e]=0});for(var e=this.files,t=0;t<e.length;t++){var i=e[t];if(!h.isUndefined(i.size)&&!h.isUndefined(y.size))y.size+=i.size,y.loaded+=i.loaded||0;else y.size=void 0;if(i.status==u.DONE)y.uploaded++;else if(i.status==u.FAILED)y.failed++;else y.queued++}if(h.isUndefined(y.size))y.percent=e.length>0?Math.ceil(y.uploaded/e.length*100):0;else y.percent=y.size>0?Math.ceil(y.loaded/y.size*100):0;y.percent=Math.min(y.percent,100)}function i(){var e=c.g(this.helper.getId("progress"));if(this.state===p&&y.percent>0)e.style.width=y.percent+"%",e.parentNode.style.display="block";else setTimeout(function(){e.parentNode.style.display="none"},500)}function n(){var e;if(_)e=require("./HTML5XMLHttpRequest");else e=require("./HTML4XMLHttpRequest");return new e}function a(){if(this.state==p){var i=this,r=0;if(h.find(this.files,function(s){if(s.status==u.QUEUED){var o=i.fire("beforeupload",s);if(o.isDefaultPrevented())return s.status=u.DONE,!1;s.status=u.UPLOADING;var l=h.clone(i.extraArgs);l[s.name]=s;var d=n();return d.open("POST",i.action),d.send({container:i.main},l),d.on("load",function(e){s.status=u.DONE;var t=e.target,n=t.getResponse();s.serverData=n,i.fire("uploaded",{file:s,data:n}),a.call(i)}),d.on("uploadprogress",function(e){s.loaded=Math.min(s.size,e.loaded),t.call(i),i.fire("progress",y)}),d.on("error",function(){i.fire("error",{code:g.HTTP,message:e(g.HTTP),data:s}),a.call(i)}),!0}else r++}),r==i.files.length){if(this.state!==m)this.state=m,this.fire("statechanged");this.fire("complete",i.files)}}}function r(){var t=this,i=this.getFileInput(),n=[],a=[];if(h.each(i.files,function(i){i.status=u.QUEUED;var r;if(t.multiple===!0&&t.limit&&t.files.length>=t.limit)r=g.FILE_MAX_NUMBER;else if(!t.checkFileFormat(i))r=g.FILE_EXTENSIONS;if(r)return void a.push({code:r,message:e(r),data:i});else{if(t.multiple===!1)t.files=[i];else t.files.push(i);n.push(i)}}),n.length>0)this.fire("filesadded",{data:n});if(a.length>0)this.fire("error",a)}function s(){var e=this.helper.getId("button");return this.viewContext.get(e)}var o=require("esui/validator/Validity"),l=require("esui/validator/ValidityState"),d=require("esui/InputControl"),u=require("./File");require("./FileInput");var h=require("underscore"),c=require("esui/lib"),f=require("esui/main"),p=0,m=1,g={HTTP:1,FILE_EXTENSIONS:2,FILE_DUPLICATE:3,FILE_MAX_SIZE:4,FILE_MAX_NUMBER:5},v=["","网络错误","仅接受以下文件格式: {0}","不允许重复","超出最大上传尺寸","文件数量超过最大限制"],exports={};exports.type="Uploader",exports.constructor=function(){this.$super(arguments),this.files=[],this.state=m};var y={size:void 0,loaded:0,uploaded:0,failed:0,queued:0,percent:0},_=window.File&&window.XMLHttpRequest&&(new window.XMLHttpRequest).upload;exports.initOptions=function(e){var t={};if(c.extend(t,this.$self.defaultProperties,e),c.isInput(this.main))if(t.accept=t.accept||c.getAttribute(this.main,"accept"),t.name=t.name||this.main.name,c.hasAttribute(this.main,"multiple"))t.multiple=!0;else t.multiple=!1;if("string"==typeof t.accept)t.accept=c.splitTokenList(t.accept);var i=t.autoUpload;if("true"===i)t.autoUpload=!0;var n=t.multiple;if("false"===n||!n)t.multiple=!1,t.autoUpload=!0;if(!t.hasOwnProperty("title")&&this.main.title)t.title=this.main.title;this.setProperties(t)},exports.initStructure=function(){if("FORM"!==this.main.nodeName)this.helper.replaceMain();var e=this.helper.getId("input-container"),t=['<div id="${inputContainerId}">','<button data-ui-id="${buttonId}" data-ui="type:Button;variants:${variants}"></button>',"</div>",'<div class="ui-progress" class="hide">','<div id="${progressId}" class="ui-progress-bar"></div>',"</div>"].join(""),i=this.helper.getId("button");this.main.innerHTML=c.format(t,{buttonId:i,inputContainerId:e,name:this.name?'name="'+this.name+'" ':" ",progressId:this.helper.getId("progress"),variants:this.buttonVariants||""}),f.init(this.main,{viewContext:this.viewContext});var n=f.create("FileInput",{id:this.helper.getId("input"),browseButton:this.viewContext.get(i),name:this.name});if(n.appendTo(c.g(e)),n.on("change",c.bind(this.receiveFile,this)),!this.multiple){var a=c.dom.createElement(c.format('<label id="${labelId}" class="${labelClasses}"></label>',{labelId:this.helper.getId("label"),labelClasses:this.helper.getPartClassName("label")}));c.insertAfter(a,this.main)}},exports.initEvents=function(){if(this.on("filesadded",t,this),this.on("filesremoved",t,this),this.on("statechanged",t,this),this.on("uploaded",t,this),this.showProgress)this.on("progress",i,this),this.on("complete",i,this);if(this.on("complete",this.notifyComplete,this),this.multiple===!1)this.on("filesadded",function(e){var t=e.data,i=this.helper.getPart("label");i.innerHTML=t[0].name},this);this.on("error",this.notifyFail,this)},exports.repaint=require("esui/painters").createRepaint(d.prototype.repaint,{name:["text"],paint:function(e,t){var i=s.call(e);i.setContent(t)}},{name:["accept","multiple","disabled","readOnly"],paint:function(e,t,i,n,a){var r=e.getFileInput();r.setProperties({accept:t,multiple:i,disabled:n,readOnly:a})}},{name:["width"],paint:function(e,t){if(!isNaN(t)){e.main.style.width=t+"px";var i=s.call(e);i.setProperties({width:t})}}},{name:"rawValue",paint:function(e,t){if(h.isObject(t)){if(!h.isArray(t))t=[t];var i=[];if(h.each(t,function(e){var t=new u;t.status=u.DONE,t.serverData=e,t.name=e.name||"",i.push(t)}),i.length)if(e.setFile(i),e.multiple===!1){var n=s.call(e);n.setContent(e.overrideText)}}}}),exports.getFileInput=function(){var e=this.helper.getId("input");return this.viewContext.get(e)},exports.checkFileFormat=function(t){if(this.accept){var i=t.name.split(".");i="."+i[i.length-1].toLowerCase();for(var n=!1,a=0;a<this.accept.length;a++){var r=this.accept[a].toLowerCase();if(r===i){n=!0;break}if("*"===r.slice(-1)[0]){var s=r.split("/")[0],o=this.mimeTypes[s];if(o&&o.hasOwnProperty(i)){n=!0;break}}}if(!n){var l=g.FILE_EXTENSIONS;me.fire("error",{code:l,message:e(l,this.accept.join(",")),data:t})}return n}return!0},exports.start=function(){if(this.state!=p)this.showUploading(),this.state=p,this.fire("statechanged"),a.call(this)},exports.stop=function(){if(this.state!=m)this.state=m,this.fire("statechanged"),this.fire("cancelupload")},exports.receiveFile=function(){if(r.call(this),this.autoUpload)this.start()},exports.showUploading=function(){var e=s.call(this);e.setContent(this.busyText)},exports.removeFile=function(e){for(var t="string"==typeof e?e:e.id,i=this.files,n=i.length-1;n>=0;n--)if(i[n].id===t){var e=i.splice(n,1)[0];return this.fire("filesremoved",{data:e}),e}},exports.addFile=function(e){if(!h.isArray(e))e=[e];Array.prototype.push.apply(this.files,e),this.fire("filesadded",{data:e})},exports.setFile=function(e){for(var t=0,i=this.files.length;i>t;t++)this.removeFile(this.files[t]);this.addFile(e);var n=h.every(e,function(e){return e.status===u.DONE});if(n)this.fire("complete",e)},exports.getValidityLabel=function(){var e,t=this.helper.getPart("label"),i=this.main;if(t)this.main=t;return e=this.$super(arguments),this.main=i,e},exports.getTotal=function(){return y},exports.notifyFail=function(e){if(this.multiple===!1){var t=e.message||"上传失败",i=new o,n=new l(!1,t);i.addState("upload",n),this.showValidity(i)}},exports.notifyComplete=function(){var e=s.call(this);e.setContent(this.completeText);var t=this.multiple===!0?this.text:this.overrideText;setTimeout(function(){e.setContent(t)},1e3)},exports.getRawValue=function(){var e=[];if(h.each(this.files,function(t){if(t&&t.status===u.DONE)e.push(t.serverData)}),e.length>0){if(this.multiple===!1)e=e[0];return e}return null},exports.dispose=function(){this.$super(arguments)};var x=require("eoo").create(d,exports),M={image:{".jpg":!0,".jpeg":!0,".gif":!0,".bmp":!0,".tif":!0,".tiff":!0,".png":!0},flash:{".flv":!0,".swf":!0}};return x.defaultProperties={width:"",fileType:"*",text:"点击上传",busyText:"正在上传...",completeText:"上传完成",overrideText:"重新上传",autoUpload:!1,action:"",mimeTypes:M,multiple:!1,extraArgs:{},showProgress:!0,progressHeight:2,limit:0,buttonVariants:"primary"},require("esui").register(x),x}),define("esui/Table",["require","./lib","underscore","./controlHelper","./Control","./main"],function(require){function e(e){var t={followHeightArr:[0,0],followWidthArr:[],handlers:[]};Ot.call(this,Et.extend({},e,t))}function t(e){return!("undefined"==typeof e||null===e)}function i(e){return!t(e)||!e.toString().length}function n(e,t,i){It.setAttribute(e,"data-"+t,i)}function a(e,t){return It.getAttribute(e,"data-"+t)}function r(e,t){var i=It.getStyle(e,t);return""===i?0:parseInt(i,10)||0}function s(e,t){return Nt.getId(e,t)}function o(e,t){return Nt.getPartClasses(e,t).join(" ")}function l(e){return It.g(s(e,"head"))}function d(e){return It.g(s(e,"body"))}function u(e){return It.g(s(e,"foot"))}function h(e,t){return It.g(s(e,"row")+t)}function c(e){return It.g(s(e,"select-all"))}function f(e,t){e.selectedIndex=t;for(var i={},n=t.length-1;n>=0;n--)i[t[n]]=1;e.selectedIndexMap=i}function p(e,t){if(e.selectedIndexMap)return!!e.selectedIndexMap[t];else return!1}function m(e){for(var t=0,i=e.realFields,n=e.minColsWidth,a=0,r=i.length;r>a;a++){var s=i[a];t+=s.width||n[a]}return t}function g(e){if(e.width)return e.width;var t=document.createElement("div"),i=e.main.parentNode;i.appendChild(t);var n=t.offsetWidth;return t.parentNode.removeChild(t),n}function v(e){if(e.fields){for(var t=e.fields,i=t.slice(0),n=i.length;n--;)if(!i[n])i.splice(n,1);if(e.realFields=i,e.select)switch(e.select.toLowerCase()){case"multi":i.unshift(ht(e));break;case"single":i.unshift(ct(e))}}}function y(e){if(e.followHead)if(x(e),!e.noFollowHeadCache)w(e)}function _(e){if(e.followHead)x(e),w(e)}function x(e){if(e.followHead){for(var t=e.followDoms=[],i=e.main.parentNode.firstChild,n=e.id;i;){if(1===i.nodeType&&a(i,"follow-thead")===n)t.push(i);i=i.nextSibling}b(e),M(e)}}function M(e){var t=e.followDoms,i=e.followHeightArr;i[0]=0;for(var n=0,a=t.length;a>n;n++){var r=t[n];i[n+1]=i[n]+r.offsetHeight}i[n+1]=i[n],i.lenght=n+2}function b(e){for(var t=e.followDoms,i=e.followWidthArr,n=0,a=t.length;a>n;n++){var s=t[n],o=r(s,"padding-left")+r(s,"padding-right")+r(s,"border-left-width")+r(s,"border-right-width");i[n]=o,t[n].style.width=e.realWidth-o+"px"}}function w(e){var t=e.followDoms,i=It.getOffset(t[0]||e.main);e.followTop=i.top,e.followLeft=i.left}function L(e){var t=e.realFields,i=[],n=e.fontSize,a=2*e.colPadding+5;if(!e.noHead)for(var r=0,s=t.length;s>r;r++){var o=t[r],l=o.minWidth;if(!l&&!o.breakLine)l=o.title.length*n+a+(e.sortable&&o.sortable?e.sortWidth:0)+(o.tip?e.tipWidth:0);i[r]=l}else for(var d=n+a,r=0,s=t.length;s>r;r++)i[r]=d;e.minColsWidth=i}function C(e){var t=e.realFields,i=[];e.colsWidth=[];var n="auto"===e.overflowX?m(e):e.realWidth;n=Math.max(n,e.realWidth),e.bodyWidth=n;for(var a=n-1,r=0,s=t.length;s>r;r++){var o=t[r],l=o.width;if(l=l?parseInt(l,10):0,e.colsWidth.push(l),a-=l,!o.stable)i.push(r)}for(var s=i.length,d=Math.round(a/s),r=0;s>r;r++){var u=i[r],h=Math.abs(a)<Math.abs(d)?a:d;a-=h,e.colsWidth[u]+=h;var c=e.minColsWidth[u];if(c>e.colsWidth[u])a+=e.colsWidth[u]-c,e.colsWidth[u]=c}if(0>a)for(var r=0;s>r&&0!==a;){var u=i[r],c=e.minColsWidth[u];if(c<e.colsWidth[u]){var h=e.colsWidth[i[r]]-c;h=h>Math.abs(a)?a:-h,a+=Math.abs(h),e.colsWidth[u]+=h}r++}else if(a>0)e.colsWidth[i[0]]+=a}function T(e){var t=u(e);if(!(e.foot instanceof Array))t&&(t.style.display="none");else{if(!t)t=document.createElement("div"),t.id=s(e,"foot"),t.className=o(e,"foot"),n(t,"control-table",e.id),e.main.appendChild(t);if(t.style.display="",e.realWidth)t.style.width=e.realWidth+"px";t.innerHTML=D(e)}}function D(e){var t=[],n=e.foot,a=0,r=e.colsWidth,s=o(e,"fcell"),l=o(e,"fcell-text"),d=e.rowWidthOffset;t.push(It.format(Ht,{width:"100%",controlTableId:e.id}),"<tr>");for(var u=0,h=n.length;h>u;u++){var c=n[u],f=r[a],p=c.colspan||1,m=[s],g=c.content;if("function"==typeof g)g=g.call(e);if(i(g))g="&nbsp;";for(var v=1;p>v;v++)f+=r[a+v];if(a+=p,c.align)m.push(o(e,"cell-align-"+c.align));f+=d,0>f&&(f=0),t.push('<th id="'+I(e,u)+'" class="'+m.join(" ")+'"',' style="width:'+f+"px;",(f?"":"display:none;")+'">','<div class="'+l+'">',g,"</div></th>")}return t.push("</tr></table>"),t.join("")}function Y(e){var t=l(e),i=s(e,"head-panel");if(!t)t=document.createElement("div"),t.id=s(e,"head"),t.className=o(e,"head"),n(t,"control-table",e.id),e.main.appendChild(t),t.innerHTML=It.format('<div id="${id}" data-ui="type:Panel;id:${id};"></div>',{id:i}),e.initChildren(t),e.headPanel=e.viewContext.get(i),Nt.addDOMEvent(e,t,"mousemove",Et.bind(V,t,e)),Nt.addDOMEvent(e,t,"mousedown",Et.bind(A,t,e));if(e.noHead)return void(t.style.display="none");if(t.style.display="",e.bodyWidth)t.style.width=e.bodyWidth+"px";It.g(i).innerHTML=P(e),k(e,e.viewContext.get(i))}function k(e,t){if(t.children)t.disposeChildren();if(e.hasTip)t.initChildren()}function P(e){var t=e.realFields,n=o(e,"hcell"),a=o(e,"hcell-text"),r=o(e,"cell-break"),l=e.helper.getIconClass(),d=o(e,"hsort")+" "+l,u=o(e,"hcell-sel"),h=-1,c=-1,f=e.rowWidthOffset;if(!e.disabled){for(var p=0,m=t.length;m>p;p++)if(!t[p].stable){h=p;break}for(var p=m-1;p>=0;p--)if(!t[p].stable){c=p;break}}var g=[];g.push(It.format(Ht,{width:"100%",controlTableId:e.id}),"<tr>");for(var p=0,m=t.length;m>p;p++){var v=[n],y=t[p],_=y.title,x=e.sortable&&y.sortable,M=x&&y.field&&y.field===e.orderBy,b=a;if(0===p)b+=" "+o(e,"hcell-text-first");if(p===m-1)b+=" "+o(e,"hcell-text-last");var w="";if(x){if(v.push(o(e,"hcell-sort")),M)v.push(o(e,"hcell-"+e.order));w=It.format(jt,{className:d})}if(y.align)v.push(o(e,"cell-align-"+y.align));if(e.breakLine||y.breakLine)v.push(r);var L="",C="",T=y.tip;if("function"==typeof T)C=T.call(e);else C=T;if(C)L=It.format(Vt,{id:s(e,"htip"+p),className:o(e,"htip"),content:C}),e.hasTip=!0;var D;if("function"==typeof _)D=_.call(e);else D=_;if(i(D))D="&nbsp;";g.push('<th id="'+S(e,p)+'"',' data-index="'+p+'"',' class="'+v.join(" ")+'"',x?' data-sortable="1"':"",p>=h&&c>p?' data-dragright="1"':"",c>=p&&p>h?' data-dragleft="1"':"",' style="',"width:"+(e.colsWidth[p]+f)+"px;",(e.colsWidth[p]?"":"display:none")+'">','<div class="'+b+(y.select?" "+u:"")+'">',L,D,w,"</div></th>")}return g.push("</tr></table>"),g.join("")}function S(e,t){return s(e,"title-cell")+t}function I(e,t){return s(e,"foot-cell")+t}function E(e){N(this,e)}function N(e,t){if(!e.isDraging&&!e.dragReady)if(Nt.addPartClasses(e,"hcell-hover",t),e.sortable){e.sortReady=1;var i=a(t,"index"),n=e.realFields[i];if(n&&n.sortable)Nt.addPartClasses(e,"hcell-sort-hover",t)}}function O(e){H(this,e)}function H(e,t){if(Nt.removePartClasses(e,"hcell-hover",t),e.sortable)e.sortReady=0,Nt.removePartClasses(e,"hcell-sort-hover",t)}function j(e){var t=this;if(t.sortable&&t.sortReady){var i=a(e,"index"),n=t.realFields[i];if(n.sortable){var r=t.orderBy,s=t.order;if(r===n.field)s=!s||"asc"===s?"desc":"asc";else s="desc";t.setProperties({order:s,orderBy:n.field}),t.fire("sort",{field:n,order:s})}}}function V(e,t){if(e.columnResizable){var i="startdrag",n=8;if(!e.isDraging){var r=t.target;if(r=$(e,r)){var s=this,o=t.pageX||t.clientX+It.page.getScrollLeft(),l=It.getOffset(r),d=a(r,"sortable");if(a(r,"dragleft")&&o-l.left<n)d&&H(e,r),Nt.addPartClasses(e,i,s),e.dragPoint="left",e.dragReady=1;else if(a(r,"dragright")&&l.left+r.offsetWidth-o<n)d&&H(e,r),Nt.addPartClasses(e,i,s),e.dragPoint="right",e.dragReady=1;else Nt.removePartClasses(e,i,s),d&&N(e,r),e.dragPoint="",e.dragReady=0}}}}function $(e,t){for(;1===t.nodeType;){if("TH"===t.nodeName)return t;t=t.parentNode}return null}function A(e,t){if(e.columnResizable){e.fire("startdrag"),e.fire("dragstart");var i=o(e,"startdrag"),n=t.target;if(n=$(e,n))if(!(It.g(s(e,"head")).className.indexOf(i)<0)){e.htmlHeight=document.documentElement.clientHeight,e.isDraging=!0,e.dragIndex=a(n,"index"),e.dragStart=t.pageX||t.clientX+It.page.getScrollLeft(),F(e);var r=Et.partial(R,e),l=function(t){var i=!0;try{i=Et.partial(U,e)(t)}catch(n){}return It.un(document,"mousemove",r),It.un(document,"mouseup",l),i};return It.on(document,"mousemove",r),It.on(document,"mouseup",l),B(e,e.dragStart),It.event.preventDefault(t),!1}}}function F(e){var t=It.getOffset(e.main);e.top=t.top,e.left=t.left}function R(e,t){var i=t||window.event;return B(e,i.pageX||i.clientX+It.page.getScrollLeft()),It.event.preventDefault(i),!1}function B(e,t){var i=q(e),n=e.left+e.realWidth,a=e.left+1,r=n-1;if(t=a>t?a:t,t=t>r?r:t,!i)i=z(e);i.style.top=e.top+"px",i.style.left=t+"px",i.style.zIndex=e.zIndex||"";var s=e.htmlHeight-e.top+It.page.getScrollTop(),o=e.main.offsetHeight;s=o>s?s:o,i.style.height=s+"px"}function W(e){var t=q(e);t.style.left="-10000px",t.style.top="-10000px"}function z(e){var t=document.createElement("div");return t.id=s(e,"drag-mark"),t.className=o(e,"mark "),t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t),t}function q(e){return It.g(s(e,"drag-mark"))}function U(e,t){var i=t||window.event,n=parseInt(e.dragIndex,10),a=i.pageX||i.clientX+It.page.getScrollLeft(),r=e.realFields,s=r.length,o=0,l=e.colsWidth,d=0;if("left"===e.dragPoint)n--;var u=e.minColsWidth[n],h=a-e.dragStart,c=l[n]+h;if(u>c)h+=u-c,c=u;for(var f=[],p=[],m=n+1;s>m;m++)if(!r[m].stable&&l[m]>0)f.push(m),_=l[m],p.push(_),o+=_;for(var g=h,v=f.length,m=0;v>m;m++){var y=f[m],_=p[m],x=h*_/o,M=g>0?Math.ceil(x):Math.floor(x);if(M=Math.abs(M)<Math.abs(g)?M:g,_-=M,g-=M,u=e.minColsWidth[y],u>_)d+=u-_,_=u;l[y]=_}return c-=d,l[n]=c,ut(e),e.isDraging=!1,W(e),e.fire("enddrag"),e.fire("dragend"),It.event.preventDefault(i),!1}function G(e){var t=d(e),i=s(e,"body-panel");if(!t){var n="body",a=s(e,n);t=document.createElement("div"),t.id=a,t.className=o(e,n),e.main.appendChild(t),t.innerHTML=It.format('<div id="${id}" data-ui="type:Panel;id:${id}"></div>',{id:i}),e.initChildren(t),e.bodyPanel=e.viewContext.get(i)}var r=t.style;if(r.overflowX="auto",r.overflowY="auto",e.bodyWidth)r.width=e.bodyWidth+"px";e.bodyPanel.disposeChildren(),It.g(i).innerHTML=X(e),e.fire("bodyChange")}function J(e){var t=d(e),i=t.style,n=e.datasource.length,a=e.bodyMaxHeight;if(a>0&&n>0){var r=a,o=It.g(s(e,"body-panel"));if(o)r=o.offsetHeight;if(r>=a)return void(i.height=a+"px")}i.height="auto"}function X(e){var t=e.datasource||[],i=t.length,n=[];if(!i)return It.format($t,{className:o(e,"body-nodata"),html:e.noDataHtml});for(var a=e.rowBuilderList,r=0;i>r;r++){var s=t[r];n.push(et(e,s,r,a))}return n.join("")}function Z(e,t,i){return s(e,"cell")+t+"-"+i}function Q(e,i){for(var n=e.rowBuilderList||[],a=0,r=i.length;r>a;a++){var s=i[a];if(s.getColHtml){if(s.getSubrowHtml)e.hasSubrow=!0;if(!t(s.index))s.index=1e3;n.push(s)}else;}n.sort(function(e,t){return e.index-t.index}),e.rowBuilderList=n}function K(e){Q(e,[{index:1,getRowArgs:tt,getColHtml:it}])}function et(e,i,n,a){function r(e,t){return e.index-t.index}for(var o=[],l=e.realFields,d=e.rowWidthOffset,u=[],h=[],c=[],f=0,p=a.length;p>f;f++){var m=a[f],g=m.getRowArgs?m.getRowArgs(e,n)||{}:{};u.push(g),g.rowClass&&h.push(g.rowClass),g.rowAttr&&c.push(g.rowAttr)}for(var f=0,p=l.length;p>f;f++){for(var v=l[f],y=e.colsWidth[f],_=[],x=[],M=[],b=[],w=[],L=[],C=-1,T=0,D=a.length;D>T;T++){var Y=a[T].getColHtml(e,i,v,n,f,u[T]);if(Y){var k=Y.html;if(Y.colClass)_.push(Y.colClass);if(Y.textClass)x.push(Y.textClass);if(Y.colAttr)M.push(Y.colAttr);if(Y.textAttr)b.push(Y.textAttr);if(t(k))if(Y.notInText)Y.index=T,L.push(Y);else w.push(k),0>C&&(C=T)}else;}var P="";if(w=['<div class="'+x.join(" ")+'" ',b.join(" ")+">",w.join(""),"</div>"].join(""),L.push({html:w,index:C}),L.sort(r),L.length>1){for(var P=['<table width="100%" cellpadding="0" cellspacing="0">',"<tr>"],T=0,D=L.length;D>T;T++){var S=L[T];P.push("<td ",t(S.width)?' width="'+S.width+'" ':"",S.align?' align="'+S.align+'">':">",S.html,"</td>")}P.push("</tr></table>"),P=P.join("")}else P=w;o.push('<td id="'+Z(e,n,f)+'" ','class="'+_.join(" ")+'" ',M.join(" ")+" ",'style="width:'+(y+d)+"px;",(y?"":"display:none")+'" ','data-control-table="'+e.id+'" ','data-row="'+n+'" data-col="'+f+'">',P,"</td>")}if(o.unshift(It.format(At,{id:s(e,"row")+n,className:h.join(" "),attr:c.join(" "),index:n}),It.format(Ht,{width:"100%",controlTableId:e.id})),o.push("</tr></table></div>"),e.hasSubrow)for(var f=0,p=a.length;p>f;f++){var I=a[f].getSubrowHtml;if(I)o.push(I(e,n,u[f]))}return o.join("")}function tt(e,t){var i=e.datasource||[],n=i.length;return{tdCellClass:o(e,"cell"),tdBreakClass:o(e,"cell-break"),tdTextClass:o(e,"cell-text"),fieldLen:e.realFields.length,rowClass:[o(e,"row"),o(e,"row-"+(t%2?"odd":"even")),p(e,t)?o(e,"row-selected"):"",n-1===t?o(e,"row-last"):""].join(" ")}}function it(e,t,n,a,r,l){var d=l.tdCellClass,u=l.tdBreakClass,h=l.tdTextClass,c=[d],f=[h],p=n.content;if(0===r)f.push(o(e,"cell-text-first"));if(r===l.fieldLen-1)f.push(o(e,"cell-text-last"));if(e.breakLine||n.breakLine)c.push(u);if(n.select)f.push(o(e,"cell-sel"));if(n.align)c.push(o(e,"cell-align-"+n.align));if(n.field&&n.field===e.orderBy)c.push(o(e,"cell-sorted"));var m="function"==typeof p?p.call(e,t,a,r):e.encode?It.encodeHTML(t[p]):t[p];if(i(m))m="&nbsp;";return{colClass:c.join(" "),textClass:f.join(" "),html:It.format(Ft,{colTextId:s(e,"cell-textfield-"+a+"-"+r),content:m})}}function nt(e){if(!this.isDraging)Nt.addPartClasses(this,"row-hover",e)}function at(e){Nt.removePartClasses(this,"row-hover",e)}function rt(e,t){var i=this,n=Nt.getPartClasses(i,"cell-text")[0];if("line"===i.selectMode&&It.hasClass(t.target,n)){if(i.dontSelectLine)return void(i.dontSelectLine=!1);var r=a(e,"index");switch(i.select){case"multi":var o=It.g(s(i,"multi-select")+r);pt(i,r,!o.checked),mt(i);break;case"single":xt(i,r,!0)}}}function st(e){e.viewWidth=It.page.getViewWidth(),e.viewHeight=It.page.getViewHeight();var t=function(){var t=It.page.getViewWidth(),i=It.page.getViewHeight();if(t!==e.viewWidth||i!==e.viewHeight)e.viewWidth=t,e.viewHeight=i,ot(e)};Nt.addDOMEvent(e,window,"resize",t)}function ot(e){var t=l(e),i=u(e);e.realWidth=g(e);var n=e.realWidth+"px";if(e.realWidth)e.main.style.width=n;C(e),ut(e);var a=e.bodyWidth+"px";if(e.realWidth)d(e).style.width=a,t&&(t.style.width=a),i&&(i.style.width=n);if(e.followHead)b(e),M(e);F(e),e.fire("resize"),e.topReseter&&e.topReseter()}function lt(e,t,i,n){if(e)e.style.top=i+"px",e.style.left=n+"px",e.style.position=t}function dt(e){if(e.followHead&&!e.topReseter){var t=l(e),i=s(e,"top-placeholder"),n=document.createElement("div");n.id=i,n.style.width="100%",n.style.display="none",It.insertBefore(n,e.main),n=null,e.topReseter=function(){if(e.followHead){var n=It.page.getScrollTop(),a=It.ie&&It.ie<7?"absolute":"fixed",r=e.main.offsetHeight,s="absolute"===a,o=It.g(i),l=e.followDoms;if(e.noFollowHeadCache){var d=t.style.position;if("fixed"!==d&&"absolute"!==d)w(e)}if(n>e.followTop&&(s||n-e.followTop<r)){var u=It.page.getScrollLeft(),h=e.followHeightArr,c=h.length;F(e);var f=s?e.left:e.left-u;if(o.style.height=h[c-1]+t.offsetHeight+"px",o.style.display="",It.ie&&It.ie<8)t.style.zIndex=e.zIndex+1;if(s){for(var p=0,m=l.length;m>p;p++)lt(l[p],a,h[p]+n,f);lt(t,a,h[c-1]+n,f)}else{for(var p=0,m=l.length;m>p;p++)lt(l[p],a,h[p],f);lt(t,a,h[c-1],f)}}else{o.style.height=0,o.style.display="none",a="";for(var p=0,m=l.length;m>p;p++)lt(l[p],a,0,0);lt(t,a,0,0),t.style.zIndex=""}}},Nt.addDOMEvent(e,window,"scroll",e.topReseter)}}function ut(e){var t=e.colsWidth,i=e.foot,n=e.id,r=i instanceof Array&&i.length,s=d(e).getElementsByTagName("td"),o=s.length,l=e.rowWidthOffset;if(r)for(var u=0,h=0;r>h;h++){for(var c=i[h],f=t[u],p=c.colspan||1,m=1;p>m;m++)f+=t[u+m];u+=p;var g=It.g(I(e,h));f=Math.max(f+l,0),g.style.width=f+"px",g.style.display=f?"":"none"}if(r=t.length,!e.noHead)for(var h=0;r>h;h++){var f=Math.max(t[h]+l,0),g=It.g(S(e,h));g.style.width=f+"px",g.style.display=f?"":"none"}for(var m=0,h=0;o>h;h++){var g=s[h];if(a(g,"control-table")===n){var f=Math.max(t[m%r]+l,0);g.style.width=f+"px",g.style.display=f?"":"none",m++}}}function ht(e){var t=e.helper,i=[t.getPrefixClass("checkbox-custom"),t.getPrefixClass("checkbox-single")].join(" ");return{width:30,stable:!0,select:!0,title:function(t,n){var a={id:s(e,"select-all"),className:o(e,"select-all"),disabled:e.disabled?'disabled="disabled"':"",index:n,checkboxClassName:i};return It.format(Rt,a)},content:function(t,n){var a={id:s(e,"multi-select")+n,className:o(e,"multi-select"),disabled:e.disabled?'disabled="disabled"':"",index:n,checked:p(e,n)?'checked="checked"':"",checkboxClassName:i};return It.format(Bt,a)}}}function ct(e){return{width:30,stable:!0,title:"&nbsp;",select:!0,content:function(t,i){var n=s(e,"single-select"),a={id:n+i,name:n,className:o(e,"single-select"),index:i,disabled:e.disabled?'disabled="disabled"':"",checked:p(e,i)?'checked="checked"':""};return It.format(Wt,a)}}}function ft(e){var t=a(e,"index");pt(this,t),mt(this)}function pt(e,i,n){var r="row-selected";if(i>=0){var o=It.g(s(e,"multi-select")+i);if(o){t(n)&&(o.checked=n);var l=h(e,i);if(o.checked)Nt.addPartClasses(e,r,l);else Nt.removePartClasses(e,r,l)}}else if(t(n))for(var d=vt(e,"checkbox"),u=0,c=d.length;c>u;u++){var o=d[u];o.checked=n;var f=a(o,"index"),l=h(e,f);if(n)Nt.addPartClasses(e,r,l);else Nt.removePartClasses(e,r,l)}}function mt(e){for(var t=c(e),i=vt(e,"checkbox"),n=!0,r=[],o=s(e,"multi-select"),l=0,d=i.length;d>l;l++){var u=i[l];if(u.id.indexOf(o)>=0){var h=a(u,"index");if(!u.checked)n=!1;else r.push(h)}}f(e,r),e.fire("select",{selectedIndex:r}),t.checked=n}function gt(){yt(this,c(this).checked)}function vt(e,t){for(var i=d(e).getElementsByTagName("input"),n=[],a=0,r=i.length;r>a;a++){var s=i[a],o=s.id;if(s.getAttribute("type")===t&&o)n.push(s)}return n}function yt(e,t){pt(e,-1,t),mt(e)}function _t(e){xt(this,a(e,"index"))}function xt(e,i,n){var a=e.selectedIndex,r=It.g(s(e,"single-select")+i);if(r){if(t(n)&&(r.checked=n),e.fire("select",{selectedIndex:i}),a&&a.length)Nt.removePartClasses(e,"row-selected",h(e,a[0]));f(e,[i]),Nt.addPartClasses(e,"row-selected",h(e,i))}}function Mt(e){e.main.style.zIndex=e.zIndex||""}function bt(e){for(var t=vt(e,"multi"===e.select?"checkbox":"radio"),i=t.length-1;i>=0;i--)if(e.disabled)t[i].setAttribute("disabled","disabled");else t[i].removeAttribute("disabled");if("multi"===e.select){var n=c(e);if(n)if(e.disabled)n.setAttribute("disabled","disabled");else n.removeAttribute("disabled")}if(e.children&&e.children.length)for(var a=e.children,i=a.length-1;i>=0;i--)a[i].setDisabled(e.disabled)}function wt(e){var t=" "+e+" ";return function(e){var i=" "+e.className+" ";return i.replace(zt," ").indexOf(t)>=0}}function Lt(e,t){var i=null;if(t)i="function"==typeof t?t:wt(t);return{handler:e,matchFn:i}}function Ct(e,t,i){var n=t.id,a=e.handlers[n];if(!a)a=e.handlers[n]={};if(i)if(a=e.handlers[i],!a)a=e.handlers[i]=[];return a}function Tt(e,t,i,n){var a=Ct(e,t,i),r=[];if(!a.length)kt(e,t,i);for(var s=0,o=n.length;o>s;s++){var l=n[s],d=Lt(l.handler,l.matchFn);a.push(d),r.push(d)}return r}function Dt(e,t,i,n){for(var a=Ct(e,t,i),r=0,s=n.length;s>r;r++)for(var o=n[r],l=0,d=a.length;d>l;l++)if(a[l]===o)a.splice(l,1),l--;if(!a.length)Pt(e,t,i)}function Yt(e,t,i){return function(n){for(var n=n||window.event,a=n.target;a;){if(1===a.nodeType)for(var r=t.length-1;r>=0;r--){var s=t[r];if(!s.matchFn||s.matchFn(a))s.handler.call(i,a,n)}if(a===e)break;a=a.parentNode}}}function kt(e,t,i){var n=Ct(e,t,i);Nt.addDOMEvent(e,t,i,Yt(t,n,e))}function Pt(e,t,i){Nt.removeDOMEvent(e,t,i)}function St(e){var t=Nt.getPartClasses,i=t(e,"row")[0],n=t(e,"hcell")[0],a=t(e,"select-all")[0],r=t(e,"multi-select")[0],s=t(e,"single-select")[0];Tt(e,e.main,"mouseover",[{handler:nt,matchFn:i},{handler:E,matchFn:n}]),Tt(e,e.main,"mouseout",[{handler:at,matchFn:i},{handler:O,matchFn:n}]),Tt(e,e.main,"click",[{handler:rt,matchFn:i},{handler:j,matchFn:n},{handler:gt,matchFn:a},{handler:ft,matchFn:r},{handler:_t,matchFn:s}])}var It=require("./lib"),Et=require("underscore"),Nt=require("./controlHelper"),Ot=require("./Control");e.defaultProperties={noDataHtml:"没有数据",noFollowHeadCache:!1,followHead:!1,sortable:!1,encode:!1,columnResizable:!1,rowWidthOffset:-1,select:"",selectMode:"box",subrowMutex:1,subEntryOpenTip:"点击展开",subEntryCloseTip:"点击收起",subEntryWidth:18,breakLine:!1,hasTip:!1,hasSubrow:!1,tipWidth:18,sortWidth:9,fontSize:13,colPadding:8,zIndex:0,overflowX:"hidden"};var Ht='<table cellpadding="0" cellspacing="0" width="${width}" data-control-table="${controlTableId}">',jt='<div class="${className}"></div>',Vt='<div id="${id}" class="${className}" data-ui="type:Tip;id:${id};content:${content}"></div>',$t='<div class="${className}">${html}</div>',At='<div id="${id}" class="${className}" data-index="${index}" ${attr}>',Ft='<span id="${colTextId}">${content}</span>',Rt='<div class="${checkboxClassName}"><input type="checkbox" id="${id}" class="${className}" data-index="${index}" ${disabled}/><label for="${id}"></label></div>',Bt='<div class="${checkboxClassName}"><input type="checkbox" id="${id}" class="${className}" data-index="${index}" ${disabled} ${checked} /><label for="${id}"></label></div>',Wt='<input type="radio" id="${id}" name="${name}" class="${className}" data-index="${index}" ${disabled} ${checked} />',zt=/[\t\r\n]/g;return e.prototype={type:"Table",initOptions:function(t){var i={};
Et.extend(i,e.defaultProperties,t),this.setProperties(i)},initStructure:function(){if(this.realWidth=g(this),this.realWidth)this.main.style.width=this.realWidth+"px";Mt(this),K(this),st(this),St(this)},repaint:function(t,i){Ot.prototype.repaint.apply(this,arguments);var n=this;if(!n.realWidth)if(n.realWidth=g(n),n.realWidth)n.main.style.width=n.realWidth+"px";var a=e.defaultProperties,r={};if(!t){for(var s in a)if(a.hasOwnProperty(s))r[s]=!0}else for(var o=0;o<t.length;o++){var l=t[o];r[l.name]=!0}var d=!1,u=!1,h=!1;if(r.fields||r.select||r.selectMode||r.sortable)v(n),d=!0;if(d||r.breakLine||r.colPadding||r.fontSize)L(n),C(n),u=!0;if(d||u||r.noHead||r.order||r.orderBy||r.selectedIndex)Y(n);if(r.followHead||r.noFollowHeadCache)y(n),dt(n);if(d||u||r.encode||r.noDataHtml||r.datasource||r.selectedIndex)G(n),h=!0;if(h||r.bodyMaxHeight)J(n);if(d||u||r.foot)T(n);if(n.extraRepaint=Nt.createRepaint([{name:"disabled",paint:bt},{name:"width",paint:ot},{name:"zIndex",paint:Mt}]),n.extraRepaint(t,i),h&&Nt.isInStage(n,"RENDERED"))switch(n.select){case"multi":f(n,[]),n.fire("select",{selectedIndex:n.selectedIndex})}if(n.realWidth!==g(n))ot(n)},getId:function(e){return s(this,e)},getBodyCellId:function(e,t){return Z(this,e,t)},setCellText:function(e,t,n,a){if(a)e=It.encodeHTML(e);e=i(e)?"&nbsp":e,It.g(s(this,"cell-textfield-"+t+"-"+n)).innerHTML=e},getClass:function(e){return o(this,e)},getRow:function(e){return h(this,e)},addRowBuilders:function(e){Q(this,e)},addHandlers:function(e,t){if(!t.length)t=[t];return Tt(this,this.main,e,t)},removeHandlers:function(e,t){if(!t.length)t=[t];Dt(this,this.main,e,t)},adjustWidth:function(){ot(this)},setDatasource:function(e){this.datasource=e,f(this,[]);var t={name:"datasource"},i={name:"selectedIndex"};this.repaint([t,i],{datasource:t,selectedIndex:i})},updateRowAt:function(e,t){t&&(this.datasource[e]=t);var i=this.datasource[e],n=h(this,e);if(i&&n){this.fire("beforerowupdate",{index:e,data:i});var a=document.createElement("div");a.innerHTML=et(this,t,e,this.rowBuilderList);var r=a.children[0];n.parentNode.replaceChild(r,n),this.fire("afterrowupdate",{index:e,data:i})}},getSelectedItems:function(){var e=this.selectedIndex,t=[];if(e){var i=this.datasource;if(i)for(var n=0;n<e.length;n++)t.push(i[e[n]])}return t},setRowSelected:function(e,t){var i=this,n="multi"===i.select,a=n?pt:xt;if(Et.isArray(e))if(n)Et.each(e,function(e){a(i,e,t)});else a(i,e[0],t);else a(i,e,t);if(n)mt(i)},setAllRowSelected:function(e){this.setRowSelected(-1,e)},resetFollowHead:function(){_(this)},dispose:function(){if(!Nt.isInStage(this,"DISPOSED")){Nt.beforeDispose(this);var e=this.main;if(e){this.followDoms=null;var t=It.g(s(this,"drag-mark"));if(t)document.body.removeChild(t)}this.rowBuilderList=null,this.headPanel.disposeChildren(),this.bodyPanel.disposeChildren(),this.headPanel=null,this.bodyPanel=null,Nt.dispose(this),Nt.afterDispose(this)}}},It.inherits(e,Ot),require("./main").register(e),e}),define("esui/extension/Command",["require","underscore","../lib","../Extension","mini-event","../main"],function(require){function e(e){if(e=e||{},!e.events)e.events=["click"];else e.events=i.splitTokenList(e.events);n.apply(this,arguments)}var t=require("underscore"),i=require("../lib"),n=require("../Extension");return e.prototype.type="Command",e.prototype.handleCommand=function(e){for(var t=e.target,i=this.main&&this.main.parentNode;t&&t!==i;){if(1===t.nodeType&&(t.disabled!==!0||"click"!==e.type)){var n=t.getAttribute("data-command");if(n){var a=t.getAttribute("data-command-args"),r=require("mini-event").fromDOMEvent(e,"command",{name:n,triggerType:e.type,args:a});if(r=this.fire("command",r),r.isPropagationStopped())return}}t=t.parentNode}},e.prototype.activate=function(){for(var e=0;e<this.events.length;e++)this.target.helper.addDOMEvent(this.target.main,this.events[e],this.handleCommand);n.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){for(var e=0;e<this.events.length;e++)this.target.helper.removeDOMEvent(this.target.main,this.events[e],this.handleCommand);n.prototype.inactivate.apply(this,arguments)},e.createDispatcher=function(e){var n=e;if(t.isArray(e)){n={};for(var a=0;a<e.length;a++){var r=e[a],s=r.triggerType?r.triggerType+":"+r.name:r.name;n[s]=r.handler}}return function(e){var t=n[e.triggerType+":"+e.name];if(!t)t=n[e.name];if(!t){var a="execute"+i.pascalize(e.name)+i.pascalize(e.triggerType);t=this[a]}if("function"!=typeof t){var a="execute"+i.pascalize(e.name);t=this[a]}if("function"!=typeof t)t=n[e.triggerType+":*"];if(!t)t=n["*"];if("function"==typeof t)t.apply(this,arguments)}},i.inherits(e,n),require("../main").registerExtension(e),e}),define("ub-ria-ui/uploader/UploaderPro",["require","esui/InputControl","esui/Table","esui/extension/Command","./File","esui/Dialog","esui/Button","underscore","esui/lib","esui/main","esui/painters","eoo","esui"],function(require){function e(){if(o)return o.show(),!1;var e={skin:"uploader",title:this.title,id:this.helper.getId("uploader-dialog"),closeOnHide:!1,mask:!0,alwaysTop:!0,needFoot:!1,viewContext:this.viewContext};o=u.create("Dialog",e),o.appendTo(document.body),o.setTitle(this.title),o.show();var n=o.getBody().main,a=['<p class="${infoClass}">','当前已添加文件<span id="${doneId}" class="${doneClass}">0</span>个, ','还可以添加<span id="${avaliableId}" class="${avaliableClass}">0</span>个',"</p>"].join("");n.innerHTML=d.format(a,{infoClass:o.helper.getPartClassName("info"),doneId:o.helper.getId("info-done"),doneClass:o.helper.getPartClassName("info-done"),avaliableId:o.helper.getId("info-avaliable"),avaliableClass:o.helper.getPartClassName("info-avaliable")}),t.call(this);var r=['<div class="ui-progress" style="display:none;">','<div id="${progressId}" class="ui-progress-bar"></div>',"</div>",'<span id="${progressInfoId}" class="${progressInfoClass}">0%</span>','<span id="${sizeId}" class="${sizeClass}">0KB</span>'].join("");o.setFoot(d.format(r,{progressId:o.helper.getId("progress"),progressInfoId:o.helper.getId("progressInfo"),progressInfoClass:o.helper.getPartClassName("progress"),sizeId:o.helper.getId("size"),sizeClass:o.helper.getPartClassName("size")}));var s=i.call(this),l=u.create("Button",{content:"开始上传",variants:"link"}),h=o.getFoot();l.appendTo(h),l.on("click",function(){s.start()})}function t(){var e=u.create("Table",{id:o.helper.getId("table"),skin:"uploader",noFollowHeadCache:!0,noDataHtml:'<p style="margin:0;height:200px;">拖拽文件到此区域</p>',extensions:[new r({eventTypes:["click"],useCapture:!1})],datasource:[],fields:[{title:"文件名称",field:"id",tip:"文件名称",width:"82%",content:function(e){return e.name}},{title:"进度",field:"progress",tip:"进度",width:"4%",align:"center",content:function(e){return e.getProgress()}},{title:"文件大小",field:"size",tip:"文件大小",width:"8%",align:"center",content:function(e){return s.formatSize(e.size)}},{title:"操作",field:"op",tip:"操作",width:"6%",align:"center",content:function(e){var t='<span data-command="remove" data-command-args="${id}" class="ui-icon-${type} ui-eicons-fw"></span>',i="close";if(e.status===s.DONE||e.status===s.FAILED)i="unlink";return d.format(t,{id:e.id,type:i})}}]}),t=o.getBody().main;e.appendTo(t);var i=this;return e.on("command",function(e){var t=i.getUploader();if(t)t.removeFile(e.args)}),e}function i(){var e=u.create("Uploader",{id:o.helper.getId("uploader"),skin:"pro",width:96,action:this.action,name:this.name,autoUpload:!1,accept:this.accept,showProgress:!1,multiple:!0,limit:Math.max(this.datasource.length,this.limit),buttonVariants:this.buttonVariants}),t=o.getFoot();e.appendTo(t);var i=this,a=this.getTable();return e.on("filesadded",function(e){Array.prototype.push.apply(a.datasource,e.data),a.setDatasource(a.datasource),n.call(i)}),e.on("filesremoved",function(e){var t=l.filter(a.datasource,function(t){return t!==e.data});a.setDatasource(t),n.call(i)}),e.on("progress",function(){l.each(e.files,function(e,t){var i=d.g(a.getBodyCellId(t,1)),n=i.getElementsByTagName("span")[0];n.innerHTML=e.getProgress()}),n.call(i)}),e.on("uploaded",function(e){var t=l.indexOf(a.datasource,e.file),r=d.g(a.getBodyCellId(t,3)),s=d.dom.first(r.getElementsByTagName("span")[0]);d.removeClass(s,"ui-icon-close"),d.addClass(s,"ui-icon-unlink"),n.call(i)}),e.on("complete",function(){var e=o.helper.getPart("progress");setTimeout(function(){e.parentNode.style.display="none",e.style.width="0px"},100)}),e.on("error",function(e){console.log(e)}),e.setRawValue(this.datasource),e}function n(){var e=this.getUploader(),t=e.getTotal(),i=t.percent+"%";if(t.percent>0){var n=o.helper.getPart("progress");n.style.width=i,n.parentNode.style.display="block",n.innerHTML=i}var a=o.helper.getPart("size");a.innerHTML=s.formatSize(t.size);var r=o.helper.getPart("progressInfo");r.innerHTML=i;var l=this.getTable(),d=l.datasource.length,u=o.helper.getPart("info-done");u.innerHTML=d;var h=Math.max(this.limit-d,0),c=o.helper.getPart("info-avaliable");c.innerHTML=h}var a=require("esui/InputControl"),r=(require("esui/Table"),require("esui/extension/Command")),s=require("./File");require("esui/Dialog"),require("esui/Button");var o,l=require("underscore"),d=require("esui/lib"),u=require("esui/main"),exports={};exports.type="UploaderPro",exports.initOptions=function(e){var t={};if(d.extend(t,this.$self.defaultProperties,e),this.main.title)t.title=this.main.title;var i=t.limit;if(l.isString(i))t.limit=parseInt(i,10);this.setProperties(t)},exports.initStructure=function(){var e=this.helper.getPartClassName("button"),t='<button data-ui-id="button" data-ui="type:Button;variants:${variants}" class="${buttonClasses}"></button>';this.main.innerHTML=d.format(t,{buttonClasses:e,variants:this.buttonVariants}),u.init(this.main,{viewContext:this.viewContext})},exports.initEvents=function(){var t=this,i=this.viewContext.get("button");i.on("click",function(){e.call(t)})},exports.repaint=require("esui/painters").createRepaint(a.prototype.repaint,{name:["text"],paint:function(e,t){var i=e.viewContext.get("button");i.setContent(l.escape(t))}},{name:["width"],paint:function(e,t){var i=t+"px";e.main.style.width=i;var n=e.viewContext.get("button");n.setProperties({width:t})}},{name:"rawValue",paint:function(e,t){if(l.isArray(t)){var i=e.getUploader();if(i)i.setRawValue(t)}}}),exports.getDialog=function(){return this.viewContext.get(this.helper.getId("uploader-dialog"))},exports.getTable=function(){return this.viewContext.get(o.helper.getId("table"))},exports.getUploader=function(){return this.viewContext.get(o.helper.getId("uploader"))},exports.notifyError=function(){},exports.getRawValue=function(){var e=this.getUploader();if(e)return e.getRawValue();else return null},exports.dispose=function(){this.$super(arguments)};var h=require("eoo").create(a,exports);return h.defaultProperties={width:80,fileType:"*",text:"点击上传",autoUpload:!0,action:"",extraArgs:{},buttonVariants:"primary"},require("esui").register(h),h}),define("esui/BoxGroup",["require","underscore","./lib","./InputControl","./painters","./main"],function(require){function e(){o.apply(this,arguments)}function t(e,t){for(var i=e.getElementsByTagName("input"),n=e.getElementsByTagName("label"),a={},r=n.length-1;r>=0;r--){var o=n[r],l=s.getAttribute(o,"for");if(l)a[l]=o}for(var d=[],u=[],r=0,h=i.length;h>r;r++){var c=i[r];if(c.type===t.boxType&&(t.name||"")===c.name){var f={value:c.value},o=c.id&&a[c.id];if(f.title=o?s.getText(o):"",!f.title)f.title=c.title||("on"===c.value?c.value:"");if(d.push(f),s.hasAttribute(c,"checked"))u.push(c.value)}}if(t.datasource=d,!t.rawValue&&!t.value)t.rawValue=u}function i(e){var t=e.parentNode,i=this.helper.getPartClasses("wrapper-checked");if(e.checked)s.addClasses(t,i);else s.removeClasses(t,i)}function n(){r.each(this.getBoxElements(),i,this);var e=r.chain(this.getBoxElements()).where({checked:!0}).pluck("value").value();this.rawValue=e,this.fire("change")}function a(e,t,i){e.helper.clearDOMEvents();var a="",o=[].concat(e.helper.getPartClasses(i),e.helper.getPartClasses("wrapper")),d=[],u=e.boxClass;if(u)d.push(u);o=o.concat(d);for(var h=s.toDictionary(e.rawValue),c=e.name||s.getGUID(),f=0;f<t.length;f++){var p=t[f],m="";if(h[p.value])m+=" "+e.helper.getPartClassName("wrapper-checked");var g={wrapperClass:o.join(" ")+m,id:e.helper.getId("box-"+f),type:e.boxType,name:c,title:s.trim(p.title||p.name||p.text),value:p.value,checked:h[p.value]?' checked="checked"':""};a+=s.format(l,g)}e.main.innerHTML=a;var v=e.main.addEventListener?"change":"click";r.each(e.getBoxElements(),function(e){this.helper.addDOMEvent(e,v,n)},e)}var r=require("underscore"),s=require("./lib"),o=require("./InputControl");e.prototype.type="BoxGroup",e.prototype.initOptions=function(e){var i={datasource:[],orientation:"horizontal",boxType:"radio",boxClass:""};r.extend(i,e);var n=i.datasource;if(!n.length)t(this.main,i);if(!i.hasOwnProperty("rawValue")&&!i.hasOwnProperty("value"))if("radio"===i.boxType&&n.length)i.rawValue=[n[0].value];else i.rawValue=[];this.setProperties(i)};var l=['<div title="${title}" class="${wrapperClass}">','    <input type="${type}" name="${name}" id="${id}" title="${title}" value="${value}"${checked} />','    <label for="${id}">${title}</label>',"</div>"];return l=l.join(""),e.prototype.setProperties=function(e){if(!(!e.datasource&&!e.boxType||e.rawValue||e.value||this.rawValue&&this.rawValue.length))e.rawValue=[];var t=o.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("rawValue"))this.fire("change")},e.prototype.repaint=require("./painters").createRepaint(o.prototype.repaint,{name:["datasource","boxType"],paint:a},{name:["disabled","readOnly"],paint:function(e,t,i){r.each(e.getBoxElements(),function(e){e.disabled=t,e.readOnly=i})}},{name:"rawValue",paint:function(e,t){t=t||[],e.rawValue=t;for(var n={},a=0;a<t.length;a++)n[t[a]]=!0;r.each(e.getBoxElements(),function(t){t.checked=n.hasOwnProperty(t.value),i.call(e,t)})}},{name:"orientation",paint:function(e,t){e.removeState("vertical"),e.removeState("horizontal"),e.addState(t)}}),e.prototype.parseValue=function(e){return e.split(",")},e.prototype.getBoxElements=function(){return r.where(this.main.getElementsByTagName("input"),{type:this.boxType})},s.inherits(e,o),require("./main").register(e),e}),define("esui/Calendar",["require","./MonthView","underscore","moment","./lib","./main","./InputControl","./Layer","./painters"],function(require){function e(){d.apply(this,arguments)}function t(){l.apply(this,arguments),this.layer=new e(this)}function i(){var e=this.getChild("monthView"),t=e.getRawValue();if(t)this.rawValue=t,n(this),this.fire("change")}function n(e){var t=e.helper.getPart("text");t.innerHTML=a.escape(e.getValue())}require("./MonthView");var a=require("underscore"),r=require("moment"),s=require("./lib"),o=require("./main"),l=require("./InputControl"),d=require("./Layer");return s.inherits(e,d),e.prototype.render=function(e){document.body.appendChild(e),e.innerHTML='<div data-ui-type="MonthView" data-ui-child-name="monthView"></div>';var t=this.control;t.helper.initChildren(e);var n=t.getChild("monthView");if(n.setProperties({rawValue:t.rawValue,range:t.range}),n.on("change",i,t),t.autoHideLayer)n.on("itemclick",a.bind(t.layer.toggle,t.layer))},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden")){var t=this.control,i=t.getChild("monthView");i.setProperties({rawValue:t.rawValue,range:t.range}),this.show()}else this.hide()},t.prototype={type:"Calendar",initOptions:function(e){var t=new Date,i={range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},dateFormat:"YYYY-MM-DD",paramFormat:"YYYY-MM-DD",rawValue:t,autoHideLayer:!1};if(a.extend(i,e),"false"===e.autoHideLayer)i.autoHideLayer=!1;if(s.isInput(this.main))this.helper.extractOptionsFromInput(this.main,i);if(this.paramFormat=i.paramFormat,e.value)i.rawValue=this.parseValue(i.value);var n=i.range;if("string"==typeof n){var r=n.split(","),o=this.parseValue(r[0]),l=this.parseValue(r[1]);i.range={begin:o,end:l}}this.setProperties(i)},initStructure:function(){if(s.isInput(this.main))this.helper.replaceMain();var e=['<div class="${classes}" id="${id}">${value}</div>','<div class="${arrow}"><span class="${iconCalendar}"></span></div>'];this.main.innerHTML=s.format(e.join(""),{classes:this.helper.getPartClassName("text"),id:this.helper.getId("text"),arrow:this.helper.getPartClassName("arrow"),iconCalendar:this.helper.getIconClass("calendar")})},initEvents:function(){this.helper.addDOMEvent(this.main,"click",a.bind(this.layer.toggle,this.layer))},repaint:require("./painters").createRepaint(l.prototype.repaint,{name:["rawValue","range"],paint:function(e,t,i){n(e);var a=e.getChild("monthView");if(a)a.setProperties({rawValue:t,range:i})}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),setRange:function(e){this.setProperties({range:e})},stringifyValue:function(e){return r(e).format(this.dateFormat)||""},parseValue:function(e){var t=r(e,this.paramFormat).toDate();return t},dispose:function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;l.prototype.dispose.apply(this,arguments)}}},s.inherits(t,l),o.register(t),t}),define("esui/CheckBox",["require","underscore","./lib","./InputControl","./painters","./main"],function(require){function e(){var e=n.g(this.boxId).checked;this.setProperties({checked:e})}function t(){a.apply(this,arguments)}var i=require("underscore"),n=require("./lib"),a=require("./InputControl");return t.prototype={type:"CheckBox",createMain:function(){return document.createElement("div")},getCategory:function(){return"check"},initOptions:function(e){var t={value:this.main.value||"on",checked:this.main.checked||!1};i.extend(t,e),t.name=t.name||this.main.getAttribute("name");var n=t.datasource;if(delete t.datasource,this.setProperties(t),null!=n)if(i.isArray(n))this.checked=i.any(n,function(e){return e.value==this.value},this);else if(this.rawValue==n)this.checked=!0;if(!this.title)this.title=this.main.title||("on"===this.getValue()?"":this.getValue())},initStructure:function(){var e=[];if("input"===this.main.nodeName.toLowerCase())e=this.main.classList?[].slice.call(this.main.classList):n.getClasses(this.main),n.removeClasses(this.main,e),this.boxId=this.main.id||this.helper.getId("box"),this.helper.replaceMain(),this.main.id=this.helper.getId();else this.boxId=this.helper.getId("box");if(e.length)n.addClasses(this.main,e);var t='<input type="checkbox" name="${name}" id="${id}" /><label id="${textId}" for="${id}" class="'+this.helper.getPartClasses("box")+'"></label>';this.main.innerHTML=n.format(t,{name:this.name,id:this.boxId,textId:this.helper.getId("text")})},initEvents:function(){var t=n.g(this.boxId);if(this.helper.addDOMEvent(t,"click",function(i){if(this.fire("click"),!t.addEventListener)e.call(this,i)}),t.addEventListener)this.helper.addDOMEvent(t,"change",e)},setProperties:function(){var e=a.prototype.setProperties.apply(this,arguments);if(e.hasOwnProperty("checked"))this.fire("change")},getFocusTarget:function(){var e=n.g(this.boxId);return e},updateTitle:function(e){this.title=e,e=i.escape(e),this.helper.getPart("text").innerHTML=e,n.setAttribute(this.boxId,"title",e)},updateIndeterminate:function(e){this.helper.getPart("box").indeterminate=e},repaint:require("./painters").createRepaint(a.prototype.repaint,{name:["rawValue","checked","indeterminate"],paint:function(e,t,i,a){if(void 0!==a)e.updateIndeterminate(a),delete e.indeterminate;var r=e.stringifyValue(t);e=n.g(e.boxId),e.value=r,e.checked=i}},{name:["disabled","readOnly"],paint:function(e,t,i){var e=n.g(e.boxId);e.disabled=t,e.readOnly=i}},{name:"title",paint:function(e,t){e.updateTitle(t)}}),setChecked:function(e){this.setProperties({checked:e})},isChecked:function(){if(this.helper.isInStage("RENDERED")){var e=n.g(this.boxId);return e.checked}else return this.checked}},n.inherits(t,a),require("./main").register(t),t}),define("esui/CommandMenu",["require","underscore","./lib","./Control","./Layer","./main","./painters"],function(require){function e(e){for(var t=e.target;t!==e.currentTarget&&!a.hasAttribute(t,"data-index");)t=t.parentNode;var i=+t.getAttribute("data-index"),n=this.datasource[i];if(!n.disabled)if(this.layer.hide(),t!==e.currentTarget){if(n)if("function"==typeof n.handler)n.handler.call(this,n,i);this.fire("select",{item:n,index:i})}}function t(){s.apply(this,arguments)}function i(){r.apply(this,arguments),this.layer=new t(this)}{var n=require("underscore"),a=require("./lib"),r=require("./Control"),s=require("./Layer");require("./main")}a.inherits(t,s),t.prototype.nodeName="ul",t.prototype.dock={strictWidth:!0},t.prototype.render=function(e){for(var t="",i=0;i<this.control.datasource.length;i++){var n=this.control.helper.getPartClasses("node");if(i===this.control.activeIndex)n.push.apply(n,this.control.helper.getPartClasses("node-active"));if(this.control.datasource[i].disabled)n.push.apply(n,this.control.helper.getPartClasses("node-disabled"));t+='<li data-index="'+i+'" class="'+n.join(" ")+'">',t+=this.control.getItemHTML(this.control.datasource[i])}e.innerHTML=t},t.prototype.initBehavior=function(t){var i=this.control.helper;i.addDOMEvent(t,"click",e),a.addClass(t,i.getPrefixClass("dropdown"))},i.prototype.type="CommandMenu",i.prototype.itemTemplate="<span>${text}</span>",i.prototype.getItemHTML=function(e){var t={text:n.escape(e.text)};return a.format(this.itemTemplate,t)},i.prototype.initStructure=function(){var e=this.main;if(!this.displayHTML)this.displayHTML=e.innerHTML;a.addClass(e,this.helper.getPrefixClass("button"))},i.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",n.bind(this.layer.toggle,this.layer))};var o=require("./painters");return i.prototype.repaint=o.createRepaint(r.prototype.repaint,o.style("width"),o.style("height"),{name:"datasource",paint:function(e){e.layer.repaint()}},o.text("displayText"),{name:"displayHTML",paint:function(e,t){if(!e.displayText)e.main.innerHTML=t}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}}),i.prototype.createMain=function(){return a.dom.createElement('<button type="button"></button>')},i.prototype.dispose=function(){if(!this.helper.isInStage("DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;r.prototype.dispose.apply(this,arguments)}},a.inherits(i,r),require("./main").register(i),i}),define("esui/Crumb",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){r.apply(this,arguments)}function t(e){for(var t=e.target,n=a.getChildren(this.main);t!==this.main;){if(this.helper.isPart(t,"node")){var r=a.hasAttribute(t,"data-index")?t.getAttribute("data-index"):i(n,t),s=this.fire("click",{item:this.path[r]});return s.isDefaultPrevented()&&e.preventDefault(),void(s.isPropagationStopped()&&e.stopPropagation())}t=t.parentNode}}function i(e,t){for(var i=e.length-1;i>-1;i-=2)if(e[i]===t)return i/2}var n=require("underscore"),a=require("./lib"),r=require("./Control");e.defaultProperties={separator:">"},e.prototype.type="Crumb",e.prototype.initOptions=function(t){var i={path:[]};n.extend(i,e.defaultProperties,t);var r=a.getChildren(this.main);if(!t.path&&r.length)i.path=n.map(r,function(e){var t={text:a.getText(e)};if("a"===e.nodeName.toLowerCase())t.href=a.getAttribute(e,"href");return t});this.setProperties(i)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",t)},e.prototype.textNodeTemplate='<span class="${classes}" data-index="${index}">${text}</span>',e.prototype.linkNodeTemplate='<a class="${classes}" href="${href}" data-index="${index}">${text}</a>',e.prototype.separatorTemplate='<span class="${classes}">${text}</span>',e.prototype.getNodeHTML=function(e,t){var i=this.helper.getPartClasses("node");if(0===t)i.push.apply(i,this.helper.getPartClasses("node-first"));if(t===this.path.length-1)i.push.apply(i,this.helper.getPartClasses("node-last"));var r=e.href?this.linkNodeTemplate:this.textNodeTemplate,s={href:n.escape(e.href),text:n.escape(e.text),index:t,classes:i.join(" ")};return a.format(r,s)},e.prototype.getSeparatorHTML=function(){return a.format(this.separatorTemplate,{classes:this.helper.getPartClassName("separator"),text:n.escape(this.separator)})};var s=require("./painters");return e.prototype.repaint=s.createRepaint(r.prototype.repaint,{name:["path","separator"],paint:function(e,t){var i=n.map(t,e.getNodeHTML,e),a=e.getSeparatorHTML();e.main.innerHTML=i.join(a)}}),require("./main").register(e),a.inherits(e,r),e}),define("esui/Drawer",["require","./lib","./Control","eoo","./main"],function(require){function e(e){e.preventDefault();var t=this.fire("beforeclose");if(t.isDefaultPrevented())return!1;else return this.hide(),void this.fire("close")}function t(e){var t={},n=function(e,t){for(var n,a=i.getChildren(e),r=a.length;r--;)if(n=a[r].getAttribute("data-role"))t[n]=a[r]};if(n(e,t),t.header)n(t.header,t);return t}var i=require("./lib"),n=require("./Control"),exports={};exports.type="Drawer",exports.initStructure=function(){var e=this,i=e.main;if(e.$super(arguments),i.parentNode&&"body"!==i.parentNode.nodeName.toLowerCase())document.body.appendChild(i);var n,a=t(i);for(var r in a)if(a.hasOwnProperty(r))n=a[r],n.id=e.helper.getId(r),e.helper.addPartClasses(r,n)},exports.initEvents=function(){this.$super(arguments);var t=this.helper.getPart("close");if(t)this.helper.addDOMEvent(t,"click",e)},exports.show=function(){document.body.style.overflowY="hidden",i.addClass(this.main,this.helper.getPrimaryClassName("visible"))},exports.hide=function(){document.body.style.overflowY="",i.removeClass(this.main,this.helper.getPrimaryClassName("visible"))},exports.dispose=function(){this.hide(),i.removeNode(this.main.id),this.$super(arguments)};var a=require("eoo").create(n,exports);return require("./main").register(a),a}),define("esui/extension/AutoSort",["require","underscore","../Table","../Extension","../lib","../main"],function(require){function e(){a.apply(this,arguments)}function t(e){function t(t,i){var a=n(t,i);return"asc"===e.order?a:-a}var n=e.field.comparer;if(!n){var a=e.field.field;n=function(e,t){if(a)e=e[a],t=t[a];return i.isString(e)&&i.isString(t)?e.localeCompare(t):e-t}}var r=this.datasource;r.sort(t),this.setDatasource(r)}var i=require("underscore"),n=require("../Table"),a=require("../Extension");return e.prototype.type="AutoSort",e.prototype.activate=function(){if(this.target instanceof n)this.target.on("sort",t),a.prototype.activate.apply(this,arguments)},e.prototype.inactivate=function(){if(this.target instanceof n)this.target.un("sort",t),a.prototype.inactivate.apply(this,arguments)},require("../lib").inherits(e,a),require("../main").registerExtension(e),e}),define("esui/extension/CustomData",["require","../Extension","../main","../lib"],function(require){function e(){t.apply(this,arguments)}var t=require("../Extension");e.prototype.type="CustomData";var i=/^data[A-Z0-9]/;return e.prototype.activate=function(){t.prototype.activate.apply(this,arguments);var e=this.target.data;if("object"!=typeof e)e=require("../main").parseAttribute(this.target.data);for(var n in this.target)if(this.target.hasOwnProperty(n)&&i.test(n)){var a=n.charAt(4).toLowerCase()+n.slice(5);e[a]=this.target[n]}this.target.getData=function(t){return e[t]},this.target.setData=function(t,i){e[t]=i}},e.prototype.inactivate=function(){t.prototype.inactivate.apply(this,arguments),delete this.target.getData,delete this.target.setData},require("../lib").inherits(e,t),require("../main").registerExtension(e),e}),define("esui/validator/MaxLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="maxLength",e.prototype.errorMessage="${title}不能超过${maxLength}个字符",e.prototype.check=function(e,t){return new i(e.length<=this.getLimitCondition(t),this.getErrorMessage(t))},e.prototype.getErrorMessage=function(e){var t=require("../lib"),i=e.get(this.type+"ErrorMessage")||this.errorMessage,n=this.getLimitCondition(e),a={title:e.get("title"),maxLength:n,length:n};return t.format(i,a)},e.prototype.getLimitCondition=function(e){return e.get("length")||e.get("maxLength")},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/extension/TableEdit",["require","../validator/MaxLengthRule","../validator/MaxRule","../validator/MinRule","../validator/RequiredRule","../validator/PatternRule","../Extension","../lib","../controlHelper","../main","../Table","../validator/ValidityState","../validator/Validity"],function(require){function e(e,i){if(nt=e,X=i.rowIndex,Z=i.columnIndex,!K)K=N.layer.create(),document.body.appendChild(K),K.className=e.helper.getPartClassName("editor"),t();K.style.zIndex=e.zIndex||"",n(i)}function t(){r(),i()}function i(){var e=O.init(K);tt=s(e,B),it=s(e,W),tt.on("click",h()),it.on("click",m()),M(1)}function n(e){if(e.field&&at!==e.field){et&&et.dispose(),et=null;var t=F+rt++,i=R+rt,n=E.g(A),a=E.g(z);n.innerHTML=E.format(G,{inputId:t}),a.innerHTML=E.format(J,{validId:i});var r={properties:{}};r.properties[t]=E.extend({id:t,validityLabel:R+rt},e.field.editRules),et=O.init(n,r)[0],O.init(a),et.on("enter",h()),at=e.field}}function a(e){if(e===nt){o(),et.dispose(),tt.dispose(),it.dispose();try{K&&document.body.removeChild(K)}catch(t){}K=null,et=null,tt=null,it=null,nt=null,at=null}}function r(){K.innerHTML=E.format($,{inputFieldId:A,okId:B,cancelId:W,okText:q,cancelText:U,optClass:nt.helper.getPartClassName("editor-opt"),errorClass:nt.helper.getPartClassName("editor-error"),errorId:z,editorBtnClass:nt.helper.getPartClassName("editor-buttons")})}function s(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.id===t)return n}}function o(){K&&(K.style.display="none")}function l(){K&&(K.style.display="")}function d(e){if(e){var t=new V;t.addState("TableEditCustomRule",new j(!1,e)),et.showValidity(t)}}function u(){var e=new V;e.addState("TableEditCustomRule",new j(!0)),et.showValidity(e)}function h(){return function(){c()}}function c(){if(et.validate()){var e={value:w(),rowIndex:X,columnIndex:Z,field:nt.realFields[Z]};if(e=nt.fire("saveedit",e),P(nt,"saveedit",e),!e.isDefaultPrevented())f.call(nt,e);else p.call(nt,e)}}function f(){if(this===nt)o(),Q=0}function p(e){if(this===nt&&e.errorMsg)d(e.errorMsg)}function m(){return function(){_()}}function g(){if(this===nt)y(this)}function v(){if(this===nt)y(this)}function y(e){if(K){var t=E.g(e.getBodyCellId(X,Z));if(t)N.layer.attachTo(K,t)}}function _(){Q=0,o(),M(1);var e={rowIndex:X,columnIndex:Z,field:nt.realFields[Z]};e=nt.fire("canceledit",e),P(nt,"canceledit",e)}function x(t,i){if(Q&&nt)_();Q=1,e(t,i),M(0),l();var n=E.g(t.getBodyCellId(i.rowIndex,i.columnIndex));N.layer.attachTo(K,n),b(i.value),u()}function M(e){tt.setDisabled(e),it.setDisabled(e)}function b(e){et.setValue(e)}function w(){return et.getValue()}function L(e){var t=this;if(t.startEdit){var i=E.getAttribute(e,"data-row"),n=E.getAttribute(e,"data-col");t.startEdit(i,n,e)}}function C(e,t,i){if(this.editable){var n=this.realFields[t],a={rowIndex:e,columnIndex:t,field:n};if(a=this.fire("startedit",a),P(this,"startedit",a),!a.isDefaultPrevented()){var r=this.datasource[e],s=n.editContent,o="function"==typeof s?s.call(this,r,e,t):r[n.field];x(this,{field:n,rowIndex:e,columnIndex:t,element:i,value:o})}}}function T(){if(this===nt)_()}function D(){if(this===nt)o()}function Y(){if(this===nt)l()}function k(e,t,i,n,a,r){var s=i.editable;if("function"==typeof s)s=s.call(e,t,n,a,r);var o=e.helper.getIconClass();if(e.editable&&s)return{textClass:e.getClass("cell-editable"),html:E.format(st,{className:e.getClass("cell-editentry")+" "+o,row:n,col:a})};else return void 0}function P(e,t,i){var n=i.field["on"+t];if(n&&"[object Function]"===Object.prototype.toString.call(n))n.call(e,i)}function S(){I.apply(this,arguments)}require("../validator/MaxLengthRule"),require("../validator/MaxRule"),require("../validator/MinRule"),require("../validator/RequiredRule"),require("../validator/PatternRule");
var I=require("../Extension"),E=require("../lib"),N=require("../controlHelper"),O=require("../main"),H=require("../Table"),j=require("../validator/ValidityState"),V=require("../validator/Validity"),$=['<div class="${optClass}">','<div id="${inputFieldId}"></div>','<div class="${editorBtnClass}">','<button data-ui="id:${okId};type:Button;variants:primary">${okText}</button> ','<button data-ui="id:${cancelId};type:Button;variants:link">',"${cancelText}","</button>","</div>","</div>",'<div class="${errorClass}" id="${errorId}"></div>'].join(""),A="ctrl-table-editor-inputField",F="ctrl-table-editorInput",R="ctrl-table-editor-validityLabel",B="ctrl-table-editor-ok",W="ctrl-table-editor-cancel",z="ctrl-table-editor-error",q="确定",U="取消",G='<input data-ui="type:TextBox;id:${inputId}"/>',J='<label data-ui="type:Validity;id:${validId}"></label>',X=-1,Z=-1,Q=0,K=null,et=null,tt=null,it=null,nt=null,at=null,rt=1,st='<div class="${className}" data-row="${row}" data-col="${col}"></div>';return S.prototype.type="TableEdit",S.prototype.activate=function(){var e=this.target;if(e instanceof H)e.startEdit=C,e.cancelEdit=T,e.hideEditLayer=D,e.showEditError=Y,e.addRowBuilders([{index:3,getColHtml:k}]),e.addHandlers("click",{handler:L,matchFn:N.getPartClasses(e,"cell-editentry")[0]}),e.on("enddrag",g),e.on("resize",v),I.prototype.activate.apply(this,arguments)},S.prototype.inactivate=function(){var e=this.target;if(e instanceof H)delete e.startEdit,delete e.cancelEdit,e.un("enddrag",g),e.un("resize",v),a(e),I.prototype.inactivate.apply(this,arguments)},E.inherits(S,I),O.registerExtension(S),S}),define("esui/extension/TableSubrow",["require","../Extension","../lib","../controlHelper","../main","../Table"],function(require){function e(e,t){return b.getId(e,t)}function t(e,t){return b.getPartClasses(e,t).join(" ")}function i(e,t){return M.getAttribute(e,"data-"+t)}function n(e,t,i){M.setAttribute(e,"data-"+t,i)}function a(e){return!("undefined"==typeof e||null===e)}function r(t,i){return e(t,"subrow")+i}function s(t,i){return e(t,"subentry")+i}function o(e){return{subrow:e.subrow&&"false"!==e.subrow}}function l(e){d(this,e)}function d(e,t){var i=/subentry-opened/.test(t.className),n="subentry-hover";if(i)n="subentry-opened-hover";b.addPartClasses(e,n,t)}function u(e){h(this,e)}function h(e,t){b.removePartClasses(e,"subentry-hover",t),b.removePartClasses(e,"subentry-opened-hover",t)}function c(e){var t=this,n=i(e,"index"),a=t.datasource,r=a instanceof Array&&a.length;if(r&&!(n>=r)){if(!i(e,"subrowopened")){var s=a[n],o={index:n,item:s};if(o=t.fire("subrowopen",o),!o.isDefaultPrevented())p(t,n,e)}else f(t,n,e);d(t,e)}}function f(e,t,i){var a={index:t,item:e.datasource[t]};if(a=e.fire("subrowclose",a),!a.isDefaultPrevented())return h(e,i),e.subrowIndex=null,b.removePartClasses(e,"subentry-opened",i),b.removePartClasses(e,"row-unfolded",e.getRow(t)),n(i,"title",e.subEntryOpenTip),n(i,"subrowopened",""),M.g(r(e,t)).style.display="none",!0;else return!1}function p(e,t,i){var o=e.subrowIndex,l=1;if(a(o))l=f(e,o,M.g(s(e,o)));if(l)b.addPartClasses(e,"subentry-opened",i),b.addPartClasses(e,"row-unfolded",e.getRow(t)),n(i,"title",e.subEntryCloseTip),n(i,"subrowopened","1"),M.g(r(e,t)).style.display="",e.subrowMutex&&(e.subrowIndex=t)}function m(e,i,n,a,r,o){var l=o.subrow,d=l&&n.subEntry,u={notInText:!0,width:e.subEntryWidth,align:"right"},h=e.helper.getIconClass();if(d){var c="function"==typeof n.isSubEntryShow?n.isSubEntryShow.call(e,i,a,r):!0;if(c!==!1)u.html=M.format(C,{className:t(e,"subentry")+" "+h,id:s(e,a),title:e.subEntryOpenTip,index:a});u.colClass=t(e,"subentryfield")}return u}function g(e,i,n){var a=e.datasource?e.datasource.length:0;return n.subrow?'<div id="'+r(e,i)+'" class="'+t(e,"subrow")+" "+(a===i+1?t(e,"subrow-last"):"")+'" style="display:none"></div>':""}function v(e,t){return M.g(r(e,t))}function y(t,i){var n=v(t,i),a=e(t,"subrow-panel-"+i),r=t.viewContext.get(a);if(!r)n.innerHTML=M.format(T,{id:a,index:i}),t.initChildren(n),r=t.viewContext.get(a),t.addChild(r);return r}function _(){x.apply(this,arguments)}var x=require("../Extension"),M=require("../lib"),b=require("../controlHelper"),w=require("../main"),L=require("../Table"),C='<div class="${className}" id="${id}" title="${title}" data-index="${index}"></div>',T='<div data-ui="type:Panel;id:${id}" data-index="${index}"></div>';return _.prototype.type="TableSubrow",_.prototype.activate=function(){var e=this.target;if(e instanceof L){var t=b.getPartClasses,i=t(e,"subentry")[0];e.addRowBuilders([{index:0,getRowArgs:o,getColHtml:m,getSubrowHtml:g}]),e.addHandlers("click",{handler:c,matchFn:i}),e.addHandlers("mouseover",{handler:l,matchFn:i}),e.addHandlers("mouseout",{handler:u,matchFn:i}),e.getSubrow=function(e){return v(this,e)},e.setSubrowContent=function(e,t){var i=y(this,t);if(i)i.set("content",e)},e.getSubrowContainer=function(e){return y(this,e)},x.prototype.activate.apply(this,arguments)}},_.prototype.inactivate=function(){var e=this.target;if(e instanceof L)delete e.getSubrow,x.prototype.inactivate.apply(this,arguments)},M.inherits(_,x),w.registerExtension(_),_}),define("esui/Form",["require","underscore","./lib","./main","./Panel"],function(require){function e(e){this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}function t(e,t){for(var i={},n=0;n<e.length;n++){var a=e[n];if("check"!==a.getCategory()||a.isChecked())if(!a.isDisabled()){var r=a.get("name"),s=t(a);if(i.hasOwnProperty(r))i[r]=[].concat(i[r],s);else i[r]=s}else;else;}return i}function i(){o.apply(this,arguments)}function n(e){var t=e.getCategory();return"input"===t||"check"===t}var a=require("underscore"),r=require("./lib"),s=require("./main"),o=require("./Panel");return e.prototype.splice=Array.prototype.splice,e.prototype.getData=function(){return t(this,function(e){return e.getRawValue()})},e.prototype.getDataAsString=function(){var e=t(this,function(e){var t=e.getValue();return encodeURIComponent(t)}),i="";return a.each(e,function(e,t){i+=encodeURIComponent(t)+"="+e}),i},e.prototype.getValueAsString=function(e){var t=this.getData(),i=t[e],n=i?"string"==typeof i?i:i.join(","):"";return n},e.prototype.checkAll=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!0)}},e.prototype.uncheckAll=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!1)}},e.prototype.checkInverse=function(){for(var e=0;e<this.length;e++){var t=this[e];if("check"===t.getCategory())t.setChecked(!t.isChecked())}},e.prototype.checkByValue=function(e){for(var t=r.toDictionary(e),i=0;i<this.length;i++){var n=this[i];if("check"===n.getCategory()){var a=t.hasOwnProperty(n.getValue());n.setChecked(a)}}},i.defaultProperties={autoValidate:!1},i.prototype.type="Form",i.prototype.validateAndSubmit=function(){var e=this.fire("beforevalidate");if(!e.isDefaultPrevented())try{var t=this.get("autoValidate")?this.validate():!0,i=this.fire("aftervalidate",{isValid:t});if(i.isDefaultPrevented())return;var n={triggerSource:this};if(t)this.fire("submit",n);else this.fire("invalid",n)}catch(a){this.fire("submitfail",{error:a})}},i.prototype.initEvents=function(){if("form"===this.main.nodeName.toLowerCase())this.helper.addDOMEvent(this.main,"submit",function(e){return this.validateAndSubmit(),e.preventDefault(),!1})},i.prototype.createMain=function(e){var t=document.createElement("form");return t.method="POST",t.action=e.action||"",t},i.prototype.initOptions=function(e){var t=a.extend({},i.defaultProperties,e);if("form"===this.main.nodeName.toLowerCase())t.action=this.main.getAttribute("action"),t.method=this.main.getAttribute("method");else t.method=this.method||"POST";if("false"===e.autoValidate)t.autoValidate=!1;else t.autoValidate=!!t.autoValidate;o.prototype.initOptions.call(this,t)},i.prototype.getInputControls=function(t,i){function a(e,o){for(var l=o.children,d=l.length,u=0;d>u;u++){var h=l[u];if(1===h.nodeType){var c=s.getControlByDOM(h);if(c&&n(c)&&c.viewContext===e.viewContext&&c.get("name")&&(!t||c.get("name")===t)&&(!i||c.get("type")===i))r.push(c);else a(e,h)}else;}}var r=[];return a(this,this.main),new e(r)},i.prototype.getData=function(){var e=this.getInputControls();return e.getData()},i.prototype.getDataAsString=function(){var e=this.getInputControls();return e.getDataAsString()},i.prototype.validate=function(){for(var e=this.getInputControls(),t=!0,i=0;i<e.length;i++){var n=e[i];if(!n.isDisabled())t&=n.validate();else;}return!!t},i.prototype.repaint=function(e,t){o.prototype.repaint.apply(this,arguments);var i=!1;if(!t&&this.submitButton)i=!0;if(t&&t.hasOwnProperty("submitButton")){var n=t.submitButton;if(n.oldValue){for(var a=0;a<n.oldValue.length;a++){var r=this.viewContext.get(n.oldValue[a]);if(r)r.un("click",this.validateAndSubmit,this),r.un("click",!1)}i=!!this.submitButton}}if(i)for(var s=0;s<this.submitButton.length;s++){var l=this.viewContext.get(this.submitButton[s]);if(l)l.on("click",this.validateAndSubmit,this),l.on("click",!1)}},i.prototype.setProperties=function(e){if(e=a.clone(e),e.hasOwnProperty("submitButton"))e.submitButton=r.splitTokenList(e.submitButton);o.prototype.setProperties.call(this,e)},r.inherits(i,o),s.register(i),i}),define("esui/Frame",["require","esui/lib","esui/Control","esui/painters","esui"],function(require){function e(){i.apply(this,arguments)}var t=require("esui/lib"),i=require("esui/Control");e.prototype.type="Frame",e.prototype.createMain=function(){return document.createElement("iframe")},e.prototype.initOptions=function(e){var i={};if(t.extend(i,e),!i.src)i.src=this.main.src;this.setProperties(i)},e.prototype.initStructure=function(){this.main.frameborder="no",this.main.marginHeight="0",this.main.marginWeight="0"},e.prototype.initEvents=function(){this.helper.delegateDOMEvent(this.main,"load"),this.helper.addDOMEvent(this.main,"message",function(e){var t={origin:e.origin,data:e.data};this.fire("message",t)})};var n=require("esui/painters");return e.prototype.repaint=n.createRepaint(i.prototype.repaint,{name:"src",paint:function(e,t){if(e.main.src!==t)e.main.src=t}},n.style("height"),n.style("width")),e.prototype.callContentMethod=function(e){var t=[].slice.call(arguments,1),i=this.main.contentWindow;if(!i)throw new Error("No content window on this iframe");if("function"!=typeof i[e])throw new Error('No "'+e+'" method on window');return i[e].apply(i,t)},e.prototype.postMessage=function(e,t){var i=this.main.contentWindow;if(!i)throw new Error("No content window on this iframe");if("function"!=typeof i.postMessage)throw new Error("Current browser does not support postMessage");i.postMessage(e,t)},t.inherits(e,i),require("esui").register(e),e}),define("esui/Link",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){n.apply(this,arguments)}var t=require("underscore"),i=require("./lib"),n=require("./Control"),a=require("./painters");return e.prototype={constructor:e,type:"Link",getCategory:function(){return"container"},createMain:function(){return document.createElement("a")},initOptions:function(e){var i={};if(t.extend(i,e),null==i.href)i.href=this.main.href;if(null==i.target)i.target=this.main.target;if(null==i.content)i.content=this.main.innerHTML;t.extend(this,i)},initEvents:function(){this.helper.delegateDOMEvent(this.main,"click")},render:function(){if(this.main&&"a"===this.main.nodeName.toLowerCase())n.prototype.render.apply(this,arguments)},repaint:a.createRepaint(n.prototype.repaint,a.attribute("href"),a.attribute("target"),{name:"content",paint:function(e,t){e.helper.disposeChildren(),e.main.innerHTML=t,e.helper.initChildren()}})},i.inherits(e,n),require("./main").register(e),e}),define("esui/Pager",["require","underscore","./lib","./main","./Control","./Select","./painters"],function(require){function e(e){var t=['<div id="${pagerWrapperId}" class="${pagerWrapperClass}">','<div id="${selectWrapperId}" ','class="${selectWrapperClass}">','<span id="${labelId}" class="${labelClass}">',"${labelText}</span>",'<div data-ui="type:Select;childName:select;variants:compact;','id:${selectPagerId};" class="${selectClass}"></div>',"</div>",'<ul id="${mainId}" class="${mainClass}"></ul>',"</div>"];return h.format(t.join(""),{pagerWrapperId:e.helper.getId("pager-wrapper"),pagerWrapperClass:e.helper.getPartClasses(e.layout)[0],selectWrapperId:e.helper.getId("select-wrapper"),selectWrapperClass:e.helper.getPartClassName("select-wrapper"),labelId:e.helper.getId("label"),labelClass:e.helper.getPartClassName("label"),labelText:"每页显示",selectPagerId:e.helper.getId("selectPager"),selectClass:e.helper.getPartClassName("select"),mainId:e.helper.getId("main"),mainClass:e.helper.getPartClassName("main")})}function t(e){function t(t){return h.format(e.urlTemplate,{page:t,pageSize:e.pageSize})}function i(i,n,a,r){var s={className:e.helper.getPartClassName(i)};if(arguments.length>1)s.link=t(n),s.id=e.helper.getId(a),s.page=n,s.text=r;return s}function n(t,i){if(!i){var n={anchor:s,plain:r};i=n[e.pageType]||n.anchor}return h.format(i,t)}function a(e,t){if("number"==typeof e)e=i("item",e,"page-"+e,e);var a=n(e,t);p.push(a)}var r='<li class="${className}" id="${id}" data-page="${page}">${text}</li>',s='<li class="${className}" id="${id}"><a href="${link}">${text}</a></li>',o='<li class="${className}">…</li>',l=e.pagePattern,d=e.page,u=e.backCount,c=e.forwardCount,f=Math.ceil(e.count/e.pageSize),p=[];if(d>1){if("fullPattern"===l){var m=i("item-extend ui-pager-item-first",0,"page-first",e.firstText);a(m)}var g=i("item-extend",d-1,"page-back",e.backText);a(g)}if(d>u+1)if(a(1),d>u+2){var g=i("item-omit");a(g,o)}for(var v=d>u?u:d-1,y=d-v;d>y;y++)a(y);var g=i("item-current",d,"page-"+d,d);a(g,r);for(var v=f-d>c?c:f-d,y=d+1;d+v+1>y;y++)a(y);if(f-c>d){if(f-c-1>d){var g=i("item-omit");a(g,o)}a(f)}if(f>d){var g=i("item-extend",d+1,"page-forward",e.forwardText);if(a(g),"fullPattern"===l){var _=i("item-extend ui-pager-item-last",Math.ceil(e.count/e.pageSize),"page-last",e.lastText);a(_)}}return p.join("")}function i(e){var i=e.pageSize;i=i>0?i:1,e.pageSize=i,e.getChild("select").set("value",i+"");var n=Math.ceil(e.count/i),a=e.page;a=a>n?n:a,a=a>0?a:1,e.page=a;var r=e.helper.getPart("main");r.innerHTML=t(e)}function n(e,t){function i(){for(var t=[],i=0,n=arguments.length;n>i;i++)t.push(e.helper.getPartClasses(arguments[i])[0]);return t}var n=e.helper.getPart("pager-wrapper");h.removeClasses(n,i("alignLeft","alignLeftReversed","alignRight","alignRightReversed","distributed","distributedReversed")),h.addClass(n,e.helper.getPartClasses(t)[0])}function a(e){var t=e.target,i=this.helper.getId("page-last"),n=this.helper.getId("page-back"),a=this.helper.getId("page-forward"),r=this.helper.getId("page-first"),s=this.page;if(this.helper.isPart(t,"item")||this.helper.isPart(t,"item-extend")){if(t.id===n)s--;else if(t.id===i)s=Math.ceil(this.count/this.pageSize);else if(t.id===a)s++;else if(t.id===r)s=1;else s=+h.getAttribute(t,"data-page");this.set("page",s)}}function r(e){var t=u.map(e,function(e){return{text:e+"",value:e+""}});return t}function s(){var e=parseInt(this.getChild("select").getValue(),10);this.pageSize=e,i(this),this.fire("changepagesize"),this.fire("pagesizechange")}function o(e){var t=e.helper.getPart("select-wrapper");e.helper.removePartClasses("select-hidden",t)}function l(e){var t=e.helper.getPart("select-wrapper");e.helper.addPartClasses("select-hidden",t)}function d(){f.apply(this,arguments)}var u=require("underscore"),h=require("./lib"),c=require("./main"),f=require("./Control");return require("./Select"),d.defaultProperties={},d.prototype={type:"Pager",defaultProperties:{pageSizes:[15,30,50,100],pageSize:15},initOptions:function(e){var t={pageType:"anchor",count:0,page:1,backCount:3,forwardCount:3,firstText:"首页",lastText:"末页",backText:"上一页",forwardText:"下一页",urlTemplate:"",layout:"alignLeft"};u.extend(t,this.defaultProperties,d.defaultProperties,e),this.setProperties(t)},initStructure:function(){this.main.innerHTML=e(this),this.helper.initChildren();var t=this.getChild("select");if(!this.pageSizes||!this.pageSizes.length)l(this);else{var i={datasource:r(this.pageSizes),value:this.pageSize+""};t.setProperties(i)}s.call(this)},initEvents:function(){function e(e,t,i){var n=e.helper.getPartClasses(t+"-layer"),a=i.layer;a.addCustomClasses(n),e.fire("selectlayerrendered",{layer:a})}var t=this.getChild("select");t.on("change",s,this),t.on("layerrendered",h.curry(e,this,"select")),this.helper.addDOMEvent("main","click",a)},setProperties:function(e){if(e=u.clone(e),e.hasOwnProperty("pageIndex")&&!e.hasOwnProperty("page"))e.page=+e.pageIndex+1;var t=["count","page","backCount","forwardCount","pageSize"];u.each(t,function(t){var i=e[t];if(u.isString(i))e[t]=+i});var i=f.prototype.setProperties.apply(this,arguments);if(i.hasOwnProperty("page"))this.fire("changepage"),this.fire("pagechange")},repaint:require("./painters").createRepaint(f.prototype.repaint,{name:"pageSizes",paint:function(e,t){var i=e.getChild("select");if(!t||!t.length)l(e);else{var n={datasource:r(t),value:e.pageSize+""};i.setProperties(n),o(e)}}},{name:"layout",paint:n},{name:["pageType","count","pageSize","page","backCount","forwardCount","firstText","lastText","backText","pagePattern","forwardText","urlTemplate"],paint:i}),getPageIndex:function(){return this.get("page")-1}},h.inherits(d,f),c.register(d),d}),define("esui/RangeCalendar",["require","./Button","./MonthView","./CheckBox","./Label","./lib","./InputControl","./controlHelper","./Layer","./main","moment","underscore"],function(require){function e(){C.apply(this,arguments)}function t(e,t,i){if("render"===i){var n=e.helper.getPart("shortcut");L.addDOMEvent(e,n,"click",m);var a=e.getChild("endlessCheck");if(a)if(a.on("change",b.curry(d,e)),e.isEndless)a.setChecked(!0),e.helper.addPartClasses("shortcut-disabled",e.helper.getPart(e));var r=e.getChild("okBtn");r.on("click",b.curry(v,e));var s=e.getChild("cancelBtn");s.on("click",Y.bind(e.layer.hide,e.layer));var o=e.getChild("closeBtn");o.on("click",Y.bind(e.layer.hide,e.layer))}else{e.view.begin=t.begin,e.view.end=t.end,e.value=e.convertToParam(t);var l;if(!t.end)l=!0;else l=!1;e.setProperties({isEndless:l})}p(e,"begin",e.view.begin,"render"===i),p(e,"end",e.view.end,"render"===i);var u=h(e,e.view);f(e,u)}function i(){this.now=new Date,w.apply(this,arguments),this.layer=new e(this)}function n(e){var t=e.helper,i='<div class="${shortCutClass}" id="${shortcutId}">${shortCut}</div><div class="${bodyClass}">${beginCalendar}${endCalendar}</div><div class="${footClass}"><div class="${okBtnClass}" data-ui="type:Button;childName:okBtn;variants:primary">确定</div><div class="${cancelBtnClass}" data-ui="type:Button;childName:cancelBtn;variants:link">取消</div></div><div class="${closeIconContainer}" data-ui="type:Button;childName:closeBtn;variants:link"><span class="${closeIcon}"></span></div>';return b.format(i,{bodyClass:t.getPartClassName("body"),shortcutId:t.getId("shortcut"),shortCutClass:t.getPartClassName("shortcut"),shortCut:o(e),beginCalendar:l(e,"begin"),endCalendar:l(e,"end"),footClass:t.getPartClassName("foot"),okBtnClass:t.getPartClassName("okBtn"),cancelBtnClass:t.getPartClassName("cancelBtn"),closeIconContainer:t.getPartClassName("close-icon-container"),closeIcon:t.getIconClass("close")})}function a(e){return D(e).startOf("day").toDate()}function r(e){return D(e).endOf("day").toDate()}function s(e,t){var i=e.range,n=t.getValue.call(e,e.now);if(a(i.begin)>a(i.begin)||r(n.end)<r(n.end))return!0;else return!1}function o(e){for(var t=e.shownShortCut.split(","),i={},n=0;n<t.length;n++)i[t[n]]=!0;for(var a='<span data-index="${shortIndex}" class="'+e.helper.getPartClassName("shortcut-item")+' ${shortClass}" id="${shortId}">${shortName}</span>',r=e.shortCutItems,o=r.length,l=[],d=0;o>d;d++){var u=r[d];if(i[u.name]){var h=u.name,c=[];if(0===d)c=c.concat(e.helper.getPartClasses("shortcut-item-first"));var f=s(e,u);if(f)c=c.concat(e.helper.getPartClasses("shortcut-item-disabled"));var p=e.helper.getId("shortcut-item"+d);l.push(b.format(a,{shortIndex:d,shortClass:c.join(" "),shortId:p,shortName:h}))}}return l.join("")}function l(e,t){var i="";if(e.endlessCheck&&"end"===t)i='<input type="checkbox" title="不限结束" data-ui-type="CheckBox" data-ui-variants="custom"data-ui-child-name="endlessCheck" />';var n='<div class="${frameClass}"><div class="${labelClass}"><h3>${labelTitle}</h3>'+i+'</div><div class="${calClass}"><div data-ui="type:MonthView;childName:${calName}"></div></div></div>';return b.format(n,{frameClass:e.helper.getPartClassName(t),labelClass:e.helper.getPartClassName("label"),labelTitle:"begin"===t?"开始日期":"结束日期",titleId:e.helper.getId(t+"Label"),calClass:e.helper.getPartClassName(t+"-cal"),calName:t+"Cal"})}function d(e){var t,i=e.getChild("endCal"),n=e.helper.getPart("shortcut");if(this.isChecked())e.isEndless=!0,i.disable(),t=-1,e.view.end=null,e.helper.addPartClasses("shortcut-disabled",n);else e.isEndless=!1,i.enable(),g.apply(e,[i,"end"]),e.helper.removePartClasses("shortcut-disabled",n)}function u(e,t){if(!e&&t||e&&!t)return!1;else if(!e&&!t)return!0;return D(e).isSame(t,"day")}function h(e,t){for(var i=e.shortCutItems,n=i.length,a=0;n>a;a++){var r=i[a],s=r.getValue.call(e,e.now);if(u(t.begin,s.begin)&&u(t.end,s.end))return a}return-1}function c(e,t){var i=e,n=e.shortCutItems;if(!(0>t||t>=n.length)){var a=n[t].getValue.call(i,i.now),r=a.begin,s=a.end;e.view={begin:r,end:s},p(e,"begin",r),p(e,"end",s),f(i,t)}}function f(e,t){var i=e.shortCutItems,n=e.miniMode;if(null!==n&&n!==t)e.helper.removePartClasses("shortcut-item-selected",e.helper.getPart("shortcut-item"+n));if(e.miniMode=t,t>=0)e.helper.addPartClasses("shortcut-item-selected",e.helper.getPart("shortcut-item"+t)),e.curMiniName=i[t].name;else e.curMiniName=null}function p(e,t,i,n){var a=e.getChild(t+"Cal");if(a){if(n===!0)a.on("change",Y.bind(g,e,a,t)),a.on("changemonth",Y.bind(M,null,e));a.setProperties({rawValue:i,range:e.range})}}function m(e){if(!this.isEndless)for(var t=e.target||e.srcElement,i=this.helper.getPartClasses("shortcut-item"),n=this.helper.getPartClasses("shortcut-item-disabled");t&&t!==document.body;){if(b.hasClass(t,i[0])&&!b.hasClass(t,n[0])){var a=t.getAttribute("data-index");return void c(this,a)}t=t.parentNode}}function g(e,t){var i=e.getRawValue();if(i){this.view[t]=i;var n=h(this,this.view);f(this,n),M(this)}}function v(e){var t=e,i=e.view,n=i.begin,a=i.end;if(e.isEndless)a=null;var r=a-n;if(!a)r=n;var s;if(r>0)s={begin:n,end:a};else if(null!==a)s={begin:a,end:n};var o=t.fire("beforechange",{value:s});if(o.isDefaultPrevented())return!1;else return t.rawValue=s,t.value=t.convertToParam(s),y(t,s),t.layer.hide(),void t.fire("change",s)}function y(e,t){var i=e.helper.getPart("text");i.innerHTML=_(e,t)}function _(e,t){var i=x(e,t);if(e.isEndless&&i)return i;var n="";if(!e.curMiniName&&null!==e.miniMode&&e.miniMode>=0&&e.miniMode<e.shortCutItems.length)e.curMiniName=e.shortCutItems[e.miniMode].name;if(e.curMiniName)n=e.curMiniName+"&nbsp;&nbsp;";if(i)return n+i;else return""}function x(e,t){t=t||e.getRawValue();var i=t.begin,n=t.end,a=e.dateFormat;if(i&&n)return D(i).format(a)+" 至 "+D(n).format(a);else if(!n)return D(i).format(a)+" 起 ";return""}function M(e){function t(e,t){var n=new Date(e.year,e.month,1);n=D(n);for(var a=n.clone().endOf("month"),o=n;a>=o;){var l=!0;if("begin"===t&&(o<=D(r)||o>D(s)))l=!1;else if("end"===t&&(o<D(r)||o>=D(s)))l=!1;i(e,o.toDate(),l),o.add("day",1)}}function i(e,t,i){var n=e.getDateItemHTML(t);if(i)e.helper.addPartClasses("month-item-highlight",n);else e.helper.removePartClasses("month-item-highlight",n)}var n=e.getChild("beginCal"),a=e.getChild("endCal"),r=e.view.begin,s=e.view.end;t(n,"begin"),t(a,"end")}require("./Button"),require("./MonthView"),require("./CheckBox"),require("./Label");var b=require("./lib"),w=require("./InputControl"),L=require("./controlHelper"),C=require("./Layer"),T=require("./main"),D=require("moment"),Y=require("underscore");return b.inherits(e,C),e.prototype.render=function(e){var i=this.control;document.body.appendChild(e),e.innerHTML=n(i),i.helper.initChildren(e),t(i,i.view,"render")},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden")){var i=this.control;t(i,i.rawValue,"repaint"),this.show()}else this.hide()},i.prototype.convertToParam=function(e){var t=e.begin,i=e.end,n=" 00:00:00",a=" 23:59:59",r=[];if(r.push(D(t).format("YYYY-MM-DD")+n),i)r.push(D(i).format("YYYY-MM-DD")+a);return r.join(",")},i.prototype.convertToRaw=function(e){var t=e.split(",");if(1===t.length)t.push("2046-11-04");else if(""===t[0])t[0]="1983-09-03";else if(""===t[1])t[1]="2046-11-04";return{begin:D(t[0],"YYYY-MM-DD").toDate(),end:D(t[1],"YYYY-MM-DD").toDate()}},i.defaultProperties={dateFormat:"YYYY-MM-DD",endlessCheck:!1,shortCutItems:[{name:"昨天",value:0,getValue:function(){var e=new Date(this.now.getTime());return e.setDate(e.getDate()-1),{begin:e,end:e}}},{name:"最近7天",value:1,getValue:function(){var e=D(this.now);return{begin:e.clone().subtract("day",7).toDate(),end:e.clone().subtract("day",1).toDate()}}},{name:"上周",value:2,getValue:function(){var e=this.now,t=new Date(e.getTime()),i=new Date(e.getTime()),n=1;if(t.getDay()<n%7)t.setDate(t.getDate()-14+n-t.getDay());else t.setDate(t.getDate()-7-t.getDay()+n%7);return t.setHours(0,0,0,0),i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()+6),i.setHours(0,0,0,0),{begin:t,end:i}}},{name:"本月",value:3,getValue:function(){return{begin:D(this.now).startOf("month").toDate(),end:D(this.now).toDate()}}},{name:"上个月",value:4,getValue:function(){var e=D(this.now).subtract("month",1).startOf("month").toDate(),t=D(this.now).startOf("month").subtract("day",1).toDate();return{begin:e,end:t}}},{name:"上个季度",value:5,getValue:function(){var e=this.now,t=D(e).subtract("month",e.getMonth()%3+3).startOf("month").toDate(),i=D(e).subtract("month",e.getMonth()%3).startOf("month").subtract("day",1).toDate();return{begin:t,end:i}}}]},i.prototype.type="RangeCalendar",i.prototype.initOptions=function(e){var t=this.now,n={begin:t,end:t},a={range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},rawValue:n,view:Y.clone(n),value:this.convertToParam(n),shownShortCut:"昨天,最近7天,上周,本月,上个月,上个季度"};if(b.extend(a,i.defaultProperties),L.extractValueFromInput(this,e),e.value)a.rawValue=this.convertToRaw(a.value),a.view={begin:a.rawValue.begin,end:a.rawValue.end},a.miniMode=null;else if(e.rawValue)a.miniMode=null;else if(!e.rawValue&&null!=e.miniMode){var r=a.shortCutItems[a.miniMode];if(r)a.rawValue=r.getValue.call(this,this.now),a.miniMode=parseInt(a.miniMode,10);else a.miniMode=null}if(b.extend(a,e),e.range&&"string"==typeof e.range)a.range=this.convertToRaw(a.range);if("false"===e.endlessCheck)a.endlessCheck=!1;if(a.endlessCheck){if("false"===a.isEndless)a.isEndless=!1}else if(!a.rawValue.end)a.endlessCheck=!0,a.isEndless=!0;if(a.isEndless)a.endlessCheck=!0,a.rawValue.end=null,a.view.end=null,a.view.value=this.convertToParam({begin:t,end:null});this.setProperties(a)},i.prototype.initStructure=function(){if(b.isInput(this.main))L.replaceMain(this);var e=['<div class="${className}" id="${id}"></div>','<div class="${arrow}"><span class="${iconCalendar}"></span></div>'];this.main.innerHTML=b.format(e.join("\n"),{className:this.helper.getPartClassName("text"),id:L.getId(this,"text"),arrow:this.helper.getPartClassName("arrow"),iconCalendar:this.helper.getIconClass("calendar")})},i.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"mousedown",Y.bind(this.layer.toggle,this.layer))},i.prototype.repaint=L.createRepaint(w.prototype.repaint,{name:["rawValue","range"],paint:function(e,i,n){if(n){if("string"==typeof n)n=e.convertToRaw(n);if(!n.begin)n.begin=new Date(1983,8,3);else if(!n.end)n.end=new Date(2046,10,4);e.range=n}if(i)y(e,i);if(e.layer)t(e,i)}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide()}},{name:"isEndless",paint:function(e,t){if(!e.endlessCheck)e.isEndless=!1;else{var i=e.getChild("endlessCheck");if(i)i.setChecked(t)}}}),i.prototype.setRawValue=function(e){this.setProperties({rawValue:e})},i.prototype.getRawValue=function(){return this.rawValue},i.prototype.stringifyValue=function(e){return this.convertToParam(e)||""},i.prototype.parseValue=function(e){return this.convertToRaw(e)},i.prototype.dispose=function(){if(!L.isInStage(this,"DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;w.prototype.dispose.apply(this,arguments)}},b.inherits(i,w),T.register(i),i}),define("esui/Region",["require","./Select","./lib","./controlHelper","./InputControl","./main","underscore"],function(require){function e(){L.apply(this,arguments)}function t(e){for(var t=e.regionData,i=t.length,n=[],a=0;i>a;a++)n.push(l(e,t[a],1));var r='<input type="hidden" id="${inputId}" name="${name}" />';n.push(b.format(r,{inputId:w.getId(e,"param-value"),name:e.name})),e.main.innerHTML=n.join("")}function i(e,t,n){t.call(n,e),T.each(e.children,function(e){i(e,t,n)})}function n(e,t){var n=e.regionDataIndex,s=[];T.each(t,function(e){var t=n[e];if(t)i(t,function(e){s.push(e.id)})});var o={};T.each(s,function(e){o[e]=1}),T.each(e.regionDataIndex,function(t,i){var n=o.hasOwnProperty(i),r=a(e,i);if(r)r.checked=n;else t.isSelected=n}),r(e),x(e)}function a(e,t){return b.g(w.getId(e,"item-"+t))}function r(e,t,i,n){var n=n||0;t=t||{children:e.regionData};var s=e.regionDataIndex[t.id];if(!i)e.rawValue=[];var l,d=0,u=t.id&&a(e,t.id),h=t.children,c=h instanceof Array&&h.length;if(c){for(var f=!0,p=0;c>p;p++){if(l=r(e,h[p],1,n+1))d++;f=f&&l}if(u)u.checked=f,f&&e.rawValue.push(t.id),s.isSelected=f;if(3===n)if(!f)o(e,d,c,t.id);else o(e,1,1,t.id);return f}else{if(u){if(u.checked)e.rawValue.push(t.id);return u.checked}else if(s.isSelected)e.rawValue.push(t.id);return s.isSelected}}function s(){return C.getConfig("stateClassPrefix")+"-hidden"}function o(e,t,i,n){var a=b.g(w.getId(e,"info-"+n));if(0!==t&&t!==i)b.removeClass(a,s()),a.innerHTML=t+"/"+i;else b.addClass(a,s()),a.innerHTML=""}function l(e,t,i){t.level=i;var n=[],a=t.children;if(null!=a)if(t.isSelected=!1,3===t.level){if(t.children&&t.children.length>0)e.cityCache[t.id]=d(e,t)}else for(var r=a instanceof Array&&a.length,o=0;r>o;o++)n.push(l(e,t.children[o],i+1));var u=e.helper.getPrefixClass("checkbox-custom");switch(i){case 1:return b.format(Y,{boxClass:w.getPartClasses(e,"country-box").join(" "),itemClasses:w.getPartClasses(e,"country-check").join(" "),itemWrapperId:"",itemValue:t.id,itemId:w.getId(e,"item-"+t.id),level:t.level,text:t.text,contentClass:"",content:n.join(""),checkboxCustomClass:u});case 2:return b.format(Y,{boxClass:w.getPartClasses(e,"region-box"+S++%2).join(" "),itemClasses:w.getPartClasses(e,"region-check").join(" "),itemWrapperId:"",itemValue:t.id,itemId:w.getId(e,"item-"+t.id),level:t.level,text:t.text,contentClass:w.getPartClasses(e,"province-box").join(" "),content:n.join(""),checkboxCustomClass:u});case 3:var h=b.format(k,{popLayerClass:w.getPartClasses(e,"locator").join(" "),layerBoxClass:w.getPartClasses(e,"city-box").join(" "),hiddenClass:s(),id:w.getId(e,"sub-"+t.id),infoId:w.getId(e,"info-"+t.id),innerHTML:n.join("")}),c=b.format(D,{itemClasses:w.getPartClasses(e,"text").join(" "),itemWrapperId:w.getId(e,"wrapper-"+t.id),itemValue:t.id,itemId:w.getId(e,"item-"+t.id),level:t.level,text:t.text,checkboxCustomClass:u});return b.format(P,{classes:w.getPartClasses(e,"province-item").join(" "),content:c+h});case 4:return b.format(D,{itemClasses:w.getPartClasses(e,"city").join(" "),itemWrapperId:"",itemValue:t.id,itemId:w.getId(e,"item-"+t.id),level:t.level,text:t.text,checkboxCustomClass:u})}}function d(e,t){if(3===t.level&&null!=t.children){for(var i=[],n=0;n<t.children.length;n++)t.children[n].parent=t,t.children[n].level=t.level+1,i.push(l(e,t.children[n],t.level+1));if(i.length%2===1)i.push("");for(var a=['<table border="0" cellspacing="0" cellpadding="0">'].join(""),r=["<tr>","<td>${firstItem}","</td>","<td>${secondItem}","</td>","</tr>"].join(""),s=0;s<i.length;s+=2)a+=b.format(r,{firstItem:i[s],secondItem:i[s+1]});
return a+"</table>"}return""}function u(e,t){function i(e,n){var a,r,s=e instanceof Array&&e.length;if(s)for(var a=0;s>a;a++){var r=b.clone(e[a]);r.parent=n,t.regionDataIndex[r.id]=r,i(r.children,r)}}var n=t.regionData;t.regionDataIndex={},i(n,{children:n})}function h(e){if(!this.disabled&&!this.readOnly)for(var t=e.target;t&&t!==document.body;){var i=!1;if("input"===t.nodeName.toLowerCase())i=!0;else if("label"===t.nodeName.toLowerCase()){var n=b.getAttribute(t,"for");t=b.g(n),i=!0}if(i)return c(this,t),void this.fire("change");t=t.parentNode}}function c(e,t,i){var n=b.getAttribute(t,"data-optionId"),s=t.checked,l=e.regionDataIndex[n];l.isSelected=s;var d=l.children,u=d instanceof Array&&d.length;if(u)T.each(d,function(t){var i=a(e,t.id);if(i)i.checked=s,c(e,i,1);else e.regionDataIndex[t.id].isSelected=s});else if(0===u)if(3===b.getAttribute(t,"level")){var h=0,f=e.regionDataIndex[n].parent.children;T.each(f,function(e){if(a(e.id).checked===!0)h++}),o(e,h,f.length,e.regionDataIndex[n].parent.id)}if(!i)r(e),x(e)}function f(e,t){if(!this.disabled&&!this.readOnly){var i=t.target,n=w.getPartClasses(this,"text"),a=w.getPartClasses(this,"city-box"),r=p;if("hide"===e)r=m;for(var s;i&&i!==document.body;){var o;if(b.hasClass(i,n[0]))s=b.getAttribute(i.firstChild.firstChild,"value"),o=i.nextSibling.firstChild;else if(b.hasClass(i,a[0]))o=i;if(o)return void r(this,o,s);i=i.parentNode}}}function p(e,t,i){if(i){var a=e.cityCache[i];if(!a)return;t.innerHTML=a,n(e,e.rawValue)}b.removeClass(t,s());var r=t.parentNode.previousSibling;w.addPartClasses(e,"text-over",r)}function m(e,t){b.addClass(t,s());var i=t.parentNode.previousSibling;w.removePartClasses(e,"text-over",i)}function g(e,t){function i(e){var t=e.children,a=!!t;if(e.id)n.push({text:e.text,value:e.id,disabled:a});if(a)for(var r=t.length,s=0,r=t.length;r>s;s++)i(t[s])}var n=[];i({children:t.regionData}),t.singleRegionData=n}function v(e){var t='<div data-ui="type:Select;childName:regionSel;id:regionSel;"></div><input type="hidden" id="${inputId}" name="${name}" />';e.main.innerHTML=b.format(t,{inputId:w.getId(e,"param-value"),name:e.name}),e.initChildren(e.main);var i=e.getChild("regionSel");i.setProperties({datasource:e.singleRegionData}),i.on("change",b.bind(y,null,e,i))}function y(e,t){var i=parseInt(t.getValue(),10);e.rawValue=i,x(e)}function _(e,t){if("multi"===e.mode)for(var i=e.main.getElementsByTagName("input"),n=0,a=i.length;a>n;n++){var r=i[n];r.disabled=t}else{var s=e.getChild("regionSel");s.setProperties({disabled:t})}}function x(e){var t=b.g(w.getId(e,"param-value")),i=e.rawValue;if(b.isArray(i))t.value=i.join(",");else t.value=i}function M(e,t){var i=e.regionDataIndex,n=[];if(i[t.id]&&i[t.id].isSelected)n.push(t.id);else T.each(t.children,function(t){var a=i[t.id];n.push.apply(n,M(e,a))});return n}require("./Select");var b=require("./lib"),w=require("./controlHelper"),L=require("./InputControl"),C=require("./main"),T=require("underscore"),D=['<div class="${itemClasses}" id="${itemWrapperId}">','<div class="${checkboxCustomClass}">','<input type="checkbox" value="${itemValue}" id="${itemId}"',' data-optionId="${itemValue}" data-level="${level}" />','<label for="${itemId}" title="${text}">${text}</label>',"</div>","</div>"].join(""),Y=['<div class="${boxClass}">',D,'<div class="${contentClass}">${content}</div>',"</div>"].join(""),k=['<div class="${popLayerClass}">','<div class="${hiddenClass} ${layerBoxClass}" id="${id}">',"${innerHTML}</div>",'<b class="${hiddenClass}" id="${infoId}"></b>',"</div>"].join(""),P='<div class="${classes}">${content}</div>',S=0;return e.prototype={type:"Region",initOptions:function(t){var i={regionData:b.clone(e.REGION_LIST),mode:"multi",pureSelect:!1,rawValue:[]};if(w.extractValueFromInput(this,t),b.extend(i,t),t.value)i.rawValue=i.value.split(",");if("false"===t.pureSelect)i.pureSelect=!1;if("multi"===i.mode)u(this,i),this.cityCache={};else i.rawValue="",g(this,i);this.setProperties(i)},initStructure:function(){if(b.isInput(this.main))w.replaceMain(this);if("multi"===this.mode)t(this);else v(this),b.addClass(this.main,w.getPartClasses(this,"single").join(" "))},initEvents:function(){if("multi"===this.mode)this.helper.addDOMEvent(this.main,"click",h),this.helper.addDOMEvent(this.main,"mouseover",b.curry(f,"show")),this.helper.addDOMEvent(this.main,"mouseout",b.curry(f,"hide"));else{var e=this.getChild("regionSel");e.on("change",b.bind(y,null,this,e))}},repaint:w.createRepaint(L.prototype.repaint,{name:"rawValue",paint:function(e,t){if("multi"===e.mode)n(e,t);else{var i=e.getChild("regionSel");i.setProperties({value:t})}}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=!0;if(t||i)n=!1;if(_(e,!n),!t&&i){var a=b.g(w.getId(e,"param-value"));a.disabled=!1}}}),setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){if("single"===this.mode)return this.getChild("regionSel").getValue();if(this.pureSelect){var e={id:"-100",children:this.regionData},t=M(this,e);return t}return this.rawValue},stringifyValue:function(e){if("multi"===this.mode)return e.join(",");else return e},parseValue:function(e){return e.split(",")},checkRegion:function(e){var t=a(this,e);if(t)t.checked=!0,c(this,t);else{var i=this.regionDataIndex[e];if(i)i.isSelected=!0,r(this),x(this)}}},e.REGION_LIST=[{id:"90",text:"中国",children:[{id:"80",text:"华北地区",children:[{id:"1",text:"北京",children:[{id:"742",text:"昌平区"},{id:"743",text:"朝阳区"},{id:"744",text:"崇文区"},{id:"745",text:"大兴区"},{id:"746",text:"东城区"},{id:"747",text:"房山区"},{id:"748",text:"丰台区"},{id:"749",text:"海淀区"},{id:"750",text:"怀柔区"},{id:"751",text:"门头沟区"},{id:"752",text:"密云县"},{id:"753",text:"平谷区"},{id:"754",text:"石景山区"},{id:"755",text:"顺义区"},{id:"756",text:"通州区"},{id:"757",text:"西城区"},{id:"758",text:"宣武区"},{id:"759",text:"延庆县"}]},{id:"3",text:"天津",children:[{id:"760",text:"宝坻区"},{id:"761",text:"北辰区"},{id:"763",text:"东丽区"},{id:"765",text:"河北区"},{id:"766",text:"河东区"},{id:"767",text:"和平区"},{id:"768",text:"河西区"},{id:"769",text:"红桥区"},{id:"770",text:"蓟县"},{id:"771",text:"津南区"},{id:"772",text:"静海县"},{id:"773",text:"南开区"},{id:"774",text:"宁河县"},{id:"776",text:"武清区"},{id:"777",text:"西青区"},{id:"900",text:"滨海新区"}]},{id:"15",text:"河北",children:[{id:"226",text:"保定市"},{id:"228",text:"沧州市"},{id:"229",text:"承德市"},{id:"230",text:"邯郸市"},{id:"231",text:"衡水市"},{id:"234",text:"廊坊市"},{id:"236",text:"秦皇岛市"},{id:"239",text:"石家庄市"},{id:"240",text:"唐山市"},{id:"241",text:"邢台市"},{id:"242",text:"张家口市"}]},{id:"24",text:"内蒙古",children:[{id:"428",text:"阿拉善盟"},{id:"429",text:"巴彦淖尔市"},{id:"430",text:"包头市"},{id:"431",text:"赤峰市"},{id:"432",text:"鄂尔多斯市"},{id:"434",text:"呼和浩特市"},{id:"435",text:"呼伦贝尔市"},{id:"437",text:"通辽市"},{id:"438",text:"乌海市"},{id:"439",text:"乌兰察布市"},{id:"442",text:"锡林郭勒盟"},{id:"444",text:"兴安盟"}]},{id:"28",text:"山西",children:[{id:"486",text:"大同市"},{id:"491",text:"晋城市"},{id:"492",text:"晋中市"},{id:"493",text:"临汾市"},{id:"494",text:"吕梁市"},{id:"495",text:"朔州市"},{id:"496",text:"太原市"},{id:"497",text:"忻州市"},{id:"498",text:"阳泉市"},{id:"501",text:"运城市"},{id:"502",text:"长治市"}]}]},{id:"81",text:"东北地区",children:[{id:"17",text:"黑龙江",children:[{id:"272",text:"大庆市"},{id:"273",text:"大兴安岭地区"},{id:"276",text:"哈尔滨市"},{id:"278",text:"鹤岗市"},{id:"279",text:"黑河市"},{id:"282",text:"鸡西市"},{id:"284",text:"佳木斯市"},{id:"287",text:"牡丹江市"},{id:"289",text:"七台河市"},{id:"290",text:"齐齐哈尔市"},{id:"291",text:"双鸭山市"},{id:"293",text:"绥化市"},{id:"298",text:"伊春市"}]},{id:"20",text:"吉林",children:[{id:"345",text:"白城市"},{id:"346",text:"白山市"},{id:"351",text:"吉林市"},{id:"352",text:"辽源市"},{id:"355",text:"四平市"},{id:"356",text:"松原市"},{id:"358",text:"通化市"},{id:"359",text:"延边朝鲜族自治州"},{id:"361",text:"长春市"}]},{id:"23",text:"辽宁",children:[{id:"413",text:"鞍山市"},{id:"414",text:"本溪市"},{id:"415",text:"朝阳市"},{id:"416",text:"大连市"},{id:"417",text:"丹东市"},{id:"418",text:"抚顺市"},{id:"419",text:"阜新市"},{id:"421",text:"葫芦岛市"},{id:"422",text:"锦州市"},{id:"423",text:"辽阳市"},{id:"424",text:"盘锦市"},{id:"425",text:"沈阳市"},{id:"426",text:"铁岭市"},{id:"427",text:"营口市"}]}]},{id:"82",text:"华东地区",children:[{id:"2",text:"上海",children:[{id:"818",text:"宝山区"},{id:"819",text:"崇明县"},{id:"820",text:"奉贤区"},{id:"821",text:"虹口区"},{id:"822",text:"黄浦区"},{id:"823",text:"嘉定区"},{id:"824",text:"金山区"},{id:"825",text:"静安区"},{id:"826",text:"卢湾区"},{id:"827",text:"闵行区"},{id:"830",text:"浦东新区"},{id:"831",text:"普陀区"},{id:"832",text:"青浦区"},{id:"833",text:"松江区"},{id:"834",text:"徐汇区"},{id:"835",text:"杨浦区"},{id:"836",text:"闸北区"},{id:"837",text:"长宁区"}]},{id:"8",text:"安徽",children:[{id:"101",text:"安庆市"},{id:"102",text:"蚌埠市"},{id:"103",text:"亳州市"},{id:"104",text:"巢湖市"},{id:"105",text:"池州市"},{id:"106",text:"滁州市"},{id:"107",text:"阜阳市"},{id:"110",text:"合肥市"},{id:"111",text:"淮北市"},{id:"112",text:"淮南市"},{id:"113",text:"黄山市"},{id:"115",text:"六安市"},{id:"116",text:"马鞍山市"},{id:"118",text:"铜陵市"},{id:"119",text:"芜湖市"},{id:"120",text:"宿州市"},{id:"121",text:"宣城市"}]},{id:"9",text:"福建",children:[{id:"124",text:"福州市"},{id:"126",text:"龙岩市"},{id:"127",text:"南平市"},{id:"128",text:"宁德市"},{id:"129",text:"莆田市"},{id:"130",text:"泉州市"},{id:"131",text:"三明市"},{id:"132",text:"厦门市"},{id:"138",text:"漳州市"}]},{id:"21",text:"江苏",children:[{id:"363",text:"常州市"},{id:"367",text:"淮安市"},{id:"375",text:"连云港市"},{id:"376",text:"南京市"},{id:"377",text:"南通市"},{id:"381",text:"苏州市"},{id:"383",text:"泰州市"},{id:"386",text:"无锡市"},{id:"391",text:"宿迁市"},{id:"392",text:"徐州市"},{id:"393",text:"盐城市"},{id:"395",text:"扬州市"},{id:"399",text:"镇江市"}]},{id:"22",text:"江西",children:[{id:"401",text:"抚州市"},{id:"402",text:"赣州市"},{id:"403",text:"吉安市"},{id:"404",text:"景德镇市"},{id:"406",text:"九江市"},{id:"407",text:"南昌市"},{id:"408",text:"萍乡市"},{id:"409",text:"上饶市"},{id:"410",text:"新余市"},{id:"411",text:"宜春市"},{id:"412",text:"鹰潭市"}]},{id:"27",text:"山东",children:[{id:"461",text:"滨州市"},{id:"462",text:"德州市"},{id:"463",text:"东营市"},{id:"466",text:"菏泽市"},{id:"467",text:"济南市"},{id:"468",text:"济宁市"},{id:"470",text:"莱芜市"},{id:"472",text:"聊城市"},{id:"473",text:"临沂市"},{id:"474",text:"青岛市"},{id:"476",text:"日照市"},{id:"477",text:"泰安市"},{id:"479",text:"威海市"},{id:"480",text:"潍坊市"},{id:"481",text:"烟台市"},{id:"482",text:"枣庄市"},{id:"485",text:"淄博市"}]},{id:"34",text:"浙江",children:[{id:"604",text:"杭州市"},{id:"605",text:"湖州市"},{id:"606",text:"嘉兴市"},{id:"608",text:"金华市"},{id:"611",text:"丽水市"},{id:"615",text:"宁波市"},{id:"617",text:"衢州市"},{id:"619",text:"绍兴市"},{id:"621",text:"台州市"},{id:"624",text:"温州市"},{id:"630",text:"舟山市"}]}]},{id:"83",text:"华中地区",children:[{id:"16",text:"河南",children:[{id:"243",text:"安阳市"},{id:"246",text:"鹤壁市"},{id:"249",text:"焦作市"},{id:"250",text:"开封市"},{id:"252",text:"漯河市"},{id:"253",text:"洛阳市"},{id:"254",text:"南阳市"},{id:"255",text:"平顶山市"},{id:"256",text:"濮阳市"},{id:"257",text:"三门峡市"},{id:"258",text:"商丘市"},{id:"261",text:"新乡市"},{id:"262",text:"信阳市"},{id:"263",text:"许昌市"},{id:"266",text:"郑州市"},{id:"267",text:"周口市"},{id:"268",text:"驻马店市"},{id:"901",text:"济源市"}]},{id:"18",text:"湖北",children:[{id:"304",text:"鄂州市"},{id:"305",text:"恩施市"},{id:"307",text:"黄冈市"},{id:"308",text:"黄石市"},{id:"309",text:"荆门市"},{id:"310",text:"荆州市"},{id:"311",text:"潜江市"},{id:"312",text:"神农架林区"},{id:"313",text:"十堰市"},{id:"314",text:"随州市"},{id:"315",text:"天门市"},{id:"317",text:"武汉"},{id:"319",text:"仙桃市"},{id:"320",text:"咸宁市"},{id:"321",text:"襄樊市"},{id:"323",text:"孝感市"},{id:"324",text:"宜昌市"}]},{id:"19",text:"湖南",children:[{id:"328",text:"常德市"},{id:"329",text:"郴州市"},{id:"330",text:"衡阳市"},{id:"331",text:"怀化市"},{id:"334",text:"娄底市"},{id:"335",text:"邵阳市"},{id:"337",text:"湘潭市"},{id:"338",text:"湘西土家族苗族自治州"},{id:"339",text:"益阳市"},{id:"340",text:"永州市"},{id:"341",text:"岳阳市"},{id:"342",text:"张家界市"},{id:"343",text:"长沙市"},{id:"344",text:"株洲市"}]}]},{id:"84",text:"华南地区",children:[{id:"11",text:"广东",children:[{id:"157",text:"潮州市"},{id:"158",text:"东莞市"},{id:"160",text:"佛山市"},{id:"162",text:"广州市"},{id:"163",text:"河源市"},{id:"164",text:"惠州市"},{id:"166",text:"江门市"},{id:"167",text:"揭阳市"},{id:"169",text:"茂名市"},{id:"170",text:"梅州市"},{id:"172",text:"清远市"},{id:"173",text:"汕头市"},{id:"174",text:"汕尾市"},{id:"175",text:"韶关市"},{id:"176",text:"深圳市"},{id:"180",text:"阳江市"},{id:"182",text:"云浮市"},{id:"184",text:"湛江市"},{id:"185",text:"肇庆市"},{id:"186",text:"中山市"},{id:"187",text:"珠海市"}]},{id:"12",text:"广西",children:[{id:"188",text:"百色市"},{id:"189",text:"北海市"},{id:"191",text:"防城港市"},{id:"193",text:"贵港市"},{id:"194",text:"桂林市"},{id:"195",text:"河池市"},{id:"196",text:"贺州市"},{id:"197",text:"来宾市"},{id:"198",text:"柳州市"},{id:"199",text:"南宁市"},{id:"200",text:"钦州市"},{id:"201",text:"梧州市"},{id:"203",text:"玉林市"}]},{id:"14",text:"海南",children:[{id:"218",text:"儋州市"},{id:"219",text:"东方市"},{id:"220",text:"海口市"},{id:"221",text:"琼海市"},{id:"223",text:"三亚市"},{id:"225",text:"文昌市"},{id:"867",text:"五指山"},{id:"868",text:"万宁"}]}]},{id:"85",text:"西南地区",children:[{id:"4",text:"重庆",children:[{id:"778",text:"巴南区"},{id:"779",text:"北碚区"},{id:"780",text:"璧山县"},{id:"781",text:"城口县"},{id:"782",text:"大渡口区"},{id:"783",text:"大足县"},{id:"784",text:"垫江县"},{id:"785",text:"丰都县"},{id:"786",text:"奉节县"},{id:"787",text:"涪陵区"},{id:"788",text:"合川区"},{id:"789",text:"江北区"},{id:"790",text:"江津区"},{id:"791",text:"九龙坡区"},{id:"792",text:"开县"},{id:"793",text:"梁平县"},{id:"794",text:"南岸区"},{id:"795",text:"南川区"},{id:"796",text:"彭水县"},{id:"797",text:"綦江县"},{id:"798",text:"黔江区"},{id:"799",text:"荣昌县"},{id:"800",text:"沙坪坝区"},{id:"801",text:"石柱县"},{id:"802",text:"双桥区"},{id:"803",text:"铜梁县"},{id:"804",text:"潼南县"},{id:"805",text:"万盛区"},{id:"806",text:"万州区"},{id:"807",text:"巫山县"},{id:"808",text:"巫溪县"},{id:"809",text:"武隆县"},{id:"810",text:"秀山县"},{id:"811",text:"永川区"},{id:"812",text:"酉阳县"},{id:"813",text:"渝北区"},{id:"814",text:"渝中区"},{id:"815",text:"云阳县"},{id:"816",text:"长寿区"},{id:"817",text:"忠县"}]},{id:"13",text:"贵州",children:[{id:"204",text:"安顺市"},{id:"205",text:"毕节市"},{id:"208",text:"贵阳市"},{id:"210",text:"六盘水市"},{id:"211",text:"黔东南苗族侗族自治州"},{id:"212",text:"黔南布依族苗族自治州"},{id:"213",text:"黔西南布依族苗族自治州"},{id:"215",text:"铜仁市"},{id:"217",text:"遵义市"}]},{id:"30",text:"四川",children:[{id:"516",text:"阿坝藏族羌族自治州"},{id:"517",text:"巴中市"},{id:"518",text:"成都市"},{id:"519",text:"达州市"},{id:"520",text:"德阳市"},{id:"523",text:"甘孜藏族自治州"},{id:"524",text:"广安市"},{id:"526",text:"广元市"},{id:"528",text:"乐山市"},{id:"529",text:"凉山彝族自治州"},{id:"530",text:"泸州市"},{id:"531",text:"眉山市"},{id:"532",text:"绵阳市"},{id:"534",text:"南充市"},{id:"535",text:"内江市"},{id:"536",text:"攀枝花市"},{id:"538",text:"遂宁市"},{id:"540",text:"雅安市"},{id:"541",text:"宜宾市"},{id:"542",text:"资阳市"},{id:"543",text:"自贡市"}]},{id:"31",text:"西藏",children:[{id:"546",text:"拉萨市"},{id:"547",text:"林芝地区"},{id:"548",text:"那曲地区"},{id:"549",text:"日喀则地区"}]},{id:"33",text:"云南",children:[{id:"578",text:"保山市"},{id:"579",text:"楚雄市"},{id:"580",text:"大理市"},{id:"581",text:"德宏傣族景颇族自治州"},{id:"585",text:"红河哈尼族彝族自治州"},{id:"587",text:"昆明市"},{id:"589",text:"丽江市"},{id:"590",text:"临沧市"},{id:"593",text:"普洱市"},{id:"594",text:"曲靖市"},{id:"595",text:"文山市"},{id:"597",text:"玉溪市"},{id:"598",text:"昭通市"}]}]},{id:"86",text:"西北地区",children:[{id:"10",text:"甘肃",children:[{id:"139",text:"白银市"},{id:"140",text:"定西市"},{id:"144",text:"嘉峪关市"},{id:"145",text:"金昌市"},{id:"146",text:"酒泉市"},{id:"147",text:"兰州市"},{id:"148",text:"临夏回族自治州"},{id:"150",text:"陇南市"},{id:"151",text:"平凉市"},{id:"152",text:"庆阳市"},{id:"153",text:"天水市"},{id:"154",text:"武威市"},{id:"156",text:"张掖市"}]},{id:"25",text:"宁夏",children:[{id:"446",text:"固原市"},{id:"447",text:"石嘴山市"},{id:"448",text:"吴忠市"},{id:"449",text:"银川市"},{id:"450",text:"中卫市"}]},{id:"26",text:"青海",children:[{id:"454",text:"海东地区"},{id:"456",text:"海西蒙古族藏族自治州"},{id:"458",text:"西宁市"},{id:"459",text:"玉树藏族自治州"}]},{id:"29",text:"陕西",children:[{id:"503",text:"安康市"},{id:"504",text:"宝鸡市"},{id:"506",text:"汉中市"},{id:"508",text:"商洛市"},{id:"509",text:"铜川市"},{id:"510",text:"渭南市"},{id:"511",text:"西安市"},{id:"512",text:"咸阳市"},{id:"513",text:"延安市"},{id:"515",text:"榆林市"}]},{id:"32",text:"新疆",children:[{id:"551",text:"阿克苏地区"},{id:"554",text:"阿勒泰市"},{id:"556",text:"巴音郭楞蒙古自治州"},{id:"557",text:"博尔塔拉蒙古自治州"},{id:"560",text:"昌吉回族自治州"},{id:"563",text:"哈密市"},{id:"564",text:"和田市"},{id:"565",text:"喀什市"},{id:"566",text:"克拉玛依市"},{id:"570",text:"石河子市"},{id:"571",text:"塔城市"},{id:"572",text:"吐鲁番市"},{id:"573",text:"乌鲁木齐市"},{id:"576",text:"伊犁市"},{id:"869",text:"克孜勒苏柯尔克孜"},{id:"870",text:"五家渠"}]}]},{id:"87",text:"港澳台",children:[{id:"5",text:"澳门"},{id:"6",text:"香港"},{id:"7",text:"台湾"}]}]},{id:"999",text:"国外"},{id:"0",text:"其他"}],b.inherits(e,L),C.register(e),e}),define("esui/RichCalendar",["require","./Button","./MonthView","./TextBox","./lib","./controlHelper","./InputControl","./Layer","./main","moment","underscore"],function(require){function e(){_.apply(this,arguments)}function t(e){for(var t=e.displayNum,n='<div id="${id}" class="${className}">${monthView}</div>',a=[],r=0;t>r;r++)a.push(g.format(n,{id:e.helper.getId("month-"+r),className:e.helper.getPartClassName("month-container"),monthView:i(e,r)}));return g.format('<div id="${id}" class="${className}">${monthViews}</div>',{id:e.helper.getId("months"),className:e.helper.getPartClassName("months"),monthViews:a.join("")})}function i(e,t){var i='<div data-ui-type="MonthView" data-ui-child-name="${calName}" data-ui-mode="multi"></div>';return g.format(i,{calName:"monthView"+t})}function n(){y.apply(this,arguments),this.layer=new e(this)}function a(e,t){for(var i=this.getRawValue(),n=e.displayNum,a=0;n>a;a++)if(a!==t){var r=e.getChild("monthView"+a);r.setRawValueWithoutFireChange(i)}e.rawValue=i,l(e,i)}function r(e,t){for(var i=e.displayNum,n=new Date(this.year,this.month,1),a=0;i>a;a++)if(a!==t){var s=e.getChild("monthView"+a);s.un("changemonth"),s.un("changeyear");var o,l=t-a;if(l>0)o=M(n).subtract("month",l);else o=M(n).add("month",-l);s.setProperties({month:o.month()+1,year:o.year()}),s.on("changeyear",g.curry(r,e,a)),s.on("changemonth",g.curry(r,e,a))}}function s(e,t){for(var i=e.displayNum,n=e.startMonth,a=e.startYear,r=0;i>r;r++){var s,l,d,u=e.range.begin,h=e.range.end,c=u.getFullYear(),f=u.getMonth(),p=h.getFullYear(),m=h.getMonth();if(0===r)l=new Date(p,m-i+2,0),s={begin:e.range.begin,end:l};else if(r===i-1)d=new Date(c,f+i-1,1),s={begin:d,end:e.range.end};else d=new Date(c,f+r,1),l=new Date(p,m-i-r+2,0),s={begin:d,end:l};var g={year:a,month:n+r,rawValue:e.rawValue,range:e.range,viewRange:s};o(e,g,r,t)}}function o(e,t,i,n){var s=e.getChild("monthView"+i);if(s.setProperties(t),n===!0)s.on("change",g.curry(a,e,i)),s.on("changeyear",g.curry(r,e,i)),s.on("changemonth",g.curry(r,e,i))}function l(e,t){var i=v.getId(e,"param-value");g.g(i).value=e.stringifyValue(t);var n=e.getChild("textInput"),a=f(e,t);n.setProperties({rawValue:a}),d(e,t),e.fire("change")}function d(e,t){var i=g.g(v.getId(e,"total-num"));i.innerHTML=t.length}function u(e){e.set("rawValue",[])}function h(e){var t=e.split(",");if(1===t.length)t.push("2046-11-04");else if(""===t[0])t[0]="1983-09-03";else if(""===t[1])t[1]="2046-11-04";return{begin:c(t[0]),end:c(t[1])}}function c(e){function t(e){var t=e.split("-");if(t)return new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10));else return null}if(!e)return null;e+="";var i=e.split(" "),n=t(i[0]);if(i[1]){var a=i[1].split(":");n.setHours(a[0]),n.setMinutes(a[1]),n.setSeconds(a[2])}return n}function f(e,t){for(var i=[],n=[],a=0,r=864e5,s=0;s<t.length;s++)if(0===s)i.push(g.date.format(t[s],e.paramFormat)),n.push(t[s]),a++;else if(t[s]-t[s-1]>r){if(t[s-1]-n[a-1]!==0)i.push("至"),i.push(g.date.format(t[s-1],e.paramFormat)),n.push(t[s-1]),a++;i.push("\n"),i.push(g.date.format(t[s],e.paramFormat)),n.push(t[s]),a++}else if(s===t.length-1)i.push("至"),i.push(g.date.format(t[s],e.paramFormat));else continue;return i.join("")}function p(e){for(var t=this.getValue(),i=t.replace(/\n{2,}/g,"\n").split("\n"),n=[],a={},r=0,s=i.length;s>r;r++){var o=g.trim(i[r]);if(0!==o.length&&!a[o]){a[o]=1;var l=o.split("至"),d=l[0],u=d;if(l.length>1)u=l[1];if(m(d)&&m(u))n.push(d),n.push(u)}else;}var h=n.join(",");e.rawValue=e.parseValue(h),this.setProperties({rawValue:f(e,e.rawValue)}),e.fire("change")}function m(e){var t=/^(\d{4})(-)(\d{2})\2(\d{2})$/,i=e.match(t);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4]),a=""+n.getFullYear()+i[2]+(n.getMonth()+1)+i[2]+n.getDate();return e=i[1]+i[2]+(i[3]-1+1)+i[2]+(i[4]-1+1),a===e}require("./Button"),require("./MonthView"),require("./TextBox");var g=require("./lib"),v=require("./controlHelper"),y=require("./InputControl"),_=require("./Layer"),x=require("./main"),M=require("moment"),b=require("underscore");return g.inherits(e,_),e.prototype.render=function(e){document.body.appendChild(e);var i=this.control;e.innerHTML=t(i),i.helper.initChildren(e),s(i,!0)},e.prototype.toggle=function(){var e=this.getElement();if(!e||this.control.helper.isPart(e,"layer-hidden"))s(this.control,!0),this.show();else this.hide()},n.prototype={type:"RichCalendar",initOptions:function(e){var t=new Date,i={now:t,range:{begin:new Date(1983,8,3),end:new Date(2046,10,4)},paramFormat:"YYYY-MM-DD",rawValue:[],displayNum:2,startYear:t.getFullYear(),startMonth:t.getMonth()+1};if(v.extractValueFromInput(this,e),g.extend(i,e),e.range&&"string"==typeof e.range)i.range=h(i.range);this.setProperties(i)},setProperties:function(e){if(null==e.rawValue||0===e.rawValue.length)if(e.value)e.rawValue=this.parseValue(e.value);if(e.rawValue&&e.rawValue.length){var t=e.rawValue[0];e.startYear=t.getFullYear(),e.startMonth=t.getMonth()+1}var i=y.prototype.setProperties.apply(this,arguments);return i},initStructure:function(){if(g.isInput(this.main))v.replaceMain(this);var e=['<div data-ui-type="Panel" class="${generalPanelClass}"',' data-ui-child-name="generalPanel">','<label>共<span id="${totalNumId}" ','class="${totalNumClass}"></span>天,</label>','<button data-ui-type="Button" data-ui-variants="link"',' data-ui-child-name="deleteBtn">全部删除</button>',"</div>",'<div class="${className}" id="${id}">','<textarea data-ui-type="TextBox"',' data-ui-mode="textarea"',' data-ui-width="${textBoxWidth}"',' data-ui-height="${textBoxHeight}"',' data-ui-child-name="textInput"></textarea>','<button data-ui-type="Button" data-ui-variants="link"',' data-ui-child-name="modifyBtn" type="button">','<span class="${calendarIconClass}"></span></button>',"</div>",'<input type="hidden" id="${inputId}" name="${name}"',' value="" />'],t=v.getPartClasses;this.main.innerHTML=g.format(e.join("\n"),{className:t(this,"text").join(" "),id:v.getId(this,"text"),textBoxWidth:this.textBoxWidth||200,textBoxHeight:this.textBoxHeight||100,name:this.name,inputId:v.getId(this,"param-value"),generalPanelClass:t(this,"general-info").join(" "),totalNumId:v.getId(this,"total-num"),totalNumClass:t(this,"total-num").join(" "),calendarIconClass:this.helper.getIconClass("calendar")}),this.initChildren(this.main)},initEvents:function(){var e=this.getChild("modifyBtn");e.on("click",b.bind(this.layer.toggle,this.layer));var t=this.getChild("generalPanel").getChild("deleteBtn");t.on("click",g.curry(u,this));var i=this.getChild("textInput");i.on("blur",g.curry(p,this))},repaint:v.createRepaint(y.prototype.repaint,{name:["rawValue","range"],paint:function(e,t,i){if(i){if("string"==typeof i)i=h(i);if(!i.begin)i.begin=new Date(1983,8,3);else if(!i.end)i.end=new Date(2046,10,4);e.range=i}if(t)l(e,t);if(e.helper.getPart("months"))s(e)}},{name:["disabled","hidden","readOnly"],paint:function(e,t,i,n){if(t||i||n)e.layer.hide();var a=e.getChild("generalPanel");if(t)a.helper.disableChildren(),e.helper.disableChildren();else a.helper.enableChildren(),e.helper.enableChildren()}}),setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},stringifyValue:function(e){for(var t=[],i=864e5,n=0;n<e.length;n++){if(0===n)t.push(g.date.format(e[n],this.paramFormat));else if(e[n]-e[n-1]>i)t.push(g.date.format(e[n-1],this.paramFormat)),t.push(g.date.format(e[n],this.paramFormat));if(n===e.length-1)t.push(g.date.format(e[n],this.paramFormat))}return t.join(",")},getRanges:function(){for(var e=this.rawValue,t=this.stringifyValue(e).split(","),i=[],n=0;n<t.length-1;n+=2){var a=c(t[n]),r=c(t[n+1]);i.push({begin:a,end:r})}return i},setRanges:function(e){for(var t={},i=0;i<e.length;i++){var n,a=e[i].begin,r=e[i].end;if(a&&r)if(a-r===0)t[a]=a;else for(n=a;r>=n;)t[n]=n,n=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1);else;}var s=[];for(var o in t)if(t.hasOwnProperty(o))s.push(t[o]);s.sort(function(e,t){return e-t}),this.set("rawValue",s)},parseValue:function(e){for(var t=e.split(","),i={},n=0;n<t.length-1;n+=2){var a,r=c(t[n]),s=c(t[n+1]);if(r&&s)if(r-s===0)i[r]=r;else for(a=r;s>=a;)i[a]=a,a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1);else;}var o=[];for(var l in i)if(i.hasOwnProperty(l))o.push(i[l]);return o.sort(function(e,t){return e-t}),o},dispose:function(){if(!v.isInStage(this,"DISPOSED")){if(this.layer)this.layer.dispose(),this.layer=null;y.prototype.dispose.apply(this,arguments)}}},g.inherits(n,y),x.register(n),n}),define("esui/Schedule",["require","./lib","./InputControl","./controlHelper","./main"],function(require){function e(){j.apply(this,arguments)}function t(){function e(e){for(var t=[],i=0;7>i&&i<e.length;i++){t[i]=[];for(var n=0;24>n;n++)t[i][n]=e[i]}return t}return[{text:"全周投放",tip:"周一到周日全天投放",getValue:function(){return e([1,1,1,1,1,1,1])}},{text:"周一到周五投放",tip:"周一到周五全天投放",getValue:function(){return e([1,1,1,1,1,0,0])}},{text:"周末投放",tip:"周六、周日全天投放",getValue:function(){return e([0,0,0,0,0,1,1])}}]}function i(){for(var e=[],t=0;7>t;t++){var i=[];e.push(i);for(var n=0;24>n;n++)i.push(0)}return e}function n(e,t){return V.getPartClasses(e,t).join(" ")}function a(e,t){return V.getId(e,t)}function r(e){var t=e,i=[],a='<span class="${clazz}" data-item="${index}" >${text}</span>',r=n(t,"shortcut-text-item");i.push('<span class="'+r+'">快速设定：</span>');for(var s=t.shortcut,o=n(t,"shortcut-item"),l=0,d=s.length;d>l;l++){var u=s[l];i.push(H.format(a,{clazz:o,text:u.text,index:l}))}return i.join("")}function s(e){H.g(a(e,"body")).innerHTML=""+o(e)+l(e)+d(e)}function o(e){var t=e,i=[],r=n(t,"time-line"),s=r+"-inner",o=a("body-head");i.push('<div class="',r,'" id="',o+'">'),i.push('<div class="'+s+'">');for(var l=n(t,"time-head"),d=0;24>=d;d+=2)i.push('<div class="',l,'" data-time="',d,'" ','id="',a(t,"time-head"+d),'">',d,"</div>");return i.push("</div>"),i.push("</div>"),i.join("")}function l(e){var t=e,i=[],r=n(t,"day-head"),s=a(t,"day-head");i.push('<div id="',s,'" class="',r,'">');for(var o=n(t,"day"),l=t.helper.getPrefixClass("checkbox-custom"),d='<div class="${dayClass}"><div class="${customCheckClass}"><input type="checkbox" id="${dayId}" value="${value}"><label for="${dayId}">${dayWord}</label></div></div>',u=t.dayTexts,h=0;7>h;h++)i.push(H.format(d,{dayWord:u[h],dayId:a(t,"line-state"+h),value:h,dayClass:o,customCheckClass:l}));return i.push("</div>"),i.join("")}function d(e){var t=e,i=[],r='<div class="${timeClass}" id="${itemId}" data-day="${dayIndex}" data-time-item="1" data-time="${timeIndex}"></div>',s=n(t,"time-body"),o=a(t,"time-body");i.push('<div id="',o,'" class="',s,'">');for(var l=n(t,"line"),d=0;7>d;d++){var u=a(t,"line"+d);i.push('<div class="',l,'" id="',u,'">');for(var h=0;24>h;h++){var c=a(t,"time_"+d+"_"+h);i.push(H.format(r,{itemId:c,timeClass:n(t,"time"),dayIndex:d,timeIndex:h}))}i.push("</div>")}return i.push("</div>"),i.join("")}function u(e,t){for(var i=e,n=V.getPartClasses(i,"time-selected"),r=V.getPartClasses(i,"time-hover"),s=0;7>s;s++){var o=[],l=H.g(a(i,"line"+s));f(e,l);for(var d=0;24>d;d++){var u=H.g(a(i,"time_"+s+"_"+d)),c=t[s][d];if(c)H.addClasses(u,n);else H.removeClasses(u,n);H.removeClasses(u,r),o.push(c)}h(i,o,l,s)}}function h(e,t,i,r){var s=e,o=s.slotSize,l=r,d=H.g(a(s,"line-state"+l));d.checked=!1;for(var u,h=/1{1,}/g,f=t.join(""),p=n(s,"continue-covertimes"),m='<div class="${coverClass}"><strong>${text}</strong></div>';null!=(u=h.exec(f));){var g=u[0].length,v=u.index,y=v+g,_=document.createElement("aside"),x=";width:"+g*o+"px;top:0;left:"+v*o+"px;";if(d.checked=24===g?!0:!1,_.setAttribute("data-start-time",v),_.setAttribute("data-end-time",y),_.setAttribute("data-day",l),_.className=p,_.style.cssText+=x,g>2)_.innerHTML=H.format(m,{start:v,end:y,text:24===g?"全天投放":v+":00-"+y+":00",coverClass:n(s,"covertimes-tip")});i.appendChild(_),V.addDOMEvent(s,_,"mouseover",H.curry(c,_))}}function c(e){e.style.display="none"}function f(e,t){for(var i=t.getElementsByTagName("aside"),n=i.length;n;){var a=i[0];if(null!=a.getAttribute("data-day"))V.clearDOMEvents(e,a),t.removeChild(a);n--}}function p(e,t,i,r){var s=e;t=t||a(s,"tip");var o=H.g(t);if(o)o.style.top=i.y+"px",o.style.left=i.x+"px",o.innerHTML=r;else{var l="font-size:"+H.getComputedStyle(s.main,"fontSize")+";position:absolute;top:"+i.y+"px;left:"+i.x+"px;display:none;",d=n(s,"shortcut-item-tip");o=document.createElement("div"),o.style.cssText=l,o.id=t,o.className=d,o.innerHTML=r,document.body.appendChild(o),s.followTip[t]=o}return s.tipElementTime=setTimeout(function(){o.style.display="block"},100),o}function m(e,t){clearTimeout(e.tipElementTime);var i=H.g(t);i&&(i.style.display="none")}function g(e){var t=H.event.getTarget(e);if("input"===t.nodeName.toLowerCase()){for(var i=this,n=t,a=parseInt(n.value,10),r=n.checked,s=I(i.rawValue),o=s[a],l=0,d=o.length;d>l;l++)o[l]=r?1:0;i.setRawValue(s)}}function v(e){var t=H.event.getTarget(e);if(t&&H.hasAttribute(t,"data-item")){var i=t.getAttribute("data-item"),n=this.shortcut[i].getValue;"function"==typeof n&&n.call(this);var a;if("function"==typeof n)a=n.call(this);else a=n;this.setRawValue(a)}}function y(e){var t=H.event.getTarget(e);if(t&&t.getAttribute("data-item")){var i=t,n=this;H.event.getMousePosition(e);var r={};r.y=e.pageY+20,r.x=e.pageX+10;var s=i,o=s.getAttribute("data-item"),l=a(n,"shortcut-item")+o;setTimeout(function(){var e=H.g(l);if(e)e.style.top=r.y+"px",e.style.left=r.x+"px"},0)}}function _(e,t){var i=H.event.getTarget(t);if(i&&i.getAttribute("data-item")){var n=i;H.event.getMousePosition(t);var r={};r.y=t.pageY+20,r.x=t.pageX+10;var s=this,o=n,l=o.getAttribute("data-item"),d=a(s,"shortcut-item")+l,u=V.getPartClasses(s,"shortcut-item-hover");if(e){H.addClasses(o,u);var h=s.shortcut[l].tip;p(s,d,r,h)}else H.removeClasses(o,u),m(s,d)}}function x(e){var t=H.event.getTarget(e);if(t&&t.getAttribute("data-time-item")){var i=t;H.addClasses(i,V.getPartClasses(this,"time-hover")),H.event.getMousePosition(e);var r={};r.y=e.pageY+20,r.x=e.pageX+10;var s=this,o=parseInt(i.getAttribute("data-time"),10),l=parseInt(i.getAttribute("data-day"),10),d=H.format(F,{time:"<strong>"+o+":00</strong>&nbsp;—&nbsp;<strong>"+(o+1)+":00</strong>",text:"点击/拖动鼠标选择",timeId:a(s,"timeitem-tip-head"),textId:a(s,"timeitem-tip-body"),timeClass:n(s,"timeitem-tip-head"),textClass:n(s,"timeitem-tip-body")}),u=a(s,"timeitem-tip");p(s,u,r,d),M.call(this,l,o)}}function M(e,t){for(var i=H.g(a(this,"time-body")),n=i.getElementsByTagName("aside"),r=0,s=n.length;s>r;r++){var o=n[r],l=parseInt(o.getAttribute("data-start-time"),10),d=parseInt(o.getAttribute("data-end-time"),10),u=parseInt(o.getAttribute("data-day"),10);if(t>=l&&d>t&&e===u)o.style.display="none";else o.style.display="block"}}function b(e){var t=H.event.getTarget(e);if(t&&t.getAttribute("data-time-item"))M.call(this,0,0),H.removeClasses(t,V.getPartClasses(this,"time-hover")),m(this,a(this,"timeitem-tip"))}function w(e){var t=this,i=document;$=H.bind(L,t),A=H.bind(C,t),H.on(i,"mousemove",$),H.on(i,"mouseup",A),H.event.getMousePosition(e),this.dragStartPos={x:e.pageX,y:e.pageY};var n=H.g(a(t,"time-body"));t.dragRange=[];var r=H.getOffset(n).top,s=H.getOffset(n).left;t.dragRange.push(r),t.dragRange.push(s+n.offsetWidth),t.dragRange.push(r+n.offsetHeight),t.dragRange.push(s),k(n);var o=D(this,{x:e.pageX,y:e.pageY}),l=a(t,"timeitem-tip");H.g(l)&&(H.g(l).style.display="none"),Y(this,o)}function L(e){H.event.getMousePosition(e);var t=D(this,{x:e.pageX,y:e.pageY});Y(this,t)}function C(e){var t=this;P(H.g(a(t,"time-body")));var i=H.g(a(t,"follow-item"));i.style.display="none",H.event.getMousePosition(e);var n=D(t,{x:e.pageX,y:e.pageY});setTimeout(function(){T(t,n)},10);var r=document;H.un(r,"mousemove",$),H.un(r,"mouseup",A)}function T(e,t){for(var i=e,n=t.startcell,a=t.endcell,r=Math.min(n.x,a.x),s=Math.min(n.y,a.y),o=Math.max(n.x,a.x),l=Math.max(n.y,a.y),d=I(i.rawValue),u=s;l>=u;u++)for(var h=r;o>=h;h++)if(d[u][h])d[u][h]=0;
else d[u][h]=1;i.setRawValue(d)}function D(e,t){var i=e,n=i.dragRange,a=i.dragStartPos,r={},s=i.slotSize;if(t.x<=n[1]&&t.x>=n[3])r.x=t.x;else r.x=t.x-a.x<0?n[3]:n[1];if(t.y<=n[2]&&t.y>=n[0])r.y=t.y;else r.y=t.y-a.y<0?n[0]:n[2];var o={startcell:{},endcell:{}};if(o.startcell.x=Math.floor((a.x-i.dragRange[3])/s),o.startcell.y=Math.floor((a.y-i.dragRange[0])/s),o.endcell.x=Math.floor((r.x-i.dragRange[3])/s),o.endcell.y=Math.floor((r.y-i.dragRange[0])/s),o.endcell.x>=23)o.endcell.x=23;if(o.endcell.y>=6)o.endcell.y=6;return o}function Y(e,t){var i=e,r=e.slotSize,s=a(e,"follow-item"),o=H.g(s);if(!o)o=document.createElement("div"),o.className=n(i,"follow-item"),o.id=s,H.g(a(i,"time-body")).appendChild(o);var l,d,u,h,c=t.startcell,f=t.endcell,p=c.x,m=c.y,g=f.x,v=f.y;if(v>=m)l=m*r,u=(v-m+1)*r-2;else l=v*r,u=(m-v+1)*r-2;if(g>=p)d=p*r,h=(g-p+1)*r-2;else d=g*r,h=(p-g+1)*r-2;var y=";display:block;;width:"+h+"px;height:"+u+"px;top:"+l+"px;left:"+d+"px";o.style.cssText+=y}function k(e){var t=document;if(H.on(t,"selectstart",S),e.setCapture)e.setCapture();else if(window.captureEvents)window.captureEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP);if(document.selection)document.selection.empty&&document.selection.empty();else if(window.getSelection)window.getSelection().removeAllRanges()}function P(e){var t=document;if(e.releaseCapture)e.releaseCapture();else if(window.releaseEvents)window.releaseEvents(window.Event.MOUSEMOVE|window.Event.MOUSEUP);H.un(t,"selectstart",S)}function S(e){H.event.preventDefault(e)}function I(e){for(var t=[],i=0,n=e.length;n>i;i++)t.push([].slice.call(e[i],0));return t}function E(e,t,i){for(var n=H.g(a(e,"day-head")),r=n.getElementsByTagName("input"),s=0,o=r.length;o>s;s++)r[s][t]=i}function N(e,t,i){for(var n=I(e.rawValue),a=0,r=i.length;r>a;a++){var s=i[a];if(null!=n[s[0]]&&null!=n[s[0]][s[1]])n[s[0]][s[1]]=t?1:0}e.setRawValue(n)}function O(e){var t='<div class="${testSlotClass}"></div>',i=e.main;i.innerHTML=H.format(t,{testSlotClass:e.helper.getPartClasses("slot-tester").join(" ")}),e.slotSize=parseFloat(H.getComputedStyle(i.firstChild,"width"))}var H=require("./lib"),j=require("./InputControl"),V=require("./controlHelper");e.defaultProperties={helpSelectedText:"投放时间段",helpText:"暂停时间段",dayTexts:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],shortcut:t()};var $,A,F='<div id="${timeId}" class="${timeClass}">${time}</div><div id="${textId}" class="${textClass}">${text}</div>';return e.prototype={constructor:e,type:"Schedule",createMain:function(e){if(!e.tagName)return j.prototype.createMain.call(this);else return document.createElement(e.tagName)},initOptions:function(t){var n={};if(H.extend(n,e.defaultProperties,t),this.setProperties(n),null==this.rawValue)this.setRawValue(i());this.followTip={}},initStructure:function(){var e=this;O(e),this.main.tabIndex=0;var t='<input type="hidden" name="${name}" id="${inputId}"/><div class="${bodyClass}" id="${bodyId}"></div><div class="${headClass}"><div class="${helpClass}"><div class="${helpSelectedClass}"></div><div class="${helpTextClass}">${helpSelected}</div><div class="${helpUnselectedClass}"></div><div class="${helpTextClass}">${help}</div></div><div class="${shortcutClass}" id="${shortcutId}">${shortcutHtml}</div></div>';this.main.innerHTML=H.format(t,{name:this.name,inputId:a(e,"value-input"),headClass:n(e,"head"),bodyClass:n(e,"body"),helpClass:n(e,"help"),helpSelectedClass:n(e,"help-selected"),helpUnselectedClass:n(e,"help-unselected"),helpTextClass:n(e,"help-text"),shortcutClass:n(e,"shortcut"),shortcutId:a(e,"shortcut"),bodyId:a(e,"body"),helpSelected:e.helpSelectedText,help:e.helpText,shortcutHtml:r(e)}),s(e)},initEvents:function(){var e=H.g(a(this,"time-body"));this.helper.addDOMEvent(e,"mousedown",w),this.helper.addDOMEvent(e,"mouseover",x),this.helper.addDOMEvent(e,"mouseout",b),this.helper.addDOMEvent(H.g(a(this,"day-head")),"click",g);var t=this.helper.getPart("shortcut");this.helper.addDOMEvent(t,"click",v),this.helper.addDOMEvent(t,"mouseover",H.curry(_,!0)),this.helper.addDOMEvent(t,"mouseout",H.curry(_,!1)),this.helper.addDOMEvent(t,"mousemove",y)},setProperties:function(e){var t=j.prototype.setProperties.call(this,e),i=t.rawValue;if(i&&this.stringifyValue(i.oldValue)!==this.stringifyValue(i.newValue))this.fire("change",{rawValue:this.rawValue})},repaint:V.createRepaint(j.prototype.repaint,{name:"rawValue",paint:function(e,t){var i=e.stringifyValue(t);H.g(a(e,"value-input")).value=null==i?"":i,u(e,t)}},{name:"disabled",paint:function(e,t){E(e,"disabled",t)}},{name:"readOnly",paint:function(e,t){E(e,"disabled",t)}}),parseValue:function(e){for(var t=[],i=24,n=0,a=e.length;a>n;n+=i){for(var r=e.substring(n,n+i).split(""),s=[],o=0;o<r.length;o++)s.push(r[o]-0);t.push(s)}return t},stringifyValue:function(e){var t=[];if(!e)return null;for(var i=0,n=e.length;n>i;i++)t.push(e[i].join(""));return t.join("")},setRawValue:function(e){this.setProperties({rawValue:e})},getRawValue:function(){return this.rawValue},select:function(){N(this,1,[].slice.call(arguments))},unselect:function(){N(this,0,[].slice.call(arguments))},dispose:function(){V.beforeDispose(this);var e=this.followTip;for(var t in e)if(e[t])document.body.removeChild(e[t]);V.dispose(this),V.afterDispose(this)}},H.inherits(e,j),require("./main").register(e),e}),define("esui/Sidebar",["require","./lib","./Control","./main","./Panel","./controlHelper","./Button"],function(require){function e(){x.apply(this,arguments)}function t(e){return _.g(w.getId(e,"mat"))}function i(e){return _.g(w.getId(e,"minibar"))}function n(e){var t=_.dom.first(e.main);if(t){_.addClasses(t,w.getPartClasses(e,"head")),e.headEl=t;var i=_.dom.next(t);if(i){e.bodyEl=i,_.addClasses(i,w.getPartClasses(e,"body"));var n=new b({main:i,renderOptions:e.renderOptions});e.addChild(n,"content"),n.render()}}}function a(e){var t=e,i=document.createElement("div"),n=w.getPartClasses(t,"mat");i.id=w.getId(t,"mat"),i.className=n.join(" "),document.body.appendChild(i)}function r(e){var t=e,i=document.createElement("div"),n=[],a=w.getPartClasses(t,"minibar-text");t.headEl&&n.push('<div class="'+a.join(" ")+'">'+t.headEl.innerHTML+"</div>");var r=w.getPartClasses(t,"minibar-arrow");n.push('<div class="'+r.join(" ")+'"></div>'),i.innerHTML=n.join(""),i.id=w.getId(t,"minibar"),i.className=w.getPartClasses(t,"minibar").join(" "),w.addDOMEvent(t,i,"mouseover",_.bind(c,null,t,i)),w.addDOMEvent(t,i,"mouseout",_.bind(f,null,t,i)),document.body.appendChild(i)}function s(e){var t=e,i=t.main;require("./Button");var n=M.create("Button",{id:w.getId(t,"autohide"),skin:"autohide"}),a=M.create("Button",{id:w.getId(t,"fixed"),skin:"fixed"});n.appendTo(i),a.appendTo(i),t.addChild(n,"btnAutoHide"),t.addChild(a,"btnFixed"),n.onclick=_.curry(m,t),a.onclick=_.curry(p,t)}function o(e){var n=e,a=_.page.getScrollTop(),r=n.marginTop||0,s=Math.max(n.top+r-a,r),o=n.main,l=t(n),d=i(n);o.style.top=s+"px",d.style.top=s+"px",l.style.top=s-r+"px"}function l(e){var t=e,n=t.main;n.style.cssText+=";left: "+(t.marginLeft?t.marginLeft+"px":0)+";bottom:"+(t.marginBottom?t.marginBottom+"px":0)+";";var a=t.bodyEl;a.style.top=t.headHeight?t.headHeight+"px":0;var r=i(t);r.style.bottom=t.marginBottom?t.marginBottom+"px":0,o(t)}function d(e){t(e).style.display="none"}function u(e){if(t(e).style.display="block",e.main.style.display="block",i(e).style.display="none",!e.isAutoHide())d(e)}function h(e){d(e),e.main.style.display="none",i(e).style.display="block"}function c(e,t){var i=e,n=w.getPartClasses(i,"minibar-hover");if(!_.hasClass(t,n[0]))_.addClasses(t,n),i.minibarDisplayTick=setTimeout(function(){u(i)},i.autoDelay)}function f(e,t){var i=e,n=w.getPartClasses(i,"minibar-hover");_.removeClasses(t,n),clearTimeout(i.minibarDisplayTick)}function p(e){e.setMode("fixed")}function m(e){e.setMode("autohide")}function g(e,t){var i=e;if(t=t.toLowerCase(),"fixed"===t)i.getChild("btnAutoHide").show(),i.getChild("btnFixed").hide();else i.getChild("btnAutoHide").hide(),i.getChild("btnFixed").show();i.mode=t}function v(e){clearTimeout(e.minibarDisplayTick)}function y(e,t){var i=e;if(e.isAutoHide()){t=t||window.event;var n=t.relatedTarget||t.toElement;if(!_.dom.contains(e.main,n))i.minibarDisplayTick=setTimeout(function(){h(i)},i.autoDelay)}}var _=require("./lib"),x=require("./Control"),M=require("./main"),b=require("./Panel"),w=require("./controlHelper");return e.prototype.type="Sidebar",e.prototype.createMain=function(e){if(!e.tagName)return x.prototype.createMain.call(this);else return document.createElement(e.tagName)},e.prototype.initOptions=function(e){var t={headHeight:37,marginTop:10,marginLeft:10,marginBottom:10,autoDelay:300,mode:"fixed"};_.extend(t,e);var i=this.main,n=i.parentNode,a=_.getOffset(n),r=_.getOffset(i);if(null==this.initialOffsetTop)this.initialOffsetTop=r.top-a.top,t.top=r.top,t.left=r.left;else t.top=a.top+this.initialOffsetTop;_.extend(this,t)},e.prototype.initStructure=function(){if(n(this),a(this),r(this),s(this),!_.ie||_.ie>=7)this.topReset=_.curry(o,this),_.on(window,"scroll",this.topReset);if(l(this),this.isAutoHide())h(this)},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"mouseover",_.bind(v,null,this)),this.helper.addDOMEvent(this.main,"mouseout",_.bind(y,null,this))},e.prototype.repaint=w.createRepaint(x.prototype.repaint,{name:"mode",paint:function(e,t){if(g(e,t),e.isAutoHide())h(e);else u(e);if(w.isInStage(e,"RENDERED"))e.fire("modechange",{mode:t})}}),e.prototype.setMode=function(e){this.setProperties({mode:e})},e.prototype.getMode=function(){return this.mode},e.prototype.getPanel=function(){return this.getChild("content")},e.prototype.setContent=function(e){var t=this.getPanel();if(t)t.setProperties({content:e})},e.prototype.isAutoHide=function(){return"autohide"===this.mode},e.prototype.dispose=function(){if(!w.isInStage(this,"DISPOSED")){if(w.beforeDispose(this),this.topReset)_.un(window,"scroll",this.topReset),this.topReseter=null;var e=t(this),n=i(this);document.body.removeChild(n),document.body.removeChild(e),this.headEl=null,this.bodyEl=null,w.dispose(this),w.afterDispose(this)}},_.inherits(e,x),M.register(e),e}),define("esui/Tab",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){l.apply(this,arguments)}function t(e){for(var t=[],i=o.getChildren(e),n=0;n<i.length;n++){var a=i[n],r={title:o.getText(a),panel:a.getAttribute("data-for")};if(a.className)r.classes=a.className.split(/\s+/);t.push(r)}return t}function i(e){for(var t=e.target,i=t;i&&"li"!==i.nodeName.toLowerCase();)i=i.parentNode;if(i&&"li"===i.nodeName.toLowerCase())for(var n=i.parentNode,a=o.getChildren(n),r=0;r<a.length;r++)if(a[r]===i){if(this.helper.isPart(t,"close"))this.removeAt(r);else this.set("activeIndex",r);return}}function n(e,t,i,n){var a=document.createElement("li");if(e.helper.addPartClasses("item",a),t.classes)o.addClasses(a,t.classes);if(i)e.helper.addPartClasses("item-active",a);return a.innerHTML=e.getContentHTML(t,n),a}function a(e){var t=e.helper.getPart("navigator"),i=t.parentNode,a=t.nextSibling;t.innerHTML="",t.parentNode.removeChild(t);for(var r=0;r<e.tabs.length;r++){var s=e.tabs[r],o=e.activeIndex===r,l=n(e,s,o,e.allowClose);t.appendChild(l)}i.insertBefore(t,a)}function r(e,t){for(var i=0;i<e.tabs.length;i++){var n=e.tabs[i];if(n.panel){var a=o.g(n.panel);if(a)a.style.display=i===t?"":"none"}var r=e.helper.getPart("navigator"),s=o.getChildren(r),l=s[i],d=i===t?"addPartClasses":"removePartClasses";e.helper[d]("item-active",l)}var u={activeIndex:t,tab:e.tabs[t]};e.fire("activate",u)}var s=require("underscore"),o=require("./lib"),l=require("./Control");return e.prototype.type="Tab",e.prototype.initOptions=function(e){var i={tabs:[],activeIndex:0,allowClose:!1,orientation:"horizontal"};s.extend(i,e);var n=o.getChildren(this.main);if(n.length){for(var a=[],r=0;r<n.length;r++){var l=n[r];if("navigator"===l.getAttribute("data-role")){this.navigatorElement=l,i.tabs=t(l);break}else{var d={title:l.getAttribute("title"),panel:l.id};a.push(d)}}if(!i.tabs.length)i.tabs=a}if("string"==typeof i.activeIndex)i.activeIndex=+i.activeIndex;this.setProperties(i)},e.prototype.initStructure=function(){var e=this.navigatorElement;if(this.navigatorElement=null,!e)e=document.createElement("ul"),this.main.insertBefore(e,this.main.firstChild||null);e.id=this.helper.getId("navigator"),this.helper.addPartClasses("navigator",e)},e.prototype.initEvents=function(){this.helper.addDOMEvent("navigator","click",i)},e.prototype.contentTemplate="<span>${title}</span>",e.prototype.getContentHTML=function(e,t){var i=o.format(this.contentTemplate,{title:s.escape(e.title)});if(t)i+='<span class="'+this.helper.getPartClassName("close")+'">关闭</span>';return i},e.prototype.setProperties=function(e){if(e.tabs){if(null==e.activeIndex){for(var t=this.tabs[this.activeIndex],i=-1,n=0;n<e.tabs.length;n++)if(e.tabs[n]===t){i=n;break}if(-1===i)this.activeIndex=-1,e.activeIndex=0;else this.activeIndex=i}if(null!=e.allowClose)this.allowClose=e.allowClose,delete e.allowClose}l.prototype.setProperties.apply(this,arguments)},e.prototype.repaint=require("./painters").createRepaint(l.prototype.repaint,{name:["tabs","allowClose"],paint:a},{name:"activeIndex",paint:r},{name:"orientation",paint:function(e,t){e.removeState("vertical"),e.removeState("horizontal"),e.addState(t)}}),e.prototype.activate=function(e){for(var t=0;t<this.tabs.length;t++)if(this.tabs[t]===e)this.set("activeIndex",t)},e.prototype.add=function(e){this.insert(e,this.tabs.length)},e.prototype.insert=function(e,t){t=Math.min(t,this.tabs.length),t=Math.max(t,0),this.tabs.splice(t,0,e);var i=n(this,e,!1,this.allowClose),a=this.helper.getPart("navigator"),s=o.getChildren(a);if(a.insertBefore(i,s[t]||null),1===this.tabs.length)this.activeIndex=0,r(this,0);else{if(t<=this.activeIndex)this.activeIndex++;if(e.panel){var l=o.g(e.panel);if(l)l.style.display="none"}}this.fire("add",{tab:e,index:t})},e.prototype.remove=function(e){for(var t=0;(t=s.indexOf(this.tabs,e,t))>=0;)this.removeAt(t)},e.prototype.removeAt=function(e){var t=this.tabs.splice(e,1)[0],i=this.helper.getPart("navigator");if(t){var n=o.getChildren(i),a=n[e];if(a.parentNode.removeChild(a),e<this.activeIndex)this.activeIndex--;else if(e===this.activeIndex)this.activeIndex=Math.min(this.activeIndex,this.tabs.length-1),r(this,this.activeIndex);if(t.panel){var s=o.g(t.panel);if(s)s.style.display="none"}this.fire("remove",{tab:t,index:e})}},e.prototype.getActiveTab=function(){return this.get("tabs")[this.get("activeIndex")]},o.inherits(e,l),require("./main").register(e),e}),define("esui/TextLine",["require","underscore","./lib","./InputControl","./main","./TextBox","./painters"],function(require){function e(){o.apply(this,arguments)}function t(e){var t='<textarea wrap="off" id="'+e.helper.getId("text")+'"></textarea>',i=[e.helper.getPartBeginTag("num-line","div"),"1",e.helper.getPartEndTag("num-line","div"),e.helper.getPartBeginTag("text-container","div"),t,e.helper.getPartEndTag("text-container","div")];return i.join("")}function i(e){if("input"===e.type||"value"===e.propertyName)n.call(this)}function n(){var e=this.helper.getPart("text").value.split("\n").length;if(e!==this.number){this.number=e;var t=this.helper.getPart("num-line");t.innerHTML=r.range(1,e+1).join("<br />")}this.resetScroll(),this.fire("change")}function a(){var e=this,t=e.main,i=e.helper,n=i.getPrimaryClassName("focus"),a=i.getPart("text"),r=function(){s.removeClass(t,n),e.removeState("focus"),i.removeDOMEvent(a,"blur",r)};s.addClass(t,n),e.addState("focus"),i.addDOMEvent(a,"blur",r)}var r=require("underscore"),s=require("./lib"),o=require("./InputControl"),l=require("./main");return require("./TextBox"),e.prototype={type:"TextLine",initOptions:function(e){var t={width:300,height:200,value:""};if(s.isInput(this.main))this.helper.extractOptionsFromInput(this.main,t);if(r.extend(t,e),!t.hasOwnProperty("title")&&this.main.title)t.title=this.main.title;this.setProperties(t)},initStructure:function(){if(s.isInput(this.main))this.helper.replaceMain();this.main.innerHTML=t(this),this.helper.initChildren()},initEvents:function(){var e=this.helper.getPart("text"),t="oninput"in e?"input":"propertychange";this.helper.addDOMEvent(e,t,i),this.helper.addDOMEvent(e,"scroll",this.resetScroll),this.helper.addDOMEvent(e,"focus",a)},repaint:require("./painters").createRepaint(o.prototype.repaint,{name:"height",paint:function(e,t){t=t||300;var i=e.helper.getPart("num-line");i.style.height=t+"px",e.main.style.height=t+"px"}},{name:"width",paint:function(e,t){t=t||300,e.main.style.width=t+"px"}},{name:"rawValue",paint:function(e,t){var a=e.helper.getPart("text");if(t){if(r.isArray(t))e.value=r.unescape(t.join("\n"));else if("string"==typeof t)e.value=r.unescape(t);var s="oninput"in a?"input":"propertychange";e.helper.removeDOMEvent(a,s,i),a.value=e.value,e.helper.addDOMEvent(a,s,i),n.call(e)}}},{name:["disabled","readOnly"],paint:function(e,t,i){var n=e.helper.getPart("text");n.disabled=!!t,n.readOnly=!!i}}),resetScroll:function(){var e=this.helper.getPart("text"),t=this.helper.getPart("num-line");t.style.height=e.clientHeight+"px",t.scrollTop=e.scrollTop},stringifyValue:function(e){return e.join("\n")},parseValue:function(e){return s.trim(e.replace(/\n{2,}/g,"\n")).split("\n")},getRawValue:function(){return r.unique(this.getValueRepeatableItems())},getValueRepeatableItems:function(){var e=this.helper.getPart("text").value,t=e.split("\n");return r.chain(t).map(s.trim).compact().value()},getRowsNumber:function(){var e=this.getValue().split("\n");return e.length},addLines:function(e){var t=e.join("\n"),i=this.getValue();if(i.length>0)t=i+"\n"+t;this.setRawValue(t)}},s.inherits(e,o),l.register(e),e}),define("esui/TipLayer",["require","./Button","./Label","./Panel","./lib","./controlHelper","./Control","./main","./painters"],function(require){function e(){c.apply(this,arguments)}function t(e){var t=e.main;if(t){for(var i,n=u.getChildren(t),a=n.length,r={};a--;)if(i=n[a].getAttribute("data-role"))r[i]=n[a];e.roles=r}}function i(e,t){if(t)e.title=t.innerHTML;else if(t=document.createElement("h3"),e.main.firstChild)u.insertBefore(t,e.main.firstChild);else e.main.appendChild(t);var i=[].concat(h.getPartClasses(e,"title"));u.addClasses(t,i);var n={main:t,childName:"title",title:""},a=f.create("Label",n);return a.render(),e.addChild(a),a}function n(e,t,i){if(i)e.content=i.innerHTML;else if(i=document.createElement("div"),"body"===t){var n=e.getChild("title");if(n)u.insertAfter(i,n.main);else if(e.main.firstChild)u.insertBefore(i,n,e.main.firstChild);else e.main.appendChild(i)}else e.main.appendChild(i);u.addClasses(i,h.getPartClasses(e,t+"-panel"));var a={main:i,renderOptions:e.renderOptions},r=f.create("Panel",a);return r.render(),e.addChild(r,t),r}function a(e,t,i){if(e.isShow)e.autoPosition(t,i)}function r(e,t,i,n){if(t)clearTimeout(e.showTimeout),clearTimeout(e.hideTimeout),e.showTimeout=setTimeout(u.bind(e.show,e,i,n),t);else e.show(i,n)}function s(e,t){clearTimeout(e.showTimeout),clearTimeout(e.hideTimeout),e.hideTimeout=setTimeout(u.bind(e.hide,e),t)}function o(e,t){if("string"==typeof t)t=e.viewContext.get(t);return t.main}function l(e,t,i){var n=e.helper,a=[].concat(n.getPartClasses(),n.getPartClasses(i));u.addClasses(t,a),n.addVariantClasses();var r=u.g(n.getId("arrow"));if(r)u.addClasses(t,n.getPartClasses("arrow")),u.addClasses(t,n.getPartClasses("arrow-"+i))}function d(e,t,i,n){var a=u.page.getViewWidth(),r=u.page.getViewHeight(),s=t.left-i,o=a-t.right-i,l=r-t.top-n,d=t.bottom-n;if(s>=0)if(o>=0){if(!e.right&&!e.left)if(s>o)e.left="right",e.right=null;else e.right="left",e.left=null}else e.left="right",e.right=null;else e.right="left",e.left=null;if(l>=0)if(d>=0){if(!e.bottom&&!e.top)if(l>d)e.top="top",e.bottom=null;else e.bottom="bottom",e.top=null}else e.top="top",e.bottom=null;else e.bottom="bottom",e.top=null}require("./Button"),require("./Label"),require("./Panel");var u=require("./lib"),h=require("./controlHelper"),c=require("./Control"),f=require("./main"),p=require("./painters");return e.prototype={type:"TipLayer",initOptions:function(e){t(e);var i={roles:{}};u.extend(i,e),this.setProperties(i)},initStructure:function(){var e=this.main;if(e.parentNode&&"body"!==e.parentNode.nodeName.toLowerCase())document.body.appendChild(e);if(this.main.style.left="-10000px",this.title||this.roles.title)i(this,this.roles.title);if(n(this,"body",this.roles.content),this.foot||this.roles.foot)n(this,"foot",this.roles.foot);if(this.arrow){var t=document.createElement("div");t.id=h.getId(this,"arrow"),t.className=h.getPartClasses(this,"arrow").join(" "),this.main.appendChild(t)}},repaint:h.createRepaint(c.prototype.repaint,p.style("width"),{name:"title",paint:function(e,t){var n=e.getHead();if(null==t){if(n)e.removeChild(n)}else{if(!n)n=i(e);n.setText(t)}}},{name:"content",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',n=e.getBody(),a=h.getId(e,"body"),r=h.getPartClasses(e,"body"),s={"class":r.join(" "),id:a,content:t};n.setContent(u.format(i,s))}},{name:"foot",paint:function(e,t){var i='<div class="${class}" id="${id}">${content}</div>',a=h.getId(e,"foot"),r=h.getPartClasses(e,"foot"),s=e.getFoot();if(null==t){if(s)e.removeChild(s)}else{var o={"class":r.join(" "),id:a,content:t};if(!s)s=n(e,"foot");s.setContent(u.format(i,o))}}},{name:["targetDOM","targetControl","showMode","positionOpt","delayTime"],paint:function(e,t,i,n,a,r){var s={targetDOM:t,targetControl:i,showMode:n,delayTime:r};if(a)a=a.split("|"),s.positionOpt={top:a[0]||"top",right:a[1]||"left"};e.attachTo(s)}}),autoPosition:function(e,t){var i=this,n=this.main;t=t||{left:"right",top:"top"};var a=e.getBoundingClientRect(),r=u.getOffset(e),s={top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.right-a.left,height:a.bottom-a.top},o=n.style.display;n.style.display="block";var h=n.offsetHeight,c=n.offsetWidth;n.style.display="none";var f=u.clone(t);d(f,s,c,h);var p,m={};if(f.right)if(m.left=r.right,f.top)p="lt";else p="lb";else if(f.left)if(m.left=r.left-c,f.top)p="rt";else p="rb";if(f.top)m.top=r.top;else if(f.bottom)m.top=r.bottom-h;n.style.display=o,l(i,n,p),i.renderLayer(n,m)},renderLayer:function(e,t){var i=u.clone(t||{});if(i.hasOwnProperty("top")&&i.hasOwnProperty("bottom"))i.height=i.bottom-i.top,delete i.bottom;if(i.hasOwnProperty("left")&&i.hasOwnProperty("right"))i.width=i.right-i.left,delete i.right;if(i.hasOwnProperty("top")||i.hasOwnProperty("bottom"))e.style.top="",e.style.bottom="";if(i.hasOwnProperty("left")||i.hasOwnProperty("right"))e.style.left="",e.style.right="";for(var n in i)if(i.hasOwnProperty(n))e.style[n]=i[n]+"px"},attachTo:function(e){var t,i,n=e.showMode||"over";if("over"===n)t="mouseover",i="mouseout";else if("click"===n)t="click",i="click";var a;if(e.targetDOM)a=u.g(e.targetDOM);else if(e.targetControl)a=o(this,e.targetControl);if(a){if("auto"===n)this.show(a,e);else h.addDOMEvent(this,a,t,u.curry(r,this,e.delayTime,a,e.positionOpt)),h.addDOMEvent(this,this.main,"mouseover",u.bind(this.show,this,a,e.positionOpt)),h.addDOMEvent(this,this.main,"mouseout",u.curry(s,this,150));if("mouseout"===i)h.addDOMEvent(this,a,i,u.curry(s,this,150))}},getHead:function(){return this.getChild("title")},getBody:function(){return this.getChild("body")},getFoot:function(){return this.getChild("foot")},show:function(e,t){if(h.isInStage(this,"INITED"))this.render();else if(h.isInStage(this,"DISPOSED"))return;clearTimeout(this.hideTimeout),h.addDOMEvent(this,window,"resize",u.curry(a,this,e,t)),this.main.style.zIndex=h.layer.getZIndex(e),this.removeState("hidden"),this.autoPosition(e,t),this.fire("show"),this.isShow=!0},hide:function(){if(this.isShow)this.addState("hidden");this.fire("hide"),this.isShow=!1},setTitle:function(e){this.setProperties({title:e})},setContent:function(e){this.setProperties({content:e})},setFoot:function(e){this.setProperties({foot:e})},dispose:function(){if(!h.isInStage(this,"DISPOSED")){this.hide();var e=this.main.id;u.removeNode(e),c.prototype.dispose.apply(this,arguments)}}},e.onceNotice=function(e){function t(e){var t=e.onok,i="function"==typeof t;if(i)t(e);e.fire("ok"),e.dispose()}var i="tipLayer-once-notice",n="tipLayer-notice-ok",a=u.encodeHTML(e.content)||"",r={type:"onceNotice",skin:"onceNotice",arrow:!0};u.extend(r,e);var s=document.createElement("div");document.body.appendChild(s);var o=h.getGUID(i);r.id=o,r.main=s,r.type=null;var l=f.create("TipLayer",r);l.setContent(a);var d=e.okText||"知道了";l.setFoot('<div data-ui="type:Button;childName:okBtn;id:'+o+"-"+n+';"class="'+h.getPartClasses(l,"once-notice")+'">'+d+"</div>"),l.render();var c=l.getFoot().getChild("okBtn");return c.on("click",u.curry(t,l,"ok")),l.attachTo({targetDOM:e.targetDOM,targetControl:e.targetControl,showMode:"auto",positionOpt:{top:"top",right:"left"}}),l},u.inherits(e,c),f.register(e),e}),define("esui/Tip",["require","underscore","./Control","./main","./lib","./TipLayer","./painters"],function(require){function e(){n.apply(this,arguments)}function t(e,t){var i="",n=e.main;if(t.title=t.title||n.getAttribute("title"),n.removeAttribute("title"),t.content=t.content||n.innerHTML,t.icon)i='<span class="'+e.helper.getIconClass(t.icon)+'"></span>';n.innerHTML=i}var i=require("underscore"),n=require("./Control"),a=require("./main"),r=require("./lib");return require("./TipLayer"),e.prototype.type="Tip",e.prototype.initOptions=function(e){var n={title:"",content:"",arrow:!0,showMode:"over",delayTime:500,icon:"question-circle"};if(i.extend(n,e),"false"===e.arrow)n.arrow=!1;t(this,n),this.setProperties(n)},e.prototype.initStructure=function(){var e=document.createElement("div");if(document.body.appendChild(e),this.inheritFont||a.getConfig("inheritFont"))e.style.fontSize=r.getComputedStyle(this.main,"fontSize");var t=a.create("TipLayer",{main:e,childName:"layer",content:this.content,title:this.title,arrow:this.arrow,width:this.layerWidth||200,viewContext:this.viewContext,variants:"from-tip"});this.addChild(t),t.render();var i={showMode:this.mode,delayTime:this.delayTime,targetControl:this.id,positionOpt:{top:"top",right:"left"}};t.attachTo(i)},e.prototype.repaint=require("./painters").createRepaint(n.prototype.repaint,{name:"title",paint:function(e,t){var i=e.getChild("layer");if(i)i.setTitle(t)}},{name:"content",paint:function(e,t){var i=e.getChild("layer");if(i)i.setContent(t)}}),r.inherits(e,n),a.register(e),e}),define("esui/Toast",["require","./lib","./Control","./painters","./main"],function(require){function e(){a.apply(this,arguments)}function t(){var e=require("./main").getConfig("uiClassPrefix"),t=e+"-toast-collection-area",i=document.getElementById(t);if(!i)i=document.createElement("div"),i.id=t,this.helper.addPartClasses("collection-area",i),document.body.appendChild(i);return i}function i(i){return function(r,s){if("show"===i)i="normal";s=n.extend({content:r},s),s.messageType=s.messageType||i;var o=new e(s);return a.prototype.hide.apply(o),o.appendTo(t.call(o)),o}}var n=require("./lib"),a=require("./Control");e.defaultProperties={duration:3e3,messageType:"normal",disposeOnHide:!0,autoShow:!1},e.prototype.type="Toast",e.prototype.initOptions=function(t){var i={};if(n.extend(i,e.defaultProperties,t),null==i.content)i.content=this.main.innerHTML;this.setProperties(i)},e.prototype.initStructure=function(){this.main.innerHTML=this.helper.getPartHTML("content","p"),this.addState("hidden")},e.prototype.repaint=require("./painters").createRepaint(a.prototype.repaint,{name:"content",paint:function(e,t){var i=e.main.firstChild;if(i.innerHTML=t,e.autoShow&&e.helper.isInStage("INITED"))e.show()}},{name:"messageType",paint:function(e){e.helper.addPartClasses(e.messageType)}}),e.prototype.show=function(){if(!this.helper.isInStage("DISPOSED")){if(!this.main.parentElement&&!this.main.parentNode)this.appendTo(t.call(this));if(a.prototype.show.apply(this,arguments),this.fire("show"),clearTimeout(this.timer),!isNaN(this.duration)&&1/0!==this.duration)this.timer=setTimeout(n.bind(this.hide,this),this.duration)}},e.prototype.hide=function(){if(a.prototype.hide.apply(this,arguments),clearTimeout(this.timer),this.fire("hide"),this.disposeOnHide)this.dispose()},e.prototype.dispose=function(){if(clearTimeout(this.timer),!this.helper.isInStage("DISPOSED"))n.removeNode(this.main),a.prototype.dispose.apply(this,arguments)};var r=["show","info","alert","error","success"];for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];e[o]=i(o)}return n.inherits(e,a),require("./main").register(e),e}),define("esui/validator/MaxByteLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="maxByteLength",e.prototype.errorMessage="${title}不能超过${maxByteLength}个字符",e.prototype.check=function(e,t){var n=e.replace(/[^\x00-\xff]/g,"xx").length;return new i(n<=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/validator/MinByteLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="minByteLength",e.prototype.errorMessage="${title}不能小于${minByteLength}个字符",e.prototype.check=function(e,t){var n=e.replace(/[^\x00-\xff]/g,"xx").length;return new i(n>=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/validator/MinLengthRule",["require","./Rule","./ValidityState","../lib","../main"],function(require){function e(){t.apply(this,arguments)}var t=require("./Rule"),i=require("./ValidityState");return e.prototype.type="minLength",e.prototype.errorMessage="${title}不能小于${minLength}个字符",e.prototype.check=function(e,t){return new i(e.length>=this.getLimitCondition(t),this.getErrorMessage(t))},require("../lib").inherits(e,t),require("../main").registerRule(e,100),e}),define("esui/Wizard",["require","underscore","./lib","./Control","./painters","./main"],function(require){function e(){r.apply(this,arguments)}function t(e,t,i){var n=t&&t.panel&&a.g(t.panel);if(n){var r=i?"removePartClasses":"addPartClasses";e.helper[r]("panel-hidden",n)}}function i(e){for(var i="",n=0;n<e.steps.length;n++){var a=e.steps[n],r=e.helper.getPartClasses("node");if(0===n)r.push.apply(r,e.helper.getPartClasses("node-first"));if(n===e.steps.length-1&&!e.finishText)r.push.apply(r,e.helper.getPartClasses("node-last"));if(n===e.activeIndex-1)r.push.apply(r,e.helper.getPartClasses("node-active-prev"));if(n<=e.activeIndex-1)r.push.apply(r,e.helper.getPartClasses("node-done"));var s=n===e.activeIndex;if(t(e,a,s),s)if(r.push.apply(r,e.helper.getPartClasses("node-active")),n===e.steps.length-1)r.push.apply(r,e.helper.getPartClasses("node-last-active"));i+='<li class="'+r.join(" ")+'">',i+=e.getNodeHTML(a),i+="</li>"}if(e.finishText){var r=[].concat(e.helper.getPartClasses("node"),e.helper.getPartClasses("node-last"),e.helper.getPartClasses("node-finish"),e.activeIndex===e.steps.length?e.helper.getPartClasses("node-active"):[]);i+='<li class="'+r.join(" ")+'">',i+="<span>"+e.finishText+"</span>",i+="</li>"}return i}var n=require("underscore"),a=require("./lib"),r=require("./Control");e.prototype.type="Wizard",e.prototype.createMain=function(){return document.createElement("ol")},e.prototype.initOptions=function(e){var t={steps:[],activeIndex:0},i=a.getChildren(this.main);if(!e.steps&&i.length)t.steps=n.map(i,function(e){var t={text:a.getText(e)},i=e.getAttribute("data-for");if(i)t.panel=i;return t});if(n.extend(t,e),"string"==typeof t.activeIndex)t.activeIndex=+t.activeIndex;this.setProperties(t)},e.prototype.nodeTemplate="<span>${text}</span>",e.prototype.getNodeHTML=function(e){return a.format(this.nodeTemplate,{text:a.encodeHTML(e.text),number:a.encodeHTML(e.number)})};var s=require("./painters");return e.prototype.repaint=s.createRepaint(r.prototype.repaint,{name:["steps","finishText"],paint:function(e){e.main.innerHTML=i(e)
}},{name:"activeIndex",paint:function(e){if(e.helper.isInStage("RENDERED"))for(var i=e.main.getElementsByTagName("li"),n=i.length-1;n>=0;n--){var a=n===e.activeIndex;t(e,e.steps[n],a);var r=i[n],s=a?"addPartClasses":"removePartClasses";if(e.helper[s]("node-active",r),n===e.steps.length-1)e.helper[s]("node-last-active",r);var o=n<=e.activeIndex-1,s=o?"addPartClasses":"removePartClasses";e.helper[s]("node-done",r);var l=n===e.activeIndex-1,s=l?"addPartClasses":"removePartClasses";e.helper[s]("node-active-prev",r)}}}),e.prototype.setProperties=function(e){if(e.hasOwnProperty("steps")){if(e.hasOwnProperty("activeIndex"))this.activeIndex=e.activeIndex,delete e.activeIndex;else this.activeIndex=0;if(e.hasOwnProperty("finishText"))this.finishText=e.finishText,delete e.finishText}var t=r.prototype.setProperties.apply(this,arguments);if(t.hasOwnProperty("steps")||t.hasOwnProperty("activeIndex"))this.fire("enter")},e.prototype.getActiveStep=function(){return this.get("steps")[this.get("activeIndex")]},e.prototype.stepNext=function(){var e=this.finishText?this.steps.length:this.steps.length-1;if(this.activeIndex<e)this.set("activeIndex",this.activeIndex+1)},e.prototype.stepPrevious=function(){if(this.activeIndex>0)this.set("activeIndex",this.activeIndex-1)},require("./main").register(e),a.inherits(e,r),e}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ar-ma",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ar-sa",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},i={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return e.lang("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){if(12>e)return"ص";else return"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[۰-۹]/g,function(e){return i[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ar",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},i={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};return e.lang("ar",{months:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),monthsShort:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){if(12>e)return"ص";else return"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[۰-۹]/g,function(e){return i[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/az",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};return e.lang("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(e){if(4>e)return"gecə";else if(12>e)return"səhər";else if(17>e)return"gündüz";else return"axşam"},ordinal:function(e){if(0===e)return e+"-ıncı";var i=e%10,n=e%100-i,a=e>=100?100:null;return e+(t[i]||t[n]||t[a])},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/bg",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinal:function(e){var t=e%10,i=e%100;if(0===e)return e+"-ев";else if(0===i)return e+"-ен";else if(i>10&&20>i)return e+"-ти";else if(1===t)return e+"-ви";else if(2===t)return e+"-ри";else if(7===t||8===t)return e+"-ми";else return e+"-ти"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/bn",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},i={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};return e.lang("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){if(4>e)return"রাত";else if(10>e)return"শকাল";else if(17>e)return"দুপুর";else if(20>e)return"বিকেল";else return"রাত"},week:{dow:0,doy:6}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/br",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n={mm:"munutenn",MM:"miz",dd:"devezh"};return e+" "+a(n[i],e)}function i(e){switch(n(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function n(e){if(e>9)return n(e%10);else return e}function a(e,t){if(2===t)return r(e);else return e}function r(e){var t={m:"v",b:"v",d:"z"};if(void 0===t[e.charAt(0)])return e;else return t[e.charAt(0)]+e.substring(1)}return e.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:i},ordinal:function(e){var t=1===e?"añ":"vet";return e+t},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/bs",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(1===e)n+="minuta";else if(2===e||3===e||4===e)n+="minute";else n+="minuta";return n;case"h":return t?"jedan sat":"jednog sata";case"hh":if(1===e)n+="sat";else if(2===e||3===e||4===e)n+="sata";else n+="sati";return n;case"dd":if(1===e)n+="dan";else n+="dana";return n;case"MM":if(1===e)n+="mjesec";else if(2===e||3===e||4===e)n+="mjeseca";else n+="mjeseci";return n;case"yy":if(1===e)n+="godina";else if(2===e||3===e||4===e)n+="godine";else n+="godina";return n}}return e.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ca",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/cs",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e){return e>1&&5>e&&1!==~~(e/10)}function i(e,i,n,a){var r=e+" ";switch(n){case"s":return i||a?"pár sekund":"pár sekundami";case"m":return i?"minuta":a?"minutu":"minutou";case"mm":if(i||a)return r+(t(e)?"minuty":"minut");else return r+"minutami";case"h":return i?"hodina":a?"hodinu":"hodinou";case"hh":if(i||a)return r+(t(e)?"hodiny":"hodin");else return r+"hodinami";case"d":return i||a?"den":"dnem";case"dd":if(i||a)return r+(t(e)?"dny":"dní");else return r+"dny";case"M":return i||a?"měsíc":"měsícem";case"MM":if(i||a)return r+(t(e)?"měsíce":"měsíců");else return r+"měsíci";case"y":return i||a?"rok":"rokem";case"yy":if(i||a)return r+(t(e)?"roky":"let");else return r+"lety"}}var n="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),a="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");return e.lang("cs",{months:n,monthsShort:a,monthsParse:function(e,t){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+e[i]+"$|^"+t[i]+"$","i");return n}(n,a),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/cv",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("cv",{months:"кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),monthsShort:"кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кç_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",LLL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",LLLL:"dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ĕнер] LT [сехетре]",nextWeek:"[Çитес] dddd LT [сехетре]",lastWeek:"[Иртнĕ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){var t=/сехет$/i.exec(e)?"рен":/çул$/i.exec(e)?"тан":"ран";return e+t},past:"%s каялла",s:"пĕр-ик çеккунт",m:"пĕр минут",mm:"%d минут",h:"пĕр сехет",hh:"%d сехет",d:"пĕр кун",dd:"%d кун",M:"пĕр уйăх",MM:"%d уйăх",y:"пĕр çул",yy:"%d çул"},ordinal:"%d-мĕш",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/cy",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(e){var t=e,i="",n=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];if(t>20)if(40===t||50===t||60===t||80===t||100===t)i="fed";else i="ain";else if(t>0)i=n[t];return e+i},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/da",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/de-at",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}return e.lang("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/de",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}return e.lang("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/el",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){if(/D/.test(t.substring(0,t.indexOf("MMMM"))))return this._monthsGenitiveEl[e.month()];else return this._monthsNominativeEl[e.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,i){if(e>11)return i?"μμ":"ΜΜ";else return i?"πμ":"ΠΜ"},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var i=this._calendarEl[e],n=t&&t.hours();if("function"==typeof i)i=i.apply(t);return i.replace("{}",n%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinal:function(e){return e+"η"},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/en-au",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/en-ca",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/en-gb",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/eo",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(e,t,i){if(e>11)return i?"p.t.m.":"P.T.M.";else return i?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/es",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){if(/-MMM-/.test(n))return i[e.month()];else return t[e.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/et",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i,n){var a={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};if(t)return a[i][2]?a[i][2]:a[i][1];else return n?a[i][0]:a[i][1]}return e.lang("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})
}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/eu",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/fa",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},i={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};return e.lang("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(e){if(12>e)return"قبل از ظهر";else return"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,function(e){return i[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},ordinal:"%dم",week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/fi",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,n,a){var r="";switch(n){case"s":return a?"muutaman sekunnin":"muutama sekunti";case"m":return a?"minuutin":"minuutti";case"mm":r=a?"minuutin":"minuuttia";break;case"h":return a?"tunnin":"tunti";case"hh":r=a?"tunnin":"tuntia";break;case"d":return a?"päivän":"päivä";case"dd":r=a?"päivän":"päivää";break;case"M":return a?"kuukauden":"kuukausi";case"MM":r=a?"kuukauden":"kuukautta";break;case"y":return a?"vuoden":"vuosi";case"yy":r=a?"vuoden":"vuotta"}return r=i(e,a)+" "+r}function i(e,t){return 10>e?t?a[e]:n[e]:e}var n="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),a=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",n[7],n[8],n[9]];return e.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/fo",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/fr-ca",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/fr",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/gl",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){if("uns segundos"===e)return"nuns segundos";else return"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/he",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY LT",LLLL:"dddd, D [ב]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){if(2===e)return"שעתיים";else return e+" שעות"},d:"יום",dd:function(e){if(2===e)return"יומיים";else return e+" ימים"},M:"חודש",MM:function(e){if(2===e)return"חודשיים";else return e+" חודשים"},y:"שנה",yy:function(e){if(2===e)return"שנתיים";else return e+" שנים"}}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/hi",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return e.lang("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){if(4>e)return"रात";else if(10>e)return"सुबह";else if(17>e)return"दोपहर";else if(20>e)return"शाम";else return"रात"},week:{dow:0,doy:6}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/hr",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":if(1===e)n+="minuta";else if(2===e||3===e||4===e)n+="minute";else n+="minuta";return n;case"h":return t?"jedan sat":"jednog sata";case"hh":if(1===e)n+="sat";else if(2===e||3===e||4===e)n+="sata";else n+="sati";return n;case"dd":if(1===e)n+="dan";else n+="dana";return n;case"MM":if(1===e)n+="mjesec";else if(2===e||3===e||4===e)n+="mjeseca";else n+="mjeseci";return n;case"yy":if(1===e)n+="godina";else if(2===e||3===e||4===e)n+="godine";else n+="godina";return n}}return e.lang("hr",{months:"sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/hu",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i,n){var a=e;switch(i){case"s":return n||t?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(n||t?" perc":" perce");case"mm":return a+(n||t?" perc":" perce");case"h":return"egy"+(n||t?" óra":" órája");case"hh":return a+(n||t?" óra":" órája");case"d":return"egy"+(n||t?" nap":" napja");case"dd":return a+(n||t?" nap":" napja");case"M":return"egy"+(n||t?" hónap":" hónapja");case"MM":return a+(n||t?" hónap":" hónapja");case"y":return"egy"+(n||t?" év":" éve");case"yy":return a+(n||t?" év":" éve")}return""}function i(e){return(e?"":"[múlt] ")+"["+n[this.day()]+"] LT[-kor]"}var n="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");return e.lang("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(e,t,i){if(12>e)return i===!0?"de":"DE";else return i===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/hy-am",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t){var i={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function i(e){var t="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return t[e.month()]}function n(e){var t="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return t[e.day()]}return e.lang("hy-am",{months:t,monthsShort:i,weekdays:n,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., LT",LLLL:"dddd, D MMMM YYYY թ., LT"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiem:function(e){if(4>e)return"գիշերվա";else if(12>e)return"առավոտվա";else if(17>e)return"ցերեկվա";else return"երեկոյան"},ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":if(1===e)return e+"-ին";else return e+"-րդ";default:return e}},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/id",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){if(11>e)return"pagi";else if(15>e)return"siang";else if(19>e)return"sore";else return"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/is",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e){if(e%100===11)return!0;else if(e%10===1)return!1;return!0}function i(e,i,n,a){var r=e+" ";switch(n){case"s":return i||a?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return i?"mínúta":"mínútu";case"mm":if(t(e))return r+(i||a?"mínútur":"mínútum");else if(i)return r+"mínúta";return r+"mínútu";case"hh":if(t(e))return r+(i||a?"klukkustundir":"klukkustundum");else return r+"klukkustund";case"d":if(i)return"dagur";else return a?"dag":"degi";case"dd":if(t(e))if(i)return r+"dagar";else return r+(a?"daga":"dögum");else if(i)return r+"dagur";return r+(a?"dag":"degi");case"M":if(i)return"mánuður";else return a?"mánuð":"mánuði";case"MM":if(t(e))if(i)return r+"mánuðir";else return r+(a?"mánuði":"mánuðum");else if(i)return r+"mánuður";return r+(a?"mánuð":"mánuði");case"y":return i||a?"ár":"ári";case"yy":if(t(e))return r+(i||a?"ár":"árum");else return r+(i||a?"ár":"ári")}}return e.lang("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:i,m:i,mm:i,h:"klukkustund",hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/it",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ja",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(e){if(12>e)return"午前";else return"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ka",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t){var i={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},n=/D[oD] *MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function i(e,t){var i={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},n=/(წინა|შემდეგ)/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.lang("ka",{months:t,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:i,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(წამი|წუთი|საათი|წელი)/.test(e)?e.replace(/ი$/,"ში"):e+"ში"},past:function(e){if(/(წამი|წუთი|საათი|დღე|თვე)/.test(e))return e.replace(/(ი|ე)$/,"ის წინ");if(/წელი/.test(e))return e.replace(/წელი$/,"წლის წინ");else return void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinal:function(e){if(0===e)return e;if(1===e)return e+"-ლი";if(20>e||100>=e&&e%20===0||e%100===0)return"მე-"+e;else return e+"-ე"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/km",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ko",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 mm분",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},meridiem:function(e){return 12>e?"오전":"오후"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinal:"%d일",meridiemParse:/(오전|오후)/,isPM:function(e){return"오후"===e}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/lb",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[e+" Deeg",e+" Deeg"],M:["ee Mount","engem Mount"],MM:[e+" Méint",e+" Méint"],y:["ee Joer","engem Joer"],yy:[e+" Joer",e+" Joer"]};return t?n[i][0]:n[i][1]}function i(e){var t=e.substr(0,e.indexOf(" "));if(s(t))return"a "+e;else return"an "+e}function n(e){var t=e.substr(0,e.indexOf(" "));if(s(t))return"viru "+e;else return"virun "+e}function a(){var e=this.format("d");if(r(e))return"[Leschte] dddd [um] LT";else return"[Leschten] dddd [um] LT"}function r(e){switch(e=parseInt(e,10)){case 0:case 1:case 3:case 5:case 6:return!0;default:return!1}}function s(e){if(e=parseInt(e,10),isNaN(e))return!1;if(0>e)return!0;else if(10>e)if(e>=4&&7>=e)return!0;else return!1;else if(100>e){var t=e%10,i=e/10;if(0===t)return s(i);else return s(t)}else if(1e4>e){for(;e>=10;)e/=10;return s(e)}else return e/=1e3,s(e)}return e.lang("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:a},relativeTime:{future:i,past:n,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/lt",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i,n){if(t)return"kelios sekundės";else return n?"kelių sekundžių":"kelias sekundes"}function i(e,t,i,n){return t?a(i)[0]:n?a(i)[1]:a(i)[2]}function n(e){return e%10===0||e>10&&20>e}function a(e){return o[e].split("_")}function r(e,t,r,s){var o=e+" ";if(1===e)return o+i(e,t,r[0],s);else if(t)return o+(n(e)?a(r)[1]:a(r)[0]);else if(s)return o+a(r)[1];else return o+(n(e)?a(r)[1]:a(r)[2])}function s(e,t){var i=-1===t.indexOf("dddd HH:mm"),n=l[e.day()];return i?n:n.substring(0,n.length-2)+"į"}var o={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},l="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_");return e.lang("lt",{months:"sausio_vasario_kovo_balandžio_gegužės_biržėlio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:s,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:t,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/lv",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n=e.split("_");if(i)return t%10===1&&11!==t?n[2]:n[3];else return t%10===1&&11!==t?n[0]:n[1]}function i(e,i,a){return e+" "+t(n[a],e,i)}var n={mm:"minūti_minūtes_minūte_minūtes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mēnesi_mēnešus_mēnesis_mēneši",yy:"gadu_gadus_gads_gadi"};return e.lang("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vēlāk",past:"%s agrāk",s:"dažas sekundes",m:"minūti",mm:i,h:"stundu",hh:i,d:"dienu",dd:i,M:"mēnesi",MM:i,y:"gadu",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/mk",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));
else e(window.moment)}(function(e){return e.lang("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinal:function(e){var t=e%10,i=e%100;if(0===e)return e+"-ев";else if(0===i)return e+"-ен";else if(i>10&&20>i)return e+"-ти";else if(1===t)return e+"-ви";else if(2===t)return e+"-ри";else if(7===t||8===t)return e+"-ми";else return e+"-ти"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ml",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiem:function(e){if(4>e)return"രാത്രി";else if(12>e)return"രാവിലെ";else if(17>e)return"ഉച്ച കഴിഞ്ഞ്";else if(20>e)return"വൈകുന്നേരം";else return"രാത്രി"}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/mr",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return e.lang("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){if(4>e)return"रात्री";else if(10>e)return"सकाळी";else if(17>e)return"दुपारी";else if(20>e)return"सायंकाळी";else return"रात्री"},week:{dow:0,doy:6}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ms-my",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){if(11>e)return"pagi";else if(15>e)return"tengahari";else if(19>e)return"petang";else return"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/nb",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ne",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return e.lang("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){if(3>e)return"राती";else if(10>e)return"बिहान";else if(15>e)return"दिउँसो";else if(18>e)return"बेलुका";else if(20>e)return"साँझ";else return"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/nl",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return e.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,n){if(/-MMM-/.test(n))return i[e.month()];else return t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/nn",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/pl",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e){return 5>e%10&&e%10>1&&~~(e/10)%10!==1}function i(e,i,n){var a=e+" ";switch(n){case"m":return i?"minuta":"minutę";case"mm":return a+(t(e)?"minuty":"minut");case"h":return i?"godzina":"godzinę";case"hh":return a+(t(e)?"godziny":"godzin");case"MM":return a+(t(e)?"miesiące":"miesięcy");case"yy":return a+(t(e)?"lata":"lat")}}var n="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),a="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");return e.lang("pl",{months:function(e,t){if(/D MMMM/.test(t))return a[e.month()];else return n[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:i,y:"rok",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/pt-br",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [às] LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº"})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/pt",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ro",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},a=" ";if(e%100>=20||e>=100&&e%100===0)a=" de ";return e+a+n[i]}return e.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ru",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t){var i=e.split("_");return t%10===1&&t%100!==11?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var a={mm:i?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};if("m"===n)return i?"минута":"минуту";else return e+" "+t(a[n],+e)}function n(e,t){var i={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function a(e,t){var i={nominative:"янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function r(e,t){var i={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},n=/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.lang("ru",{months:n,monthsShort:a,weekdays:r,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:i,mm:i,h:"час",hh:i,d:"день",dd:i,M:"месяц",MM:i,y:"год",yy:i},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e){if(4>e)return"ночи";else if(12>e)return"утра";else if(17>e)return"дня";else return"вечера"},ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sk",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e){return e>1&&5>e}function i(e,i,n,a){var r=e+" ";switch(n){case"s":return i||a?"pár sekúnd":"pár sekundami";case"m":return i?"minúta":a?"minútu":"minútou";case"mm":if(i||a)return r+(t(e)?"minúty":"minút");else return r+"minútami";case"h":return i?"hodina":a?"hodinu":"hodinou";case"hh":if(i||a)return r+(t(e)?"hodiny":"hodín");else return r+"hodinami";case"d":return i||a?"deň":"dňom";case"dd":if(i||a)return r+(t(e)?"dni":"dní");else return r+"dňami";case"M":return i||a?"mesiac":"mesiacom";case"MM":if(i||a)return r+(t(e)?"mesiace":"mesiacov");else return r+"mesiacmi";case"y":return i||a?"rok":"rokom";case"yy":if(i||a)return r+(t(e)?"roky":"rokov");else return r+"rokmi"}}var n="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),a="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");return e.lang("sk",{months:n,monthsShort:a,monthsParse:function(e,t){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+e[i]+"$|^"+t[i]+"$","i");return n}(n,a),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sl",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"ena minuta":"eno minuto";case"mm":if(1===e)n+="minuta";else if(2===e)n+="minuti";else if(3===e||4===e)n+="minute";else n+="minut";return n;case"h":return t?"ena ura":"eno uro";case"hh":if(1===e)n+="ura";else if(2===e)n+="uri";else if(3===e||4===e)n+="ure";else n+="ur";return n;case"dd":if(1===e)n+="dan";else n+="dni";return n;case"MM":if(1===e)n+="mesec";else if(2===e)n+="meseca";else if(3===e||4===e)n+="mesece";else n+="mesecev";return n;case"yy":if(1===e)n+="leto";else if(2===e)n+="leti";else if(3===e||4===e)n+="leta";else n+="let";return n}}return e.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejšnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"%s nazaj",s:"nekaj sekund",m:t,mm:t,h:t,hh:t,d:"en dan",dd:t,M:"en mesec",MM:t,y:"eno leto",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sq",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiem:function(e){return 12>e?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sr-cyrl",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,i,n){var a=t.words[n];if(1===n.length)return i?a[0]:a[1];else return e+" "+t.correctGrammaticalCase(e,a)}};return e.lang("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var e=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"дан",dd:t.translate,M:"месец",MM:t.translate,y:"годину",yy:t.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sr",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,i,n){var a=t.words[n];if(1===n.length)return i?a[0]:a[1];else return e+" "+t.correctGrammaticalCase(e,a)}};return e.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var e=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/sv",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"e":1===t?"a":2===t?"a":3===t?"e":"e";return e+i},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/ta",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinal:function(e){return e+"வது"},meridiem:function(e){if(e>=6&&10>=e)return" காலை";else if(e>=10&&14>=e)return" நண்பகல்";else if(e>=14&&18>=e)return" எற்பாடு";else if(e>=18&&20>=e)return" மாலை";else if(e>=20&&24>=e)return" இரவு";else if(e>=0&&6>=e)return" வைகறை"},week:{dow:0,doy:6}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/th",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiem:function(e){if(12>e)return"ก่อนเที่ยง";else return"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/tl-ph",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(e){return e
},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/tr",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};return e.lang("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e){if(0===e)return e+"'ıncı";var i=e%10,n=e%100-i,a=e>=100?100:null;return e+(t[i]||t[n]||t[a])},week:{dow:1,doy:7}})}),define("moment/lang/tzm-la",["require","exports","module","../moment"],function(require){require("../moment").lang("tzm-la",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/tzm-latn",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/tzm",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/uk",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){function t(e,t){var i=e.split("_");return t%10===1&&t%100!==11?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var a={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};if("m"===n)return i?"хвилина":"хвилину";else if("h"===n)return i?"година":"годину";else return e+" "+t(a[n],+e)}function n(e,t){var i={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},n=/D[oD]? *MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function a(e,t){var i={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},n=/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative";return i[n][e.day()]}function r(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}return e.lang("uk",{months:n,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:a,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., LT",LLLL:"dddd, D MMMM YYYY р., LT"},calendar:{sameDay:r("[Сьогодні "),nextDay:r("[Завтра "),lastDay:r("[Вчора "),nextWeek:r("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[Минулої] dddd [").call(this);case 1:case 2:case 4:return r("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:i,mm:i,h:"годину",hh:i,d:"день",dd:i,M:"місяць",MM:i,y:"рік",yy:i},meridiem:function(e){if(4>e)return"ночі";else if(12>e)return"ранку";else if(17>e)return"дня";else return"вечора"},ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/uz",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/vi",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinal:function(e){return e},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/zh-cn",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t){var i=100*e+t;if(600>i)return"凌晨";else if(900>i)return"早上";else if(1130>i)return"上午";else if(1230>i)return"中午";else if(1800>i)return"下午";else return"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},lastWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},sameElse:"LL"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}),function(e){if("function"==typeof define&&define.amd)define("moment/lang/zh-tw",["moment"],e);else if("object"==typeof exports)module.exports=e(require("../moment"));else e(window.moment)}(function(e){return e.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(e,t){var i=100*e+t;if(900>i)return"早上";else if(1130>i)return"上午";else if(1230>i)return"中午";else if(1800>i)return"下午";else return"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}),function(e){function t(e,t){for(var i in t)if(t.hasOwnProperty(i))e[i]=t[i];return e}function i(){this.raw=[],this.length=0}function n(){return"___"+k++}function a(e,t){var i=new Function;i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function r(e){return P[e]}function s(e){return'"'+e.replace(/\x5C/g,"\\\\").replace(/"/g,'\\"').replace(/\x0A/g,"\\n").replace(/\x09/g,"\\t").replace(/\x0D/g,"\\r")+'"'}function o(e){return e.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(e){return"\\"+e})}function l(e){var t=arguments;return e.replace(/\{([0-9]+)\}/g,function(e,i){return t[i-0+1]})}function d(e){return e=e.replace(/^\s*\*/,""),l('gv({0},["{1}"])',s(e),e.replace(/\[['"]?([^'"]+)['"]?\]/g,function(e,t){return"."+t}).split(".").join('","'))}function u(e,t,i,n,a,r){for(var s=i.length,o=e.split(t),l=0,d=[],u=0,h=o.length;h>u;u++){var c=o[u];if(u){var f=1;for(l++;;){var p=c.indexOf(i);if(0>p){d.push(l>1&&f?t:"",c);break}if(l=n?l-1:0,d.push(l>0&&f?t:"",c.slice(0,p),l>0?i:""),c=c.slice(p+s),f=0,0===l)break}if(0===l)a(d.join("")),r(c),d=[]}else c&&r(c)}if(l>0&&d.length>0)r(t),r(d.join(""))}function h(e,t,i){var n,a=[],r=t.options,o="",l="",c="",f="";if(i)o="ts(",l=")",c=E,f=N,n=r.defaultFilter;return u(e,r.variableOpen,r.variableClose,1,function(e){if(i&&e.indexOf("|")<0&&n)e+="|"+n;var r=e.indexOf("|"),s=(r>0?e.slice(0,r):e).replace(/^\s+/,"").replace(/\s+$/,""),u=r>0?e.slice(r+1):"",p=0===s.indexOf("*"),m=[p?"":o,d(s),p?"":l];if(u){u=h(u,t);for(var g=u.split("|"),v=0,y=g.length;y>v;v++){var _=g[v];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(_)){if(m.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)m.push(",",RegExp.$3);m.push(")")}}}a.push(c,m.join(""),f)},function(e){a.push(c,i?s(e):e,f)}),a.join("")}function c(e,t){this.value=e,this.engine=t}function f(e,t){this.value=e,this.engine=t,this.children=[],this.cloneProps=[]}function p(e,t){var i=e.stack,n=t?i.find(function(e){return e instanceof t}):i.bottom();if(n){for(var a;(a=i.top())!==n;){if(!a.autoClose)throw new Error(a.type+" must be closed manually: "+a.value);a.autoClose(e)}n.close(e)}return n}function m(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.master=RegExp.$3,this.name=RegExp.$1,f.call(this,e,t),this.blocks={}}function g(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,f.call(this,e,t),this.cloneProps=["name"]}function v(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,f.call(this,e,t),this.cloneProps=["name","state","blocks"],this.blocks={}}function y(e,t){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.expr=RegExp.$2,f.call(this,e,t),this.cloneProps=["name","expr"]}function _(e,t){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,e,t),this.cloneProps=["name","args"]}function x(e,t){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,e,t),this.cloneProps=["name","args"]}function M(e,t){var i=new RegExp(l("^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$",o(t.options.variableOpen),o(t.options.variableClose)),"i");if(!i.test(e))throw new Error("Invalid "+this.type+" syntax: "+e);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,f.call(this,e,t),this.cloneProps=["list","item","index"]}function b(e,t){f.call(this,e,t)}function w(e,t){b.call(this,e,t)}function L(e,t){f.call(this,e,t)}function C(e,t){t.target=e;var i=t.engine,n=e.name;if(i.targets[n])switch(i.options.namingConflict){case"override":i.targets[n]=e,t.targets.push(n);case"ignore":break;default:throw new Error("Target exists: "+n)}else i.targets[n]=e,t.targets.push(n)}function T(e,t){V[e]=t,t.prototype.type=e}function D(e){this.options={commandOpen:"<!--",commandClose:"-->",commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:"${",variableClose:"}",defaultFilter:"html"},this.config(e),this.targets={},this.filters=t({},S)}function Y(e,t){function n(){var e;if(h.length>0&&(e=h.join(""))){var i=new c(e,t);if(i.beforeAdd(d),l.top().addChild(i),h=[],t.options.strip&&d.current instanceof f)i.value=e.replace(/^[\x20\t\r]*\n/,"");d.current=i}}var a,r=t.options.commandOpen,s=t.options.commandClose,o=t.options.commandSyntax,l=new i,d={engine:t,targets:[],stack:l,target:null},h=[];return u(e,r,s,0,function(e){var i=o.exec(e);if(i&&(a=V[i[2].toLowerCase()])&&"function"==typeof a){n();var l=d.current;if(t.options.strip&&l instanceof c)l.value=l.value.replace(/\r?\n[\x20\t]*$/,"\n");if(i[1])l=p(d,a);else{if(l=new a(i[3],t),"function"==typeof l.beforeOpen)l.beforeOpen(d);l.open(d)}d.current=l}else if(!/^\s*\/\//.test(e))h.push(r,e,s);a=null},function(e){h.push(e)}),n(),p(d),d.targets}i.prototype={push:function(e){this.raw[this.length++]=e},pop:function(){if(this.length>0){var e=this.raw[--this.length];return this.raw.length=this.length,e}},top:function(){return this.raw[this.length-1]},bottom:function(){return this.raw[0]},find:function(e){for(var t=this.length;t--;){var i=this.raw[t];if(e(i))return i}}};var k=178245,P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S={html:function(e){return e.replace(/[&<>"']/g,r)},url:encodeURIComponent,raw:function(e){return e}},I='var r="";',E="r+=",N=";",O="return r;";if("undefined"!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)I="var r=[],ri=0;",E="r[ri++]=",O='return r.join("");';c.prototype={getRendererBody:function(){var e=this.value,t=this.engine.options;if(!e||t.strip&&/^\s*$/.test(e))return"";else return h(e,this.engine,1)},clone:function(){return this}},f.prototype={addChild:function(e){this.children.push(e)},open:function(e){var t=e.stack.top();t&&t.addChild(this),e.stack.push(this)},close:function(e){if(e.stack.top()===this)e.stack.pop()},getRendererBody:function(){for(var e=[],t=this.children,i=0;i<t.length;i++)e.push(t[i].getRendererBody());return e.join("")},clone:function(){for(var e=new this.constructor(this.value,this.engine),t=0,i=this.children.length;i>t;t++)e.addChild(this.children[t].clone());for(var t=0,i=this.cloneProps.length;i>t;t++){var n=this.cloneProps[t];e[n]=this[n]}return e}};var H='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';a(m,f),a(g,f),a(v,f),a(y,f),a(_,f),a(x,f),a(M,f),a(b,f),a(w,b),a(L,b);var j={READING:1,READED:2,APPLIED:3,READY:4};v.prototype.applyMaster=m.prototype.applyMaster=function(e){function t(e){var n=e.children;if(n instanceof Array)for(var a=0,r=n.length;r>a;a++){var s=n[a];if(s instanceof g&&i[s.name])s=n[a]=i[s.name];t(s)}}if(this.state>=j.APPLIED)return 1;var i=this.blocks,n=this.engine.targets[e];if(n&&n.applyMaster(n.master))return this.children=n.clone().children,t(this),this.state=j.APPLIED,1;else return void 0},m.prototype.isReady=function(){function e(n){for(var a=0,r=n.children.length;r>a;a++){var s=n.children[a];if(s instanceof v){var o=t.targets[s.name];i=i&&o&&o.isReady(t)}else if(s instanceof f)e(s)}}if(this.state>=j.READY)return 1;var t=this.engine,i=1;if(this.applyMaster(this.master))return e(this),i&&(this.state=j.READY),i;else return void 0},m.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var e=new Function("data","engine",[H,I,this.getRendererBody(),O].join("\n")),t=this.engine;return this.renderer=function(i){return e(i,t)},this.renderer}return null},m.prototype.open=function(e){p(e),f.prototype.open.call(this,e),this.state=j.READING,C(this,e)},y.prototype.open=x.prototype.open=function(e){e.stack.top().addChild(this)},g.prototype.open=function(e){f.prototype.open.call(this,e),(e.imp||e.target).blocks[this.name]=this},w.prototype.open=function(e){var t=new L;t.open(e);var i=p(e,b);i.addChild(this),e.stack.push(this)},L.prototype.open=function(e){var t=p(e,b);t.addChild(this),e.stack.push(this)},v.prototype.open=function(e){this.parent=e.stack.top(),this.target=e.target,f.prototype.open.call(this,e),this.state=j.READING,e.imp=this},x.prototype.close=y.prototype.close=function(){},v.prototype.close=function(e){f.prototype.close.call(this,e),this.state=j.READED,e.imp=null},m.prototype.close=function(e){f.prototype.close.call(this,e),this.state=this.master?j.READED:j.APPLIED,e.target=null},v.prototype.autoClose=function(e){var t=this.parent.children;t.push.apply(t,this.children),this.children.length=0;for(var i in this.blocks)this.target.blocks[i]=this.blocks[i];this.blocks={},this.close(e)},x.prototype.beforeOpen=v.prototype.beforeOpen=y.prototype.beforeOpen=M.prototype.beforeOpen=_.prototype.beforeOpen=g.prototype.beforeOpen=b.prototype.beforeOpen=c.prototype.beforeAdd=function(e){if(!e.stack.bottom()){var t=new m(n(),e.engine);t.open(e)}},v.prototype.getRendererBody=function(){return this.applyMaster(this.name),f.prototype.getRendererBody.call(this)},x.prototype.getRendererBody=function(){return l("{0}engine.render({2},{{3}}){1}",E,N,s(this.name),h(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(e,t,i){return(t||"")+s(i)+":"}))},y.prototype.getRendererBody=function(){if(this.expr)return l("v[{0}]={1};",s(this.name),h(this.expr,this.engine));else return""},b.prototype.getRendererBody=function(){return l("if({0}){{1}}",h(this.value,this.engine),f.prototype.getRendererBody.call(this))},L.prototype.getRendererBody=function(){return l("}else{{0}",f.prototype.getRendererBody.call(this))},M.prototype.getRendererBody=function(){return l('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),h(this.list,this.engine),s(this.index||n()),s(this.item),n(),n(),f.prototype.getRendererBody.call(this))},_.prototype.getRendererBody=function(){var e=this.args;return l("{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}",I,O,E,N,f.prototype.getRendererBody.call(this),s(this.name),e?","+h(e,this.engine):"")};var V={};T("target",m),T("block",g),T("import",v),T("use",x),T("var",y),T("for",M),T("if",b),T("elif",w),T("else",L),T("filter",_),D.prototype.config=function(e){t(this.options,e)},D.prototype.compile=D.prototype.parse=function(e){if(e){var t=Y(e,this);if(t.length)return this.targets[t[0]].getRenderer()}return new Function('return ""')},D.prototype.getRenderer=function(e){var t=this.targets[e];if(t)return t.getRenderer();else return void 0},D.prototype.render=function(e,t){var i=this.getRenderer(e);if(i)return i(t);else return""},D.prototype.addFilter=function(e,t){if("function"==typeof t)this.filters[e]=t};var $=new D;if($.Engine=D,"object"==typeof exports&&"object"==typeof module)exports=module.exports=$;else if("function"==typeof define&&define.amd)define("etpl/main",[],$);else e.etpl=$}(this),define("etpl",["etpl/main"],function(e){return e}),define("etpl/tpl",["require","exports","module","."],function(require,exports,module){var e=require(".");return{load:function(t,i,n){var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("GET",i.toUrl(t),!0),a.onreadystatechange=function(){if(4===a.readyState){if(a.status>=200&&a.status<300){var t=a.responseText,i=module.config();if(i.autoCompile||null==i.autoCompile)e.compile(t);n(t)}a.onreadystatechange=new Function,a=null}},a.send(null)}}}),define("build/ui",[],function(){});
//# sourceMappingURL=ui.sourcemap