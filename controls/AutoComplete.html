<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>AutoComplete - ESUI Demo</title>
    <link rel="stylesheet" href="../assets/themes/standard.css" />
    <link rel="stylesheet" href="../assets/3rd-party/prism.css" />
    <script src="../assets/loader/esl.js"></script>
    <script src="../assets/loader/config.js"></script>
    <script src="../assets/build/ui.js"></script>
    <script src="../assets/3rd-party/jquery-1.11.1.min.js"></script>
    <script src="../assets/3rd-party/prism.js"></script>
    <script src="../assets/demo.js"></script>
    <!--[if lt IE 9]>
    <script src="http://xy3.baidu.com/js/html5.js"></script>
    <![endif]-->
</head>
<body>
<header id="header">
    <div class="ui-navbar ui-navbar-mordern">
        <h1 id="branding" class="ui-navbar-content">
            <a class="ui-navbar-content-link">ESUI Family</a>
        </h1>
        <ul class="ui-navbar-nav ui-navbar-pull-right" id="global-nav">
            <script>
            mainNav('../');
            </script>
        </ul>
    </div>
</header>
<div class="ui-g main-container">
    <div id="side-bar" class="ui-u-1-5">
        <ul id="navigator" class="ui-sidebar">
        </ul>
    </div>
    <div id="content" class="ui-u-4-5">
        <h2>AutoComplete Extension</h2>
        <p>创建允许在输入时从预生成列表中进行选值的输入框</p>
        <hr />
        <div id="main">
            <h3>Input</h3>
            <p>AutoComplete绑定到Input。</p>
            <div class="example">
                <input data-ui-type="TextBox"
                       data-ui-mode="text"
                       data-ui-id="test"
                       data-ui-extension-autocomplete-type="AutoComplete"
                />
            </div>

            <h3>TextLine</h3>
            <p>AutoComplete绑定到TextLine。</p>
            <div class="example">
                <textarea data-ui-type="TextLine"
                           data-ui-id="test1"
                           data-ui-name="test1"
                           data-ui-extension-autocomplete-type="AutoComplete"
                /></textarea>
            </div>

            <h3>TextArea</h3>
            <p>AutoComplete绑定到TextArea。</p>
            <div class="example">
                <textarea data-ui-type="TextBox"
                           data-ui-mode="text"
                           data-ui-id="test2"
                           data-ui-extension-autocomplete-type="AutoComplete"
                           style="height:200px"
                ></textarea>
            </div>
        </div>
    </div>
</div>
<footer class="footer">
    <script>
        footer();
    </script>
</footer>
<script>
require(
    [
        'esui',
        'ub-ria-ui/AutoComplete',
        'esui/TextLine'
    ],
    function (ui, AutoComplete) {
        window.ui = ui;
        var controls = ui.init();
        var data = [
            "actionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        var data1 = [
            {
                text: 'actionScript',
                desc: 'It is actionScript'
            },
            {
                text: 'AppleScript',
                desc: 'It is AppleScript'
            },
            {
                text: 'Asp',
                desc: 'It is Asp'
            },
            {
                text: 'BASIC',
                desc: 'It is BASIC'
            },
            {
                text: 'Clojure',
                desc: 'It is Clojure'
            },
            {
                text: 'ColdFusion',
                desc: 'It is ColdFusion'
            }
        ];

        var control;
        var datasource;
        for (var i = 0; i < controls.length; i++) {
            control = controls[i];
            if (control.id === 'test4') {
                datasource = function (req, res) {
                    setTimeout(function(){
                        res(data);
                    }, 800);
                };
            }
            else if (control.id === 'test1') {
                datasource = data1;
            } 
            else {
                datasource = data;
            }
            controls[i].setProperties({
                'datasource': datasource,
                /*
                search: function (v) {
                    if (v.length < 2) {
                        return false;
                    }
                },
                */
                select: function (value, target) {
                    //target.setValue('你好');
                    //return false;

                },
                /*extractWord: function (s) {

                },*/
                preProcessResponseData: function (data) {
                    data = ['你好', 'Hello'];
                    return data;
                }
            });
        }
    }
);
</script>
</body>
</html>
