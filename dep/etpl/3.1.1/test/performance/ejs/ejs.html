<!DOCTYPE html>
<html>
<head>
<title>Render Time Test - EJS</title>
<script src="ejs.js"></script>
<script src="../loops.js"></script>
<script src="../render-data.js"></script>
<script src="../load-template.js"></script>
</head>

<body>
<script>
var tpl = new EJS({text: loadTemplate('template.html')});
var now = new Date();
for ( var i = 0; i < loops; i++ ) {
    tpl.render( data );
}
var renderTime = (new Date) - now;
if (parent && parent.receiveResult) {
    parent.receiveResult( renderTime );
} else {
    alert( renderTime );
    var resultArea = document.createElement('textarea');
    resultArea.style.width = '800px';
    resultArea.style.height = '600px';
    resultArea.value = tpl.render( data );
    document.body.appendChild( resultArea );
}
</script>
</body>
</html>